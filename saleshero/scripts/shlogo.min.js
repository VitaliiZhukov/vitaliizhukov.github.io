!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=83)}([function(t,e,i){"use strict";e.__esModule=!0;e.VERSION="2.9.3",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.BaseTextureCache=e.TextureCache=e.mixins=e.pluginTarget=e.EventEmitter=e.isMobile=void 0,e.uid=function(){return++c},e.hex2rgb=function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},e.getResolutionOfUrl=function(t,e){var i=o.default.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1},e.decomposeDataUri=function(t){var e=s.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}},e.getUrlFileExtension=function(t){var e=s.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()},e.getSvgSize=function(t){var e=s.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i},e.skipHello=function(){f=!0},e.sayHello=function(t){if(!f){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+s.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+s.VERSION+" - "+t+" - http://www.pixijs.com/");f=!0}},e.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}},e.sign=function(t){return 0===t?0:t<0?-1:1},e.removeItems=function(t,e,i){var n=t.length;if(!(e>=n||0===i)){for(var r=n-(i=e+i>n?n-e:i),s=e;s<r;++s)t[s]=t[s+i];t.length=r}},e.destroyTextureCache=function(){var t=void 0;for(t in d)d[t].destroy();for(t in p)p[t].destroy()},e.clearTextureCache=function(){var t=void 0;for(t in d)delete d[t];for(t in p)delete p[t]};var s=i(0),o=r(i(3)),a=r(i(6)),h=r(i(104)),u=n(i(105)),l=n(i(45)),c=0,f=!1;e.isMobile=l,e.EventEmitter=a.default,e.pluginTarget=h.default,e.mixins=u;var d=e.TextureCache=Object.create(null),p=e.BaseTextureCache=Object.create(null)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(21);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return n(r).default}});var s=i(91);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return n(s).default}});var o=i(22);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return n(o).default}});var a=i(34);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return n(a).default}});var h=i(92);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return n(h).default}});var u=i(93);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return n(u).default}});var l=i(94);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return n(l).default}});var c=i(23);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var f=i(95);Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return n(f).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(i(102)),s=n(i(103));e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,s.default)()}},function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var s=i(0);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var o=i(2);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=i(5);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return r(a).default}});var h=i(25);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return r(h).default}});var u=i(44);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return r(u).default}});var l=i(7);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return r(l).default}});var c=i(47);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return r(c).default}});var f=i(46);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return r(f).default}});var d=i(26);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return r(d).default}});var p=i(48);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return r(p).default}});var g=i(115);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(g).default}});var v=i(56);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return r(v).default}});var _=i(118);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return r(_).default}});var m=i(134);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return r(m).default}});var y=i(61);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return r(y).default}});var b=i(136);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return r(b).default}});var x=i(143);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(x).default}});var w=i(144);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return r(w).default}});var T=i(8);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return r(T).default}});var E=i(9);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return r(E).default}});var S=i(29);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return r(S).default}});var C=i(53);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return r(C).default}});var P=i(50);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return r(P).default}});var O=i(51);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return r(O).default}});var M=i(54);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(M).default}});var A=i(16);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return r(A).default}});var I=i(11);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return r(I).default}});var k=i(13);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return r(k).default}});var R=i(15);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return r(R).default}});var L=i(59);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return r(L).default}});var D=i(57);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(D).default}});var N=i(58);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return r(N).default}});var F=i(63);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return r(F).default}});var j=i(64);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return j.autoDetectRenderer}});var B=n(i(1)),U=n(i(28)),z=r(i(3)),V=r(i(10)),X=r(i(14));e.settings=z.default,e.utils=B,e.ticker=U,e.CanvasRenderer=V.default,e.WebGLRenderer=X.default},function(t,e,i){var n={createContext:i(96),setVertexAttribArrays:i(35),GLBuffer:i(97),GLFramebuffer:i(98),GLShader:i(99),GLTexture:i(36),VertexArrayObject:i(100),shader:i(101)};void 0!==t&&t.exports&&(t.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},function(t,e,i){"use strict";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(){this._events=new n,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),s.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)o.call(t,e)&&i.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t,e){var i=a?a+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},s.prototype.emit=function(t,e,i,n,r,s){var o=a?a+t:t;if(!this._events[o])return!1;var h,u,l=this._events[o],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,n),!0;case 5:return l.fn.call(l.context,e,i,n,r),!0;case 6:return l.fn.call(l.context,e,i,n,r,s),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,i);break;case 4:l[u].fn.call(l[u].context,e,i,n);break;default:if(!h)for(f=1,h=new Array(c-1);f<c;f++)h[f-1]=arguments[f];l[u].fn.apply(l[u].context,h)}}return!0},s.prototype.on=function(t,e,i){var n=new r(e,i||this),s=a?a+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.once=function(t,e,i){var n=new r(e,i||this,!0),s=a?a+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.removeListener=function(t,e,i,r){var s=a?a+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[s],this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||(0==--this._eventsCount?this._events=new n:delete this._events[s]);else{for(var h=0,u=[],l=o.length;h<l;h++)(o[h].fn!==e||r&&!o[h].once||i&&o[h].context!==i)&&u.push(o[h]);u.length?this._events[s]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new n:delete this._events[s]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=a,s.EventEmitter=s,t.exports=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(1),h=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.children=[],i}return s(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);(0,a.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,(0,a.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,a.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,n="number"==typeof e?e:this.children.length,r=n-i,s=void 0;if(r>0&&r<=n){s=this.children.splice(i,r);for(var o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<s.length;++a)s[a].emit("removed",this);return s}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var r=0,s=this.children.length;r<s;r++)this.children[r].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},o(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(i(44)).default);e.default=h,h.prototype.containerUpdateTransform=h.prototype.updateTransform},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=n(i(9)),l=n(i(50)),c=n(i(51)),f=n(i(6)),d=i(2),p=i(1),g=n(i(3)),v=function(t){function e(i,n,o,a,h){r(this,e);var u=s(this,t.call(this));if(u.noFrame=!1,n||(u.noFrame=!0,n=new d.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),u.baseTexture=i,u._frame=n,u.trim=a,u.valid=!1,u.requiresUpdate=!1,u._uvs=null,u.orig=o||n,u._rotate=Number(h||0),!0===h)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(u.noFrame&&(n=new d.Rectangle(0,0,i.width,i.height),i.on("update",u.onBaseTextureUpdated,u)),u.frame=n):i.once("loaded",u.onBaseTextureLoaded,u),u._updateID=0,u.transform=null,u.textureCacheIds=[],u}return o(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new d.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(p.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new c.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,n,r){var s=p.TextureCache[t];return s||(s=new e(u.default.fromImage(t,i,n,r)),e.addToCache(s,t)),s},e.fromFrame=function(t){var e=p.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(u.default.fromCanvas(t,i,n))},e.fromVideo=function(t,i){return"string"==typeof t?e.fromVideoUrl(t,i):new e(l.default.fromVideo(t,i))},e.fromVideoUrl=function(t,i){return new e(l.default.fromUrl(t,i))},e.from=function(t){if("string"==typeof t){var i=p.TextureCache[t];return i||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t))}return t instanceof HTMLImageElement?new e(u.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,g.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof u.default?new e(t):t},e.fromLoader=function(t,i,n){var r=new u.default(t,void 0,(0,p.getResolutionOfUrl)(i)),s=new e(r);return r.imageUrl=i,n||(n=i),u.default.addToCache(s.baseTexture,n),e.addToCache(s,n),n!==i&&(u.default.addToCache(s.baseTexture,i),e.addToCache(s,i)),s},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),p.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),p.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=p.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete p.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete p.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},h(e,[{key:"frame",get:function(){return this._frame},set:function(t){if(this._frame=t,this.noFrame=!1,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+t.x+" + "+t.width+" > "+this.baseTexture.width+" Y: "+t.y+" + "+t.height+" > "+this.baseTexture.height);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(f.default);e.default=v,v.EMPTY=new v(new u.default),a(v.EMPTY),a(v.EMPTY.baseTexture),v.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new v(new u.default(t))}(),a(v.WHITE),a(v.WHITE.baseTexture)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(1),h=n(i(3)),u=n(i(6)),l=n(i(106)),c=n(i(27)),f=function(t){function e(i,n,o){r(this,e);var u=s(this,t.call(this));return u.uid=(0,a.uid)(),u.touched=0,u.resolution=o||h.default.RESOLUTION,u.width=100,u.height=100,u.realWidth=100,u.realHeight=100,u.scaleMode=void 0!==n?n:h.default.SCALE_MODE,u.hasLoaded=!1,u.isLoading=!1,u.source=null,u.origSource=null,u.imageType=null,u.sourceScale=1,u.premultipliedAlpha=!0,u.imageUrl=null,u.isPowerOfTwo=!1,u.mipmap=h.default.MIPMAP_TEXTURES,u.wrapMode=h.default.WRAP_MODE,u._glTextures={},u._enabled=0,u._virtalBoundId=-1,u._destroyed=!1,u.textureCacheIds=[],i&&u.loadSource(i),u}return o(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=c.default.isPow2(this.realWidth)&&c.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n._sourceLoaded(),"svg"!==n.imageType?n.emit("loaded",n):n._loadSvgSource())},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,a.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,a.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,a.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,a.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,a.getSvgSize)(t),n=i.width,r=i.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(r*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,a.uid)(),s.getContext("2d").drawImage(this.source,0,0,n,r,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,e.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete a.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,r){var s=a.BaseTextureCache[t];if(!s){var o=new Image;void 0===i&&0!==t.indexOf("data:")&&(o.crossOrigin=(0,l.default)(t)),(s=new e(o,n)).imageUrl=t,r&&(s.sourceScale=r),s.resolution=(0,a.getResolutionOfUrl)(t),o.src=t,e.addToCache(s,t)}return s},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,a.uid)());var r=a.BaseTextureCache[t._pixiId];return r||(r=new e(t,i),e.addToCache(r,t._pixiId)),r},e.from=function(t,i,n){if("string"==typeof t)return e.fromImage(t,void 0,i,n);if(t instanceof HTMLImageElement){var r=t.src,s=a.BaseTextureCache[r];return s||((s=new e(t,i)).imageUrl=r,n&&(s.sourceScale=n),s.resolution=(0,a.getResolutionOfUrl)(r),e.addToCache(s,r)),s}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),a.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),a.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=a.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete a.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete a.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(u.default);e.default=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(52)),h=n(i(116)),u=n(i(54)),l=n(i(117)),c=i(1),f=i(0),d=n(i(3)),p=function(t){function e(i,n,o){r(this,e);var a=s(this,t.call(this,"Canvas",i,n,o));return a.type=f.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.refresh=!0,a.maskManager=new h.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,l.default)(),a._activeBlendMode=null,a.context=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return o(e,t),e.prototype.render=function(t,e,i,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var s=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new u.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var o=this.context;if(e||(this._lastObjectRendered=t),!r){var a=t.parent,h=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(h),this._tempDisplayObjectParent.transform._worldID=-1):h.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,o.globalCompositeOperation=this.blendModes[f.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(o.fillStyle="black",o.clear()),(void 0!==i?i:this.clearBeforeRender)&&(this.renderingToScreen,this.transparent?o.clearRect(0,0,this.width,this.height):(o.fillStyle=this._backgroundColorString,o.fillRect(0,0,this.width,this.height)));var l=this.context;this.context=o,t.renderCanvas(this),this.context=l,this.resolution=s,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=d.default.SCALE_MODE===f.SCALE_MODES.LINEAR)},e}(a.default);e.default=p,c.pluginTarget.mixin(p)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=r},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(function(t){return t&&t.__esModule?t:{default:t}}(i(11)).default);e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(52)),h=n(i(119)),u=n(i(122)),l=n(i(123)),c=n(i(15)),f=n(i(13)),d=n(i(125)),p=n(i(9)),g=n(i(126)),v=n(i(127)),_=n(i(129)),m=n(i(130)),y=i(1),b=n(i(5)),x=i(0),w=0,T=function(t){function e(i,n,o){r(this,e);var a=s(this,t.call(this,"WebGL",i,n,o));return a.legacy=a.options.legacy,a.legacy&&(b.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=x.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new h.default(a),a.stencilManager=new u.default(a),a.emptyRenderer=new f.default(a),a.currentRenderer=a.emptyRenderer,a.initPlugins(),a.options.context&&(0,m.default)(a.options.context),a.gl=a.options.context||b.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=w++,a.state=new v.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.filterManager=new l.default(a),a.drawModes=(0,_.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return o(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new d.default(this),this.textureGC=new g.default(this),this.state.resetToDefault(),this.rootRenderTarget=new c.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new b.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0;r<e;r++){var s=new p.default;s._glTextures[this.CONTEXT_UID]=i,this.boundTextures[r]=n,this.emptyTextures[r]=s,this.bindTexture(null,r)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!r){var s=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){a.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(i=n._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,i)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var r=this.gl,s=t._glTextures[this.CONTEXT_UID];return s?(this.boundTextures[e]=t,r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,s.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===t&&(this.boundTextures[i]=this.emptyTextures[i],e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new b.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(a.default);e.default=T,y.pluginTarget.mixin(T)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(2),s=i(0),o=function(t){return t&&t.__esModule?t:{default:t}}(i(3)),a=i(5),h=function(){function t(e,i,h,u,l,c){n(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new r.Rectangle(0,0,1,1),this.resolution=l||o.default.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new r.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==u?u:o.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new a.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=a.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===s.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,h)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.substring(0,9))return"precision "+e+" float;\n"+t;return t}e.__esModule=!0;var a=i(5),h=function(t){return t&&t.__esModule?t:{default:t}}(i(3)),u=function(t){function e(i,s,a){return n(this,e),r(this,t.call(this,i,o(s,h.default.PRECISION_VERTEX),o(a,h.default.PRECISION_FRAGMENT)))}return s(e,t),e}(a.GLShader);e.default=u},function(t,e,i){"use strict";function n(t,e){var i=t.points;if(0!==i.length){var n=new s.Point(i[0],i[1]),r=new s.Point(i[i.length-2],i[i.length-1]);if(n.x===r.x&&n.y===r.y){(i=i.slice()).pop(),i.pop();var a=(r=new s.Point(i[i.length-2],i[i.length-1])).x+.5*(n.x-r.x),h=r.y+.5*(n.y-r.y);i.unshift(a,h),i.push(a,h)}var u=e.points,l=e.indices,c=i.length/2,f=i.length,d=u.length/6,p=t.lineWidth/2,g=(0,o.hex2rgb)(t.lineColor),v=t.lineAlpha,_=g[0]*v,m=g[1]*v,y=g[2]*v,b=i[0],x=i[1],w=i[2],T=i[3],E=0,S=0,C=-(x-T),P=b-w,O=0,M=0,A=0,I=0,k=Math.sqrt(C*C+P*P);C/=k,P/=k,C*=p,P*=p,u.push(b-C,x-P,_,m,y,v),u.push(b+C,x+P,_,m,y,v);for(var R=1;R<c-1;++R){b=i[2*(R-1)],x=i[2*(R-1)+1],w=i[2*R],T=i[2*R+1],E=i[2*(R+1)],S=i[2*(R+1)+1],C=-(x-T),P=b-w,C/=k=Math.sqrt(C*C+P*P),P/=k,C*=p,P*=p,O=-(T-S),M=w-E,O/=k=Math.sqrt(O*O+M*M),M/=k;var L=-P+x-(-P+T),D=-C+w-(-C+b),N=(-C+b)*(-P+T)-(-C+w)*(-P+x),F=-(M*=p)+S-(-M+T),j=-(O*=p)+w-(-O+E),B=(-O+E)*(-M+T)-(-O+w)*(-M+S),U=L*j-F*D;if(Math.abs(U)<.1)U+=10.1,u.push(w-C,T-P,_,m,y,v),u.push(w+C,T+P,_,m,y,v);else{var z=(D*B-j*N)/U,V=(F*N-L*B)/U;(z-w)*(z-w)+(V-T)*(V-T)>196*p*p?(A=C-O,I=P-M,A/=k=Math.sqrt(A*A+I*I),I/=k,A*=p,I*=p,u.push(w-A,T-I),u.push(_,m,y,v),u.push(w+A,T+I),u.push(_,m,y,v),u.push(w-A,T-I),u.push(_,m,y,v),f++):(u.push(z,V),u.push(_,m,y,v),u.push(w-(z-w),T-(V-T)),u.push(_,m,y,v))}}b=i[2*(c-2)],x=i[2*(c-2)+1],w=i[2*(c-1)],C=-(x-(T=i[2*(c-1)+1])),P=b-w,C/=k=Math.sqrt(C*C+P*P),P/=k,C*=p,P*=p,u.push(w-C,T-P),u.push(_,m,y,v),u.push(w+C,T+P),u.push(_,m,y,v),l.push(d);for(var X=0;X<f;++X)l.push(d++);l.push(d-1)}}function r(t,e){var i=0,n=t.points;if(0!==n.length){var r=e.points,s=n.length/2,a=(0,o.hex2rgb)(t.lineColor),h=t.lineAlpha,u=a[0]*h,l=a[1]*h,c=a[2]*h;for(i=1;i<s;i++){var f=n[2*(i-1)],d=n[2*(i-1)+1],p=n[2*i],g=n[2*i+1];r.push(f,d),r.push(u,l,c,h),r.push(p,g),r.push(u,l,c,h)}}}e.__esModule=!0,e.default=function(t,e,i){t.nativeLines?r(t,i):n(t,e)};var s=i(2),o=i(1)},function(t,e,i){"use strict";var n=i(152).default,r=i(31).default,s=i(75),o=i(76);n.Resource=r,n.async=s,n.base64=o,t.exports=n,t.exports.default=n},function(t,e,i){"use strict";function n(t,e){if(isObject(t)&&isObject(e)){for(var i in e){if(!t.hasOwnProperty(i))return!1;if(!n(e[i],t[i]))return!1}return!0}return t===e}e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.areEqualDeep=n,e.convertSpeedPace=function(t){return t?100*Math.PI/(3*t):0},window.Float32Array||(window.Float32Array=Array),window.Float32Array.prototype.slice||(window.Float32Array.prototype.slice=function(t,e){t||(t=0),e||(e=this.length);for(var i=new Float32Array(e-t),n=0;n<t+e;++n)i[n]=this[t+n];return i}),window.Uint32Array||(window.Uint32Array=Array),window.Uint32Array.prototype.slice||(window.Uint32Array.prototype.slice=function(t,e){t||(t=0),e||(e=this.length);for(var i=new Uint32Array(e-t),n=0;n<t+e;++n)i[n]=this[t+n];return i}),window.Uint16Array||(window.Uint16Array=Array),window.Uint16Array.prototype.slice||(window.Uint16Array.prototype.slice=function(t,e){t||(t=0),e||(e=this.length);for(var i=new Uint16Array(e-t),n=0;n<t+e;++n)i[n]=this[t+n];return i}),window.isObject||(window.isObject=function(t){return t&&"object"===(void 0===t?"undefined":r(t))&&!Array.isArray(t)}),window.mergeDeep||(window.mergeDeep=function(t,e){if(isObject(t)&&isObject(e))for(var i in e)if(isObject(e[i])){if(!t[i]){var n;Object.assign(t,(n={},n[i]={},n))}mergeDeep(t[i],e[i])}else{var r;Object.assign(t,(r={},r[i]=e[i],r))}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e,i){if("object"==(void 0===t?"undefined":s(t))&&"object"==(void 0===e?"undefined":s(e))){var n={};for(var o in t)e.hasOwnProperty(o)&&(n[o]=r(t[o],e[o],i));return n}return isNaN(t)||isNaN(e)?e:t+i*(e-t)}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(160)),a=i(19),h=o.easeLinear,u=600,l={CREATED:0,STARTED:1,ENDED:2},c=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments[3];n(this,t),this.delay=r,this.duration=i,this.easeFunc=s&&o[s]?o[s]:h,this._tweens={},this.events={start:null,stop:null},this.init(e)}return t.prototype.init=function(t){t.__transition&&t.__transition.stop(),this.source=t,this.source.__transition=this,this.initTime=new Date,this.state=l.CREATED},t.prototype.delay=function(t){this.delay=t||0},t.prototype.duration=function(t){this.duration=isNaN(t)||t<0?u:t},t.prototype.ease=function(t){this.easeFunc=t},t.prototype.tween=function(t,e){var i=this.source[t];void 0!==i?(0,a.areEqualDeep)(i,e)||(this._tweens[t]={origin:i,target:e}):console.warn("'"+t+"' parameter is missing in the transiting object")},t.prototype.tweenRotation=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*Math.PI;this.tween(t,e);var n=this._tweens[t];if(n){var r=n.target-n.origin,s=.5*i;r>s?n.target-=i:r<-s&&(n.target+=i)}},t.prototype.start=function(){this.state===l.CREATED?(this.state=l.STARTED,"function"==typeof this.events.start&&this.events.start()):this.stop()},t.prototype.stop=function(){this.state=l.ENDED,"function"==typeof this.events.stop&&this.events.stop(),delete this.source.__transition},t.prototype.end=function(){this.state=l.ENDED;for(var t in this._tweens){var e=this._tweens[t].target;this.source[t]=e}"function"==typeof this.events.stop&&this.events.stop(),delete this.source.__transition},t.prototype.tick=function(t){var e=new Date-this.initTime-this.delay;if(!(e<0))if(e>this.duration)this.end();else{this.state===l.CREATED&&this.start();var i=this.easeFunc(e/this.duration);for(var n in this._tweens){var s=this._tweens[n],o=r(s.origin,s.target,i);this.source[n]=o}}},t.prototype.on=function(t,e){this.events.hasProperty(t)&&(this.events[t]="function"==typeof e?e:null)},t}();e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){return t&&t.__esModule?t:{default:t}}(i(21)),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.a=e,this.b=i,this.c=r,this.d=s,this.tx=o,this.ty=a,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new s.default;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new s.default;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){var u=Math.sin(o),l=Math.cos(o),c=Math.cos(h),f=Math.sin(h),d=-Math.sin(a),p=Math.cos(a),g=l*r,v=u*r,_=-u*s,m=l*s;return this.a=c*g+f*_,this.b=c*v+f*m,this.c=d*g+p*_,this.d=d*v+p*m,this.tx=t+(i*g+n*_),this.ty=e+(i*v+n*m),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=-Math.atan2(-n,r),o=Math.atan2(i,e);return Math.abs(s+o)<1e-5?(t.rotation=o,e<0&&r>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=s,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(0),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=i,this.width=r,this.height=o,this.type=s.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=n,this.height=r-n},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=o},function(t,e){var i=null,n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=function(t,e){if(!i){var r=Object.keys(n);i={};for(var s=0;s<r.length;++s){var o=r[s];i[t[o]]=n[o]}}return i[e]}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(2),s=function(){function t(){n(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:(t=t||new r.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,s=t[0],o=t[1];e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[2],o=t[3],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[4],o=t[5],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[6],o=t[7],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){var s=t.worldTransform,o=s.a,a=s.b,h=s.c,u=s.d,l=s.tx,c=s.ty,f=this.minX,d=this.minY,p=this.maxX,g=this.maxY,v=o*e+h*i+l,_=a*e+u*i+c;f=v<f?v:f,d=_<d?_:d,p=v>p?v:p,g=_>g?_:g,_=a*n+u*i+c,f=(v=o*n+h*i+l)<f?v:f,d=_<d?_:d,p=v>p?v:p,g=_>g?_:g,_=a*e+u*r+c,f=(v=o*e+h*r+l)<f?v:f,d=_<d?_:d,p=v>p?v:p,g=_>g?_:g,_=a*n+u*r+c,f=(v=o*n+h*r+l)<f?v:f,d=_<d?_:d,p=v>p?v:p,g=_>g?_:g,this.minX=f,this.minY=d,this.maxX=p,this.maxY=g},t.prototype.addVertices=function(t,e,i,n){for(var r=t.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,u=r.tx,l=r.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,g=i;g<n;g+=2){var v=e[g],_=e[g+1],m=s*v+a*_+u,y=h*_+o*v+l;c=m<c?m:c,f=y<f?y:f,d=m>d?m:d,p=y>p?y:p}this.minX=c,this.minY=f,this.maxX=d,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>u?s:u}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>u?s:u}},t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(2),s=function(){function t(){n(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();e.default=s,s.prototype.updateWorldTransform=s.prototype.updateTransform,s.IDENTITY=new s},function(t,e,i){"use strict";"use restrict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,t>>>=e,i=(t>255)<<3,t>>>=i,e|=i,i=(t>15)<<2,t>>>=i,e|=i,i=(t>3)<<1,t>>>=i,(e|=i)|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},e.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},e.interleave3=function(t,e,i){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),t|i<<2},e.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},function(t,e,i){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(113)),r=new n.default;r.autoStart=!0,r.destroy=function(){},e.shared=r,e.Ticker=n.default},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(53)),h=function(t){function e(i,n){r(this,e);var o=null;if(!(i instanceof a.default)){var h=arguments[1],u=arguments[2],l=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+h+", "+u+") instead of the ctor directly."),o=arguments[0],n=null,i=new a.default(h,u,l,c)}var f=s(this,t.call(this,i,n));return f.legacyRenderer=o,f.valid=!0,f._updateUvs(),f}return o(e,t),e.prototype.resize=function(t,e,i){this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,n,r){return new e(new a.default(t,i,n,r))},e}(n(i(8)).default);e.default=h},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return r.exec(t).slice(1)};e.resolve=function(){for(var e="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,r="/"===o.charAt(0))}return e=i(n(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),s="/"===o(t,-1);return(t=i(n(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),s=n(i.split("/")),o=Math.min(r.length,s.length),a=o,h=0;h<o;h++)if(r[h]!==s[h]){a=h;break}for(var u=[],h=a;h<r.length;h++)u.push("..");return(u=u.concat(s.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=s(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.basename=function(t,e){var i=s(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return s(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(e,i(121))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(){}function o(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function a(t){return t.toString().replace("object ","")}e.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=n(i(74)),l=n(i(73)),c=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),f=null,d=function(){function t(e,i,n){if(r(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=s,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new l.default,this.onProgress=new l.default,this.onComplete=new l.default,this.onAfterMiddleware=new l.default}return t.setExtensionLoadType=function(e,i){o(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){o(t._xhrTypeMap,e,i)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(i)},1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:c&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(a(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(a(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(a(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&i.length>0?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,f||(f=document.createElement("a")),f.href=t;var i=!(t=(0,u.default)(f.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),s=Math.min(n>-1?n:t.length,r>-1?r:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},h(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();e.default=d,d.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},d.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},d.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},d.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},d._loadTypeMap={gif:d.LOAD_TYPE.IMAGE,png:d.LOAD_TYPE.IMAGE,bmp:d.LOAD_TYPE.IMAGE,jpg:d.LOAD_TYPE.IMAGE,jpeg:d.LOAD_TYPE.IMAGE,tif:d.LOAD_TYPE.IMAGE,tiff:d.LOAD_TYPE.IMAGE,webp:d.LOAD_TYPE.IMAGE,tga:d.LOAD_TYPE.IMAGE,svg:d.LOAD_TYPE.IMAGE,"svg+xml":d.LOAD_TYPE.IMAGE,mp3:d.LOAD_TYPE.AUDIO,ogg:d.LOAD_TYPE.AUDIO,wav:d.LOAD_TYPE.AUDIO,mp4:d.LOAD_TYPE.VIDEO,webm:d.LOAD_TYPE.VIDEO},d._xhrTypeMap={xhtml:d.XHR_RESPONSE_TYPE.DOCUMENT,html:d.XHR_RESPONSE_TYPE.DOCUMENT,htm:d.XHR_RESPONSE_TYPE.DOCUMENT,xml:d.XHR_RESPONSE_TYPE.DOCUMENT,tmx:d.XHR_RESPONSE_TYPE.DOCUMENT,svg:d.XHR_RESPONSE_TYPE.DOCUMENT,tsx:d.XHR_RESPONSE_TYPE.DOCUMENT,gif:d.XHR_RESPONSE_TYPE.BLOB,png:d.XHR_RESPONSE_TYPE.BLOB,bmp:d.XHR_RESPONSE_TYPE.BLOB,jpg:d.XHR_RESPONSE_TYPE.BLOB,jpeg:d.XHR_RESPONSE_TYPE.BLOB,tif:d.XHR_RESPONSE_TYPE.BLOB,tiff:d.XHR_RESPONSE_TYPE.BLOB,webp:d.XHR_RESPONSE_TYPE.BLOB,tga:d.XHR_RESPONSE_TYPE.BLOB,json:d.XHR_RESPONSE_TYPE.JSON,text:d.XHR_RESPONSE_TYPE.TEXT,txt:d.XHR_RESPONSE_TYPE.TEXT,ttf:d.XHR_RESPONSE_TYPE.BUFFER,otf:d.XHR_RESPONSE_TYPE.BUFFER},d.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),h=function(t){return t&&t.__esModule?t:{default:t}}(i(156)),u=new a.Point,l=new a.Polygon,c=function(t){function e(i,s,o,u,l){n(this,e);var c=r(this,t.call(this));return c._texture=i,c.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]),c.vertices=s||new Float32Array([0,0,100,0,100,100,0,100]),c.indices=u||new Uint16Array([0,1,3,2]),c.dirty=0,c.indexDirty=0,c.blendMode=a.BLEND_MODES.NORMAL,c.canvasPadding=0,c.drawMode=l||e.DRAW_MODES.TRIANGLE_MESH,c.shader=null,c.tintRgb=new Float32Array([1,1,1]),c._glDatas={},c._uvTransform=new h.default(i),c.uploadUvTransform=!1,c.pluginName="mesh",c}return s(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,u);for(var i=this.vertices,n=l.points,r=this.indices,s=this.indices.length,o=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<s;a+=o){var h=2*r[a],c=2*r[a+1],f=2*r[a+2];if(n[0]=i[h],n[1]=i[h+1],n[2]=i[c],n[3]=i[c+1],n[4]=i[f],n[5]=i[f+1],l.contains(u.x,u.y))return!0}return!1},o(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return a.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=a.utils.hex2rgb(t,this.tintRgb)}}]),e}(a.Container);e.default=c,c.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(i(20)),a=i(19),h=2*Math.PI,u=100/h,l=h/100,c=function(){function t(e,i,r,s,o){n(this,t),this._pivot=e||new t({x:0,y:0}),this._baseRadius=i||0,this._orbitCoeff=r||0,this._initAngle=s%h||0,this._rotatingAngle=0,this._speed=o||0,this._initPosition(),this.beforeUpdate=null}return t.prototype.isStatic=function(){return!this._speed||!this._orbitCoeff},t.prototype.update=function(t){if(this._makeTransition(t),t&&!this.isStatic()){var e=t*this._speed;this._rotatingAngle+=e,this._rotatingAngle%=h,this._updateRotation()}},t.prototype.getState=function(){return{orbit:this.orbit,speed:this.speed,pace:this.pace,initRotation:this.initRotation}},t.prototype.setState=function(t){if("object"!==(void 0===t?"undefined":r(t)))throw new Error("Unable to setup state with non-object settings");this.orbit=t.orbit||0,this.initRotation=t.initRotation||0,t.hasOwnProperty("speed")?this.speed=t.speed:this.pace=t.pace||0},t.prototype.transitTo=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments[3];if(t){var r=new o.default(this,e,i,n);for(var s in t)if("initRotation"!==s)if("pace"!==s)r.tween(s,t[s]);else{var h=(0,a.convertSpeedPace)(t.pace);r.tween("speed",h)}else r.tweenRotation(s,t[s],100)}},t.prototype._updateRotation=function(){var t=this._initAngle+this._rotatingAngle,e=this._orbit*Math.cos(t),i=this._orbit*Math.sin(t);this._position={x:e,y:i}},t.prototype._initPosition=function(){this._orbit=this._orbitCoeff*this._baseRadius,this._updateRotation()},t.prototype._makeTransition=function(t){this.__transition&&this.__transition.tick(t)},s(t,[{key:"orbit",get:function(){return 100*this._orbitCoeff},set:function(t){this._orbitCoeff=(t||0)/100,this._orbit=this._orbitCoeff*this._baseRadius,this._updateRotation()}},{key:"initRotation",get:function(){return this._initAngle*u},set:function(t){this._initAngle=t%100*l,this._updateRotation()}},{key:"speed",get:function(){return this._speed},set:function(t){this._speed=t||0}},{key:"pace",get:function(){return this._speed?(0,a.convertSpeedPace)(this._speed):0},set:function(t){this._speed=t?(0,a.convertSpeedPace)(t):0}},{key:"x",get:function(){return Math.floor(this._position.x+this._pivot.x)}},{key:"y",get:function(){return Math.floor(this._position.y+this._pivot.y)}}]),t}();e.default=c},function(t,e,i){"use strict";function n(t){return t<0?-1:t>0?1:0}e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(22)),s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],l=[];!function(){for(var t=0;t<16;t++){var e=[];l.push(e);for(var i=0;i<16;i++)for(var c=n(s[t]*s[i]+a[t]*o[i]),f=n(o[t]*s[i]+h[t]*o[i]),d=n(s[t]*a[i]+a[t]*h[i]),p=n(o[t]*a[i]+h[t]*h[i]),g=0;g<16;g++)if(s[g]===c&&o[g]===f&&a[g]===d&&h[g]===p){e.push(g);break}}for(var v=0;v<16;v++){var _=new r.default;_.set(s[v],o[v],a[v],h[v],0,0),u.push(_)}}();var c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return s[t]},uY:function(t){return o[t]},vX:function(t){return a[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return l[t][e]},sub:function(t,e){return l[t][c.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?c.S:c.N:2*Math.abs(e)<=Math.abs(t)?t>0?c.E:c.W:e>0?t>0?c.SE:c.SW:t>0?c.NE:c.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=u[c.inv(e)];r.tx=i,r.ty=n,t.append(r)}};e.default=c},function(t,e){t.exports=function(t,e,i){var n;if(i){var r=i.tempAttribState,s=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<e.length;n++)r[e[n].attribute.location]=!0;for(n=0;n<s.length;n++)s[n]!==r[n]&&(s[n]=r[n],i.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var o=e[n];t.enableVertexAttribArray(o.attribute.location)}}},function(t,e){var i=function(t,e,i,n,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=n||t.RGBA,this.type=r||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=n};var n=!1;i.prototype.uploadData=function(t,e,i){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!n){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");n=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},i.fromSource=function(t,e,n){var r=new i(t);return r.premultiplyAlpha=n||!1,r.upload(e),r},i.fromData=function(t,e,n,r){var s=new i(t);return s.uploadData(e,n,r),s},t.exports=i},function(t,e){var i=function(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};t.exports=function(t,e,n,r){var s=i(t,t.VERTEX_SHADER,e),o=i(t,t.FRAGMENT_SHADER,n),a=t.createProgram();if(t.attachShader(a,s),t.attachShader(a,o),r)for(var h in r)t.bindAttribLocation(a,r[h],h);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(s),t.deleteShader(o),a}},function(t,e,i){var n=i(24),r=i(39),s=function(t,e,i,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,n||0)};t.exports=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var h=t.getActiveAttrib(e,a),u=n(t,h.type);i[h.name]={type:u,size:r(u),location:t.getAttribLocation(e,h.name),pointer:s}}return i}},function(t,e){var i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(t){return i[t]}},function(t,e,i){var n=i(24),r=i(41);t.exports=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<s;o++){var a=t.getActiveUniform(e,o),h=a.name.replace(/\[.*?\]/,""),u=n(t,a.type);i[h]={type:u,size:a.size,location:t.getUniformLocation(e,h),value:r(u,a.size)}}return i}},function(t,e){var i=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};t.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},function(t,e){t.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},function(t,e){var i=function(t){var e=s.replace("%%",t);return new Function(e)},n=function(t,e){var i,n=o.replace(/%%/g,t);return(i=1===e.size?a[e.type]:h[e.type])&&(n+="\nthis.gl."+i+";"),new Function("value",n)},r=function(t,e){for(var i=e,n=0;n<t.length-1;n++){var r=i[t[n]]||{data:{}};i[t[n]]=r,i=r}return i},s=["return this.data.%%.value;"].join("\n"),o=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),a={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},h={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};t.exports=function(t,e){var s={data:{}};s.gl=t;for(var o=Object.keys(e),a=0;a<o.length;a++){var h=o[a],u=h.split("."),l=u[u.length-1],c=r(u,s),f=e[h];c.data[l]=f,c.gl=t,Object.defineProperty(c,l,{get:i(l),set:n(l,f)})}return s}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=n(i(6)),u=i(0),l=n(i(3)),c=n(i(46)),f=n(i(47)),d=n(i(25)),p=i(2),g=function(t){function e(){r(this,e);var i=s(this,t.call(this)),n=l.default.TRANSFORM_MODE===u.TRANSFORM_MODE.STATIC?c.default:f.default;return i.tempDisplayObjectParent=null,i.transform=new n,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new d.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return o(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new p.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new p.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},a(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(h.default);e.default=g,g.prototype.displayObjectUpdateTransform=g.prototype.updateTransform},function(t,e,i){var n,r,s;!function(i){var o=/iPhone/i,a=/iPod/i,h=/iPad/i,u=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,l=/Android/i,c=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,f=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,d=/Windows Phone/i,p=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,g=/BlackBerry/i,v=/BB10/i,_=/Opera Mini/i,m=/(CriOS|Chrome)(?=.*\bMobile\b)/i,y=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,b=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),x=function(t,e){return t.test(e)},w=function(t){var e=t||navigator.userAgent,i=e.split("[FBAN");if(void 0!==i[1]&&(e=i[0]),void 0!==(i=e.split("Twitter"))[1]&&(e=i[0]),this.apple={phone:x(o,e),ipod:x(a,e),tablet:!x(o,e)&&x(h,e),device:x(o,e)||x(a,e)||x(h,e)},this.amazon={phone:x(c,e),tablet:!x(c,e)&&x(f,e),device:x(c,e)||x(f,e)},this.android={phone:x(c,e)||x(u,e),tablet:!x(c,e)&&!x(u,e)&&(x(f,e)||x(l,e)),device:x(c,e)||x(f,e)||x(u,e)||x(l,e)},this.windows={phone:x(d,e),tablet:x(p,e),device:x(d,e)||x(p,e)},this.other={blackberry:x(g,e),blackberry10:x(v,e),opera:x(_,e),firefox:x(y,e),chrome:x(m,e),device:x(g,e)||x(v,e)||x(_,e)||x(y,e)||x(m,e)},this.seven_inch=x(b,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},T=function(){var t=new w;return t.Class=w,t};void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=w:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=T():(r=[],n=i.isMobile=T(),void 0!==(s="function"==typeof n?n.apply(e,r):n)&&(t.exports=s))}(this)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(2),h=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.position=new a.ObservablePoint(i.onChange,i,0,0),i.scale=new a.ObservablePoint(i.onChange,i,1,1),i.pivot=new a.ObservablePoint(i.onChange,i,0,0),i.skew=new a.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return s(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},o(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(i(26)).default);e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=i(2),h=function(t){function e(){n(this,e);var i=r(this,t.call(this));return i.position=new a.Point(0,0),i.scale=new a.Point(1,1),i.skew=new a.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new a.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return s(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},o(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(i(26)).default);e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(2),u=i(1),l=i(0),c=n(i(8)),f=n(i(7)),d=new h.Point,p=function(t){function e(i){r(this,e);var n=s(this,t.call(this));return n._anchor=new h.ObservablePoint(n._onAnchorUpdate,n),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=l.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=i||c.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return o(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,u.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,u.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,f=0,d=0,p=0,g=0;u?(f=(d=u.x-c._x*l.width)+u.width,p=(g=u.y-c._y*l.height)+u.height):(f=(d=-c._x*l.width)+l.width,p=(g=-c._y*l.height)+l.height),h[0]=i*d+r*g+o,h[1]=s*g+n*d+a,h[2]=i*f+r*g+o,h[3]=s*g+n*f+a,h[4]=i*f+r*p+o,h[5]=s*p+n*f+a,h[6]=i*d+r*p+o,h[7]=s*p+n*d+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,u=r.tx,l=r.ty,c=-n._x*i.width,f=c+i.width,d=-n._y*i.height,p=d+i.height;e[0]=s*c+a*d+u,e[1]=h*d+o*c+l,e[2]=s*f+a*d+u,e[3]=h*d+o*f+l,e[4]=s*f+a*p+u,e[5]=h*p+o*f+l,e[6]=s*c+a*p+u,e[7]=h*p+o*c+l},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,d);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return d.x>n&&d.x<n+e&&(r=-i*this.anchor.y,d.y>r&&d.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(c.default.from(t))},e.fromFrame=function(t){var i=u.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,n){return new e(c.default.fromImage(t,i,n))},a(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,u.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,u.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(f.default);e.default=p},function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&o.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}var s=i(107),o=i(109);e.parse=r,e.resolve=function(t,e){return r(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?r(t,!1,!0).resolveObject(e):e},e.format=function(t){return o.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)},e.Url=n;var a=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["<",">",'"',"`"," ","\r","\n","\t"],c=["{","}","|","\\","^","`"].concat(l),f=["'"].concat(c),d=["%","/","?",";","#"].concat(f),p=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,v=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=i(110);n.prototype.parse=function(t,e,i){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",h=t.split(r),l=/\\/g;h[0]=h[0].replace(l,"/");var c=t=h.join(r);if(c=c.trim(),!i&&1===t.split("#").length){var x=u.exec(c);if(x)return this.path=c,this.href=c,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(c);if(w){var T=(w=w[0]).toLowerCase();this.protocol=T,c=c.substr(w.length)}if(i||w||c.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===c.substr(0,2);!E||w&&m[w]||(c=c.substr(2),this.slashes=!0)}if(!m[w]&&(E||w&&!y[w])){for(var S=-1,C=0;C<p.length;C++)-1!==(M=c.indexOf(p[C]))&&(-1===S||M<S)&&(S=M);var P,O;-1!==(O=-1===S?c.lastIndexOf("@"):c.lastIndexOf("@",S))&&(P=c.slice(0,O),c=c.slice(O+1),this.auth=decodeURIComponent(P)),S=-1;for(C=0;C<d.length;C++){var M=c.indexOf(d[C]);-1!==M&&(-1===S||M<S)&&(S=M)}-1===S&&(S=c.length),this.host=c.slice(0,S),c=c.slice(S),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var I=this.hostname.split(/\./),C=0,k=I.length;C<k;C++){var R=I[C];if(R&&!R.match(g)){for(var L="",D=0,N=R.length;D<N;D++)R.charCodeAt(D)>127?L+="x":L+=R[D];if(!L.match(g)){var F=I.slice(0,C),j=I.slice(C+1),B=R.match(v);B&&(F.push(B[1]),j.unshift(B[2])),j.length&&(c="/"+j.join(".")+c),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=s.toASCII(this.hostname));var U=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+U,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==c[0]&&(c="/"+c))}if(!_[T])for(var C=0,k=f.length;C<k;C++){var V=f[C];if(-1!==c.indexOf(V)){var X=encodeURIComponent(V);X===V&&(X=escape(V)),c=c.split(V).join(X)}}var q=c.indexOf("#");-1!==q&&(this.hash=c.substr(q),c=c.slice(0,q));var G=c.indexOf("?");if(-1!==G?(this.search=c.substr(G),this.query=c.substr(G+1),e&&(this.query=b.parse(this.query)),c=c.slice(0,G)):e&&(this.search="",this.query={}),c&&(this.pathname=c),y[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",H=this.search||"";this.path=U+H}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=b.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+r+i+a+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(o.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),u=0;u<h.length;u++){var l=h[u];"protocol"!==l&&(i[l]=t[l])}return y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!y[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var d=c[f];i[d]=t[d]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(T=(t.pathname||"").split("/");T.length&&!(t.host=T.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==T[0]&&T.unshift(""),T.length<2&&T.unshift(""),i.pathname=T.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var p=i.pathname||"",g=i.search||"";i.path=p+g}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),_=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=_||v||i.host&&t.pathname,x=b,w=i.pathname&&i.pathname.split("/")||[],T=t.pathname&&t.pathname.split("/")||[],E=i.protocol&&!y[i.protocol];if(E&&(i.hostname="",i.port=null,i.host&&(""===w[0]?w[0]=i.host:w.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===T[0]?T[0]=t.host:T.unshift(t.host)),t.host=null),b=b&&(""===T[0]||""===w[0])),_)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,w=T;else if(T.length)w||(w=[]),w.pop(),w=w.concat(T),i.search=t.search,i.query=t.query;else if(!o.isNullOrUndefined(t.search))return E&&(i.hostname=i.host=w.shift(),(A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=A.shift(),i.host=i.hostname=A.shift())),i.search=t.search,i.query=t.query,o.isNull(i.pathname)&&o.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!w.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=w.slice(-1)[0],C=(i.host||t.host||w.length>1)&&("."===S||".."===S)||""===S,P=0,O=w.length;O>=0;O--)"."===(S=w[O])?w.splice(O,1):".."===S?(w.splice(O,1),P++):P&&(w.splice(O,1),P--);if(!b&&!x)for(;P--;P)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),C&&"/"!==w.join("/").substr(-1)&&w.push("");var M=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(E){i.hostname=i.host=M?"":w.length?w.shift():"";var A=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");A&&(i.auth=A.shift(),i.host=i.hostname=A.shift())}return(b=b||i.host&&w.length)&&!M&&w.unshift(""),w.length?i.pathname=w.join("/"):(i.pathname=null,i.path=null),o.isNull(i.pathname)&&o.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function(t){return t&&t.__esModule?t:{default:t}}(i(9)),u=i(1),l=i(28),c=i(0),f=function(t){function e(i,s){if(n(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var o=r(this,t.call(this,i,s));return o.width=i.videoWidth,o.height=i.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=!0,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),i.addEventListener("play",o._onPlayStart.bind(o)),i.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(i.addEventListener("canplay",o._onCanPlay),i.addEventListener("canplaythrough",o._onCanPlay)),o}return s(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(l.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(l.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&l.shared.remove(this.update,this),this.source&&this.source._pixiId&&(h.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),t.prototype.destroy.call(this)},e.fromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+(0,u.uid)());var n=u.BaseTextureCache[t._pixiId];return n||(n=new e(t,i),h.default.addToCache(n,t._pixiId)),n},e.fromUrl=function(t,i){var n=document.createElement("video");if(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),Array.isArray(t))for(var r=0;r<t.length;++r)n.appendChild(o(t[r].src||t[r],t[r].mime));else n.appendChild(o(t.src||t,t.mime));return n.load(),e.fromVideo(n,i)},a(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(l.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(l.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(h.default);e.default=f,f.fromUrls=f.fromUrl},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(34)),s=function(){function t(){n(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var n=e.width,s=e.height;if(i){var o=t.width/2/n,a=t.height/2/s,h=t.x/n+o,u=t.y/s+a;i=r.default.add(i,r.default.NW),this.x0=h+o*r.default.uX(i),this.y0=u+a*r.default.uY(i),i=r.default.add(i,2),this.x1=h+o*r.default.uX(i),this.y1=u+a*r.default.uY(i),i=r.default.add(i,2),this.x2=h+o*r.default.uX(i),this.y2=u+a*r.default.uY(i),i=r.default.add(i,2),this.x3=h+o*r.default.uX(i),this.y3=u+a*r.default.uY(i)}else this.x0=t.x/n,this.y0=t.y/s,this.x1=(t.x+t.width)/n,this.y1=t.y/s,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/s,this.x3=t.x/n,this.y3=(t.y+t.height)/s;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();e.default=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),u=i(2),l=i(0),c=n(i(3)),f=n(i(7)),d=n(i(29)),p=n(i(6)),g=new u.Matrix,v=function(t){function e(i,n,o,a){r(this,e);var d=s(this,t.call(this));return(0,h.sayHello)(i),"number"==typeof n&&(n=Object.assign({width:n,height:o||c.default.RENDER_OPTIONS.height},a)),n=Object.assign({},c.default.RENDER_OPTIONS,n),d.options=n,d.type=l.RENDERER_TYPE.UNKNOWN,d.screen=new u.Rectangle(0,0,n.width,n.height),d.view=n.view||document.createElement("canvas"),d.resolution=n.resolution||c.default.RESOLUTION,d.transparent=n.transparent,d.autoResize=n.autoResize||!1,d.blendModes=null,d.preserveDrawingBuffer=n.preserveDrawingBuffer,d.clearBeforeRender=n.clearBeforeRender,d.roundPixels=n.roundPixels,d._backgroundColor=0,d._backgroundColorRgba=[0,0,0,0],d._backgroundColorString="#000000",d.backgroundColor=n.backgroundColor||d._backgroundColor,d._tempDisplayObjectParent=new f.default,d._lastObjectRendered=d._tempDisplayObjectParent,d}return o(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i){var n=t.getLocalBounds(),r=d.default.create(0|n.width,0|n.height,e,i);return g.tx=-n.x,g.ty=-n.y,this.render(t,r,!1,g,!0),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=l.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},a(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,h.hex2string)(t),(0,h.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(p.default);e.default=v},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(9)),h=n(i(3)),u=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments[2],a=arguments[3];r(this,e);var u=s(this,t.call(this,null,o));return u.resolution=a||h.default.RESOLUTION,u.width=i,u.height=n,u.realWidth=u.width*u.resolution,u.realHeight=u.height*u.resolution,u.scaleMode=void 0!==o?o:h.default.SCALE_MODE,u.hasLoaded=!0,u._glRenderTargets={},u._canvasRenderTarget=null,u.valid=!1,u}return o(e,t),e.prototype.resize=function(t,e){t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(a.default);e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){return t&&t.__esModule?t:{default:t}}(i(3)),o=function(){function t(e,i,r){n(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||s.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},r(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=o},function(t,e,i){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}e.__esModule=!0,e.default=function(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var s=r.getImageData(2,0,1,1);if(!s)return!1;var o=s.data;return 255===o[0]&&0===o[1]&&0===o[2]}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(1),r={getTintedTexture:function(t,e){var i=t._texture,n="#"+("00000"+(0|(e=r.roundColor(e))).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[n])return i.tintCache[n];var s=r.canvas||document.createElement("canvas");if(r.tintMethod(i,e,s),r.convertTintToImage){var o=new Image;o.src=s.toDataURL(),i.tintCache[n]=o}else i.tintCache[n]=s,r.canvas=null;return s},tintWithMultiply:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithOverlay:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),s=t._frame.clone(),o=t.baseTexture.resolution;s.x*=o,s.y*=o,s.width*=o,s.height*=o,i.width=Math.ceil(s.width),i.height=Math.ceil(s.height),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var a=(0,n.hex2rgb)(e),h=a[0],u=a[1],l=a[2],c=r.getImageData(0,0,s.width,s.height),f=c.data,d=0;d<f.length;d+=4)f[d+0]*=h,f[d+1]*=u,f[d+2]*=l;r.putImageData(c,0,0)},roundColor:function(t){var e=r.cacheStepsPerColorChannel,i=(0,n.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,n.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,function(t){return t&&t.__esModule?t:{default:t}}(i(55)).default)(),tintMethod:0};r.tintMethod=r.canUseMultiply?r.tintWithMultiply:r.tintWithPerPixel,e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(t){return t&&t.__esModule?t:{default:t}}(i(58)),a=i(2),h=(i(30),function(t){function e(i){n(this,e);var s=new a.Matrix,o=r(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,o.maskSprite=i,o.maskMatrix=s,o}return s(e,t),e.prototype.apply=function(t,e,i){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,t.applyFilter(this,e,i)},e}(o.default));e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(i(120)),a=i(1),h=i(0),u=n(i(3)),l={},c=function(){function t(e,i,n){r(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.blendMode=h.BLEND_MODES.NORMAL,this.uniformData=n||(0,o.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var s in this.uniformData)this.uniforms[s]=this.uniformData[s].value;this.glShaders={},l[this.vertexSrc+this.fragmentSrc]||(l[this.vertexSrc+this.fragmentSrc]=(0,a.uid)()),this.glShaderKey=l[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=u.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},s(t,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(i(5)),o=n(i(60)),a=function(){function t(e,i){r(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,o.default)(1),this.vertexBuffer=s.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new s.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=6*t,i=new Uint16Array(e),n=0,r=0;n<e;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,i,r,s,o,a,h,u){n(this,t),this.lineWidth=e,this.nativeLines=h,this.lineColor=i,this.lineAlpha=r,this._lineTint=i,this.fillColor=s,this.fillAlpha=o,this._fillTint=s,this.fill=a,this.holes=[],this.shape=u,this.type=u.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=r},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n=e&&e.length,s=n?e[0]*i:t.length,a=r(t,0,s,i,!0),h=[];if(!a)return h;var u,l,f,d,p,g,v;if(n&&(a=c(t,e,a,i)),t.length>80*i){u=f=t[0],l=d=t[1];for(var _=i;_<s;_+=i)p=t[_],g=t[_+1],p<u&&(u=p),g<l&&(l=g),p>f&&(f=p),g>d&&(d=g);v=Math.max(f-u,d-l)}return o(a,h,i,u,l,v),h}function r(t,e,i,n,r){var s,o;if(r===I(t,e,i,n)>0)for(s=e;s<i;s+=n)o=O(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=O(s,t[s],t[s+1],o);return o&&w(o,o.next)&&(M(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!w(n,n.next)&&0!==x(n.prev,n,n.next))n=n.next;else{if(M(n),(n=e=n.prev)===n.next)return null;i=!0}}while(i||n!==e);return e}function o(t,e,i,n,r,c,f){if(t){!f&&c&&g(t,n,r,c);for(var d,p,v=t;t.prev!==t.next;)if(d=t.prev,p=t.next,c?h(t,n,r,c):a(t))e.push(d.i/i),e.push(t.i/i),e.push(p.i/i),M(t),t=p.next,v=p.next;else if((t=p)===v){f?1===f?o(t=u(t,e,i),e,i,n,r,c,2):2===f&&l(t,e,i,n,r,c):o(s(t),e,i,n,r,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(x(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(y(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&x(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,s=t,o=t.next;if(x(r,s,o)>=0)return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,u=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,l=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=_(a,h,e,i,n),f=_(u,l,e,i,n),d=t.nextZ;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=t.prevZ;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&y(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function u(t,e,i){var n=t;do{var r=n.prev,s=n.next.next;!w(r,s)&&T(r,n,n.next,s)&&S(r,s)&&S(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),M(n),M(n.next),n=t=s),n=n.next}while(n!==t);return n}function l(t,e,i,n,r,a){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&b(h,u)){var l=P(h,u);return h=s(h,h.next),l=s(l,l.next),o(h,e,i,n,r,a),void o(l,e,i,n,r,a)}u=u.next}h=h.next}while(h!==t)}function c(t,e,i,n){var o,a,h,u=[];for(o=0,a=e.length;o<a;o++)(h=r(t,e[o]*n,o<a-1?e[o+1]*n:t.length,n,!1))===h.next&&(h.steiner=!0),u.push(m(h));for(u.sort(f),o=0;o<u.length;o++)d(u[o],i),i=s(i,i.next);return i}function f(t,e){return t.x-e.x}function d(t,e){if(e=p(t,e)){var i=P(e,t);s(i,i.next)}}function p(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i.prev;var h,u=i,l=i.x,c=i.y,f=1/0;for(n=i.next;n!==u;)r>=n.x&&n.x>=l&&y(s<c?r:o,s,l,c,s<c?o:r,s,n.x,n.y)&&((h=Math.abs(s-n.y)/(r-n.x))<f||h===f&&n.x>i.x)&&S(n,t)&&(i=n,f=h),n=n.next;return i}function g(t,e,i,n){var r=t;do{null===r.z&&(r.z=_(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,v(r)}function v(t){var e,i,n,r,s,o,a,h,u=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<u&&(a++,n=n.nextZ);e++);for(h=u;a>0||h>0&&n;)0===a?(r=n,n=n.nextZ,h--):0!==h&&n?i.z<=n.z?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--):(r=i,i=i.nextZ,a--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,u*=2}while(o>1);return t}function _(t,e,i,n,r){return t=32767*(t-i)/r,e=32767*(e-n)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function m(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function y(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!E(t,e)&&S(t,e)&&S(e,t)&&C(t,e)}function x(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function w(t,e){return t.x===e.x&&t.y===e.y}function T(t,e,i,n){return!!(w(t,e)&&w(i,n)||w(t,n)&&w(i,e))||x(t,e,i)>0!=x(t,e,n)>0&&x(i,n,t)>0!=x(i,n,e)>0}function E(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&T(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function S(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function C(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}function P(t,e){var i=new A(t.i,t.x,t.y),n=new A(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function O(t,e,i,n){var r=new A(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}t.exports=n,n.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(I(t,0,s,i));if(r)for(var a=0,h=e.length;a<h;a++){var u=e[a]*i,l=a<h-1?e[a+1]*i:t.length;o-=Math.abs(I(t,u,l,i))}var c=0;for(a=0;a<n.length;a+=3){var f=n[a]*i,d=n[a+1]*i,p=n[a+2]*i;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(64),a=n(i(7)),h=i(28),u=n(i(3)),l=i(0),c=function(){function t(e,i,n,s,l){r(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||u.default.RENDER_OPTIONS.height,forceCanvas:!!s,sharedTicker:!!l},n)),this._options=e=Object.assign({sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,o.autoDetectRenderer)(e),this.stage=new a.default,this._ticker=null,this.ticker=e.sharedTicker?h.shared:new h.Ticker,this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t){var e=this._ticker;this.ticker=null,e.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},s(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,l.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.autoDetectRenderer=function(t,e,i,n){var a=t&&t.forceCanvas;return void 0!==n&&(a=n),!a&&r.isWebGLSupported()?new o.default(t,e,i):new s.default(t,e,i)};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=n(i(10)),o=n(i(14))},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),o=function(){function t(){n(this,t),this.global=new s.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype._copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=t.buttons,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype._reset=function(){this.isPrimary=!1},r(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();e.default=o},function(t,e,i){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),u=n(i(68)),l=n(i(69)),c=n(i(70)),f=function(t){function e(i,n,o,a){r(this,e),a=a||5;var c=(0,u.default)(a,!0),f=(0,l.default)(a),d=s(this,t.call(this,c,f));return d.resolution=o||h.settings.RESOLUTION,d._quality=0,d.quality=n||4,d.strength=i||8,d.firstRun=!0,d}return o(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,s=(0,c.default)(r);this.vertexSrc=(0,u.default)(s,!0),this.fragmentSrc=(0,l.default)(s),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var o=t.getRenderTarget(!0),a=e,h=o,f=0;f<this.passes-1;f++){t.applyFilter(this,a,h,!0);var d=h;h=a,a=d}t.applyFilter(this,a,i,n),t.returnRenderTarget(o)}},a(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(h.Filter);e.default=f},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=Math.ceil(t/2),r=n,s="",o=void 0;o=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var h=o.replace("%index%",a);s+=h=h.replace("%sampleIndex%",a-(i-1)+".0"),s+="\n"}return r=r.replace("%blur%",s),r=r.replace("%size%",t)};var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=n[t],i=e.length,s=r,o="",a=void 0,h=0;h<t;h++){var u="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",h);a=h,h>=i&&(a=t-h-1),o+=u=u.replace("%value%",e[a]),o+="\n"}return s=s.replace("%blur%",o),s=s.replace("%size%",t)};var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},r=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;i>e;)i-=2;return i}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),u=n(i(68)),l=n(i(69)),c=n(i(70)),f=function(t){function e(i,n,o,a){r(this,e),a=a||5;var c=(0,u.default)(a,!1),f=(0,l.default)(a),d=s(this,t.call(this,c,f));return d.resolution=o||h.settings.RESOLUTION,d._quality=0,d.quality=n||4,d.strength=i||8,d.firstRun=!0,d}return o(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,s=(0,c.default)(r);this.vertexSrc=(0,u.default)(s,!1),this.fragmentSrc=(0,l.default)(s),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var o=t.getRenderTarget(!0),a=e,h=o,f=0;f<this.passes-1;f++){t.applyFilter(this,a,h,!0);var d=h;h=a,a=d}t.applyFilter(this,a,i,n),t.returnRenderTarget(o)}},a(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(h.Filter);e.default=f},function(t,e,i){"use strict";function n(t,e){return t.isDataUrl?t.data.meta.image:s.default.resolve(t.url.replace(e,""),t.data.meta.image)}e.__esModule=!0,e.default=function(){return function(t,e){var i=t.name+"_image";if(t.data&&t.type===r.Resource.TYPE.JSON&&t.data.frames&&!this.resources[i]){var s={crossOrigin:t.crossOrigin,loadType:r.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t},a=n(t,this.baseUrl);this.add(i,a,s,function(i){var n=new o.Spritesheet(i.texture.baseTexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})})}else e()}},e.getResourcePath=n;var r=i(18),s=function(t){return t&&t.__esModule?t:{default:t}}(i(49)),o=i(4)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i,r){void 0===i&&(i=!1),n(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return s(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),a=function(){function t(){n(this,t),this._head=this._tail=void 0}return s(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return r(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return r(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e.default=a,t.exports=e.default},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},s=14;s--;)r[i.key[s]]=n[s]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(t,e,n){e&&(r[i.q.name][e]=n)}),r}},function(t,e,i){"use strict";function n(){}function r(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}e.__esModule=!0,e.eachSeries=function(t,e,i,n){var r=0,s=t.length;!function o(a){a||r===s?i&&i(a):n?setTimeout(function(){e(t[r++],o)},1):e(t[r++],o)}()},e.queue=function(t,e){function i(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())setTimeout(function(){return a.drain()},1);else{var r={data:t,callback:"function"==typeof i?i:n};e?a._tasks.unshift(r):a._tasks.push(r),setTimeout(function(){return a.process()},1)}}function s(t){return function(){o-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),o<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var o=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){o=0,a.drain=n,a.started=!1,a._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){for(;!a.paused&&o<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),(o+=1)===a.concurrency&&a.saturated(),t(e.data,r(s(e)))}},length:function(){return a._tasks.length},running:function(){return o},idle:function(){return a._tasks.length+o===0},pause:function(){!0!==a.paused&&(a.paused=!0)},resume:function(){if(!1!==a.paused){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}},function(t,e,i){"use strict";e.__esModule=!0,e.encodeBinary=function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],s=[0,0,0,0],o=0;o<r.length;++o)i<t.length?r[o]=255&t.charCodeAt(i++):r[o]=0;switch(s[0]=r[0]>>2,s[1]=(3&r[0])<<4|r[1]>>4,s[2]=(15&r[1])<<2|r[2]>>6,s[3]=63&r[2],i-(t.length-1)){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64}for(var a=0;a<s.length;++a)e+=n.charAt(s[a])}return e};var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=r.default.fromLoader(t.data,t.url,t.name)),e()}};var n=i(18),r=function(t){return t&&t.__esModule?t:{default:t}}(i(8))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(i(159)),o=n(i(170)),a=function(){function t(e,i,n){r(this,t),this.size=i||300,this.renderer=e.renderer,this.isReady=!1,this.layers={},this.textureContainer=null,this.resultTexture=null,this.init(n)}return t.prototype.init=function(t){var e=this;PIXI.loader.add("spritesheet","/assets/layers/layers.json").load(function(i,n){e.prepareLayers(n.spritesheet),e.setupResultTexture(),e.isReady=!0,"function"==typeof t&&t()})},t.prototype.isCanvas=function(){return this.renderer instanceof PIXI.CanvasRenderer},t.prototype.prepareLayers=function(t){var e=t.textures,i=t.data.frames,n=this.isCanvas()?s.default:o.default,r=2*Math.PI/i.length,a=0;for(var h in e){var u=i[parseInt(h)].filename.toLowerCase(),l=u.startsWith("background"),c=new n(e[h],this.size,this.renderer);l?(c.color=10066329,c.alpha=100):c.alpha=50,c.initRotation=a,this.layers[u]=c,a+=r}},t.prototype.setupResultTexture=function(){var t=Object.keys(this.layers);t.sort(function(t,e){return t.startsWith("background")?-1:e.startsWith("background")?1:0}),this.textureContainer=new PIXI.Container;for(var e=0;e<t.length;e++){var i=this.layers[t[e]].getLayer();this.textureContainer.addChild(i)}var n=new PIXI.BaseRenderTexture(this.size,this.size,PIXI.SCALE_MODES.LINEAR,1);this.resultTexture=new PIXI.RenderTexture(n),this.renderer.render(this.textureContainer,this.resultTexture)},t.prototype.update=function(t,e){for(var i in this.layers)this.layers[i].update(t,e);this.renderer.render(this.textureContainer,this.resultTexture)},t.prototype.get=function(){return this.resultTexture},t.prototype.getState=function(){var t={};for(var e in this.layers){var i=this.layers[e];t[e]=i.getState()}return t},t.prototype.setState=function(t){if(t)for(var e in this.layers){var i=t[e];i&&this.layers[e].setState(i)}},t.prototype.transitTo=function(t,e,i,n){if(t)for(var r in this.layers){var s=t[r];s&&this.layers[r].transitTo(s,e,i,n)}},t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){return t?100*Math.PI/(3*t):0}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=n(i(20)),h=n(i(33)),u=n(i(80)),l=function(){function t(e,i){r(this,t),this.source=new PIXI.Sprite(e),this._speed=0,this._pivot=null,this.setupPivot(i),this.setup(i)}return t.prototype.setupPivot=function(t){var e=t/2;this._pivot=new h.default({x:e,y:e},e)},t.prototype.setup=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.source.x=t/2,this.source.y=t/2,this.source.width=t,this.source.height=t,this.source.anchor.set(.5),this.source.scale.x*=e,this.source.scale.y*=e,this.originScale={x:this.source.scale.x,y:this.source.scale.y},this.tintColor=new u.default(this.source.tint),this._initRotation=this.source.rotation},t.prototype.update=function(t,e){if(this._makeTransition(t,e),this._updatePivot(t),t&&this.speed){var i=t*this.speed;this._rotate(i)}},t.prototype.getLayer=function(){return this.source},t.prototype.getState=function(){return{alpha:this.alpha,color:this.color.toString(),blur:this.blur,scale:this.scale,initRotation:this.initRotation,speed:this.speed,pivot:this._pivot.getState()}},t.prototype.setState=function(t){t&&(this._pivot.setState(t.pivot),this.alpha=t.alpha,this.color=t.color,this.blur=t.blur,this.scale=t.scale,this.initRotation=t.initRotation,this.speed=t.speed)},t.prototype.transitTo=function(t,e,i,n){if(t){"function"==typeof this.pivot.transitTo&&this.pivot.transitTo(t.pivot,e,i);var r=new a.default(this,e,i,n);for(var s in t)if("pivot"!==s)if("color"===s){var o=new u.default(t.color).toRgb();r.tween("colorRGB",o)}else"initRotation"===s?r.tweenRotation(s,t[s]):r.tween(s,t[s])}},t.prototype._makeTransition=function(t){this.__transition&&this.__transition.tick(t)},t.prototype._rotate=function(t){var e=this.source.rotation+t;this.source.rotation=e},t.prototype._updatePivot=function(t){this._pivot.update(t),this.source.x=this._pivot.x,this.source.y=this._pivot.y},t.prototype.applyTint=function(){},o(t,[{key:"alpha",get:function(){return 100*this.source.alpha},set:function(t){this.source.alpha=t/100}},{key:"initRotation",get:function(){return this._initRotation},set:function(t){var e=t||0,i=e-this._initRotation;this._rotate(i),this._initRotation=e}},{key:"scale",get:function(){return this.source.scale.x/this.originScale.x},set:function(t){var e=t;this.source.scale={x:this.originScale.x*e,y:this.originScale.y*e}}},{key:"color",get:function(){return this.tintColor},set:function(t){this.tintColor=t instanceof u.default?t:new u.default(t),this.applyTint()}},{key:"colorRGB",get:function(){return this.tintColor.toRgb()},set:function(t){this.tintColor=u.default.fromRgb(t),this.applyTint()}},{key:"colorHSV",get:function(){return this.tintColor.toHsv()},set:function(t){this.tintColor=u.default.fromHsv(t),this.applyTint()}},{key:"pivot",get:function(){return this._pivot}},{key:"speed",get:function(){return this._speed},set:function(t){this._speed=t||0}},{key:"pace",get:function(){return s(this._speed)},set:function(t){this._speed=s(t)}},{key:"blur",get:function(){return 0},set:function(t){}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return{r:t>>16&255,g:t>>8&255,b:255&t}}function s(t){var e=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),n=i-e,r={h:0,s:0,v:i/255};return 0!==i&&(r.s=n/i,t.r===i?r.h=(t.g-t.b)/n:t.g===i?r.h=2+(t.b-t.r)/n:t.b===i&&(r.h=4+(t.r-t.g)/n),r.h*=60,r.h<0&&(r.h+=360)),r}function o(t){var e=255*t.v,i={r:e,g:e,b:e};if(0===t.s)return i;var n=t.h,r=t.s;n<0?n+=360:t.h>=360&&(n-=360),n/=60;var s=Math.floor(n),o=n-s,a=e*(1-r),h=e*(1-r*o),u=e*(1-r*(1-o));switch(s){case 0:i.r=e,i.g=u,i.b=a;break;case 1:i.r=h,i.g=e,i.b=a;break;case 2:i.r=a,i.g=e,i.b=u;break;case 3:i.r=a,i.g=h,i.b=e;break;case 4:i.r=u,i.g=a,i.b=e;break;case 5:i.r=e,i.g=a,i.b=h}return i}function a(t){return(t.r<<16)+(t.g<<8)+t.b}e.__esModule=!0;var h=function(){function t(e){n(this,t),"string"==typeof e&&"#"===e[0]&&(e=parseInt(e.substr(1),16)),this.color=e||16777215,this.rgb=null,this.hsl=null}return t.prototype.toRgb=function(){return this.rgb?this.rgb:(this.rgb=r(this.color),this.rgb)},t.prototype.toHsv=function(){return this.hsl?this.hsl:(this.rgb||(this.rgb=r(this.color)),this.hsl=s(this.rgb),this.hsl)},t.prototype.toHex=function(){return this.color},t.fromHsv=function(e){var i=o(e),n=new t(a(i));return n.hsl=e,n.rgb=i,n},t.fromRgb=function(e){var i=new t(a(e));return i.rgb=e,i},t.prototype.toString=function(){return"#"+this.color.toString(16)},t}();e.default=h},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=i(171),o=n(i(176)),a=(n(i(183)),new Float32Array([0,0,11.11,0,22.22,0,33.33,0,44.44,0,55.56,0,66.67,0,77.78,0,88.89,0,100,0,0,11.11,11.11,11.11,22.22,11.11,33.33,11.11,44.44,11.11,55.56,11.11,66.67,11.11,77.78,11.11,88.89,11.11,100,11.11,0,22.22,11.11,22.22,22.22,22.22,33.33,22.22,44.44,22.22,55.56,22.22,66.67,22.22,77.78,22.22,88.89,22.22,100,22.22,0,33.33,11.11,33.33,22.22,33.33,33.33,33.33,44.44,33.33,55.56,33.33,66.67,33.33,77.78,33.33,88.89,33.33,100,33.33,0,44.44,11.11,44.44,22.22,44.44,33.33,44.44,44.44,44.44,55.56,44.44,66.67,44.44,77.78,44.44,88.89,44.44,100,44.44,0,55.56,11.11,55.56,22.22,55.56,33.33,55.56,44.44,55.56,55.56,55.56,66.67,55.56,77.78,55.56,88.89,55.56,100,55.56,0,66.67,11.11,66.67,22.22,66.67,33.33,66.67,44.44,66.67,55.56,66.67,66.67,66.67,77.78,66.67,88.89,66.67,100,66.67,0,77.78,11.11,77.78,22.22,77.78,33.33,77.78,44.44,77.78,55.56,77.78,66.67,77.78,77.78,77.78,88.89,77.78,100,77.78,0,88.89,11.11,88.89,22.22,88.89,33.33,88.89,44.44,88.89,55.56,88.89,66.67,88.89,77.78,88.89,88.89,88.89,100,88.89,0,100,11.11,100,22.22,100,33.33,100,44.44,100,55.56,100,66.67,100,77.78,100,88.89,100,100,100])),h=a.slice().map(function(t){return t/100}),u=new Uint16Array([0,1,10,1,11,10,1,2,11,2,12,11,2,3,12,3,13,12,3,4,13,4,14,13,4,5,14,5,15,14,5,6,15,6,16,15,6,7,16,7,17,16,7,8,17,8,18,17,8,9,18,9,19,18,10,11,20,11,21,20,11,12,21,12,22,21,12,13,22,13,23,22,13,14,23,14,24,23,14,15,24,15,25,24,15,16,25,16,26,25,16,17,26,17,27,26,17,18,27,18,28,27,18,19,28,19,29,28,20,21,30,21,31,30,21,22,31,22,32,31,22,23,32,23,33,32,23,24,33,24,34,33,24,25,34,25,35,34,25,26,35,26,36,35,26,27,36,27,37,36,27,28,37,28,38,37,28,29,38,29,39,38,30,31,40,31,41,40,31,32,41,32,42,41,32,33,42,33,43,42,33,34,43,34,44,43,34,35,44,35,45,44,35,36,45,36,46,45,36,37,46,37,47,46,37,38,47,38,48,47,38,39,48,39,49,48,40,41,50,41,51,50,41,42,51,42,52,51,42,43,52,43,53,52,43,44,53,44,54,53,44,45,54,45,55,54,45,46,55,46,56,55,46,47,56,47,57,56,47,48,57,48,58,57,48,49,58,49,59,58,50,51,60,51,61,60,51,52,61,52,62,61,52,53,62,53,63,62,53,54,63,54,64,63,54,55,64,55,65,64,55,56,65,56,66,65,56,57,66,57,67,66,57,58,67,58,68,67,58,59,68,59,69,68,60,61,70,61,71,70,61,62,71,62,72,71,62,63,72,63,73,72,63,64,73,64,74,73,64,65,74,65,75,74,65,66,75,66,76,75,66,67,76,67,77,76,67,68,77,68,78,77,68,69,78,69,79,78,70,71,80,71,81,80,71,72,81,72,82,81,72,73,82,73,83,82,73,74,83,74,84,83,74,75,84,75,85,84,75,76,85,76,86,85,76,77,86,77,87,86,77,78,87,78,88,87,78,79,88,79,89,88,80,81,90,81,91,90,81,82,91,82,92,91,82,83,92,83,93,92,83,84,93,84,94,93,84,85,94,85,95,94,85,86,95,86,96,95,86,87,96,87,97,96,87,88,97,88,98,97,88,89,98,89,99,98]),l=function(){function t(e,i,n){r(this,t),this.isCanvas=i.renderer instanceof PIXI.CanvasRenderer,this.container=new PIXI.Container,this.mesh=null,this.texture=null,this.background=null,this.hitArea=null,this.init(e,i,n),this.state={isHover:!1,isDragged:!1}}return t.prototype.getBackground=function(){return this.background},t.prototype.getMesh=function(){return this.mesh},t.prototype.getShape=function(){return this.shape},t.prototype.init=function(t,e,i){this.texture=t,this.setupMesh(e,t.get(),i),this.setupBackground(),this.setupInteractions(),this.appendToView(e),this.setupShape(e),this.movement=new s.MeshMovement(this.mesh)},t.prototype.update=function(t){this.texture.update(t),this.shape.update(t),this.movement.update(t)},t.prototype.reset=function(){this.mesh.vertices=a.slice(),this.movement.reset(a)},t.prototype.setupShape=function(t){this.shape=new o.default(this.mesh,t)},t.prototype.setupMesh=function(t,e,i){this.mesh=new PIXI.mesh.Mesh(e,a.slice(),h.slice(),u.slice(),1),i&&(this.mesh.width=i,this.mesh.height=i)},t.prototype.setupBackground=function(){this.isCanvas&&(this.background=new PIXI.Sprite(this.mesh.texture),this.background.height=this.mesh.height,this.background.width=this.mesh.width,this.background.anchor.set(.5),this.background.x=this.mesh.x+this.mesh.width/2,this.background.y=this.mesh.y+this.mesh.height/2)},t.prototype.setupInteractions=function(){var t=.38*this.mesh.height;this.hitArea=new PIXI.Graphics,this.hitArea.x=this.mesh.x+this.mesh.width/2,this.hitArea.y=this.mesh.y+this.mesh.height/2,this.hitArea.lineStyle(0),this.hitArea.beginFill(16777215,0),this.hitArea.drawCircle(0,0,t),this.hitArea.interactive=!0,this.hitArea.buttonMode=!0;var e=this;this.hitArea.on("pointerdown",function(t){e.startDrag()}).on("pointerup",function(t){e.stopDrag()}).on("pointerover",function(t){e.startHover()}).on("pointerout",function(t){e.stopHover(),e.stopDrag()})},t.prototype.startDrag=function(){},t.prototype.stopDrag=function(){},t.prototype.startHover=function(){},t.prototype.stopHover=function(){},t.prototype.appendToView=function(t){this.isCanvas&&this.container.addChild(this.background),this.container.addChild(this.mesh),this.container.addChild(this.hitArea),t.stage.addChild(this.container)},t.prototype.getState=function(){return{mesh:this.movement.getState(),shape:this.shape.getState(),texture:this.texture.getState()}},t.prototype.setState=function(t){t&&(this.shape.setState(t.shape),this.texture.setState(t.texture),this.movement.setState(t.mesh))},t.prototype.transitTo=function(t,e,i,n){t&&(this.shape.transitTo(t.shape,e,i,n),this.texture.transitTo(t.texture,e,i,n),this.movement.transitTo(t.mesh,e,i,n))},t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(i(33)),o=n(i(177)),a={total:5,offsetCoeff:.3,bubbleMinCoeff:.2,bubbleDeltaCoeff:.1,bubblePosCoeff:1.2,moveOffsetCoeff:1.4,shapeProximity:.75,movementCoeff:1.25},h=function(){function t(e,i){r(this,t),this.mesh=e,this.bubbles=[],this.smoothThreshold=250,this.prepareMaskTexture(),this.generateBubbles(),this.prepareMetaballizer(),this.setup(i)}return t.prototype.prepareMaskTexture=function(){this.height=this.mesh.height,this.width=this.mesh.width,this.height*=a.movementCoeff,this.width*=a.movementCoeff;var t=document.createElement("canvas");t.height=this.height,t.width=this.width,this.maskContext=t.getContext("2d"),this.maskTexture=PIXI.Texture.fromCanvas(t)},t.prototype.generateBubbles=function(){this.bubbles=[];var t=new s.default({x:this.mesh.width/2,y:this.mesh.height/2}),e=(Math.min(t.x,t.y)+2)*(1-a.offsetCoeff),i=new o.default(t,e);this.bubbles.push(i);for(var n=0;n<a.total;n++){var r=o.default.getRandom(t,e);this.bubbles.push(r)}},t.prototype.prepareMetaballizer=function(){},t.prototype.setup=function(t){this.metaballize(),this.maskTexture.update(),this.appendMask(t)},t.prototype.getOutlineBubbles=function(){return this.bubbles?this.bubbles.slice(1):[]},t.prototype.getBaseShape=function(){return this.bubbles&&this.bubbles.length?this.bubbles[0]:null},t.prototype.getBaseShapeSize=function(){var t=2-this.smoothThreshold/255;return(1-a.offsetCoeff)*t},t.prototype.reset=function(t){this.generateBubbles(),this.cleanupMask(),this.setup(t)},t.prototype.show=function(){this.isApplied=!0},t.prototype.hide=function(){this.isApplied=!1,this.setupEmptyMask(),this.refreshMask()},t.prototype.appendMask=function(t){this.isApplied=!0},t.prototype.refreshMask=function(){},t.prototype._createMask=function(t){var e=new PIXI.Sprite(this.maskTexture);return t.stage.addChild(e),e},t.prototype.changeDeformer=function(t,e){for(var i=1;i<this.bubbles.length;i++){var n=t.min+Math.random()*t.range,r=e.min+Math.random()*e.range;this.bubbles[i].changeMovement({range:n,speed:r})}},t.prototype.removeDeformer=function(){for(var t=1;t<this.bubbles.length;t++)this.bubbles[t].hideSlowly()},t.prototype.setRotation=function(t){for(var e=1;e<this.bubbles.length;e++)this.bubbles[e].setRotation(t)},t.prototype.addModifiers=function(t,e){for(var i=1;i<this.bubbles.length;i++)this.bubbles[i].addModifiers(t,e)},t.prototype.removeModifiers=function(){for(var t=1;t<this.bubbles.length;t++)this.bubbles[t].removeModifiers()},t.prototype.update=function(t){if(this.isApplied){this.cleanupMask();for(var e=0;e<this.bubbles.length;e++)this.bubbles[e].update(2*t);this.metaballize(),this.refreshMask()}},t.prototype.cleanupMask=function(){this.maskContext.clearRect(0,0,this.width,this.height)},t.prototype.setupEmptyMask=function(){this.fillStyle=this.noMaskColor,this.maskContext.fillRect(0,0,this.width,this.height)},t.prototype.metaballize=function(){this.metaballizer.render()},t.prototype.getState=function(){for(var t={mainSize:this.getBaseShape().size,bubbles:[]},e=this.getOutlineBubbles(),i=0;i<e.length;i++)t.bubbles.push(e[i].getState());return t},t.prototype.setState=function(t){t&&(this.getBaseShape().size=t.mainSize||0,this.getOutlineBubbles().forEach(function(e,i){var n=t.bubbles[i];e.setState(n)}))},t.prototype.transitTo=function(t,e,i,n){t&&(this.getBaseShape().transitTo({size:t.mainSize},e,i,n),this.getOutlineBubbles().forEach(function(r,s){var o=t.bubbles[s];r.transitTo(o,e,i,n)}))},t}();e.default=h},function(t,e,i){t.exports=i(84)},function(t,e,i){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.Logo=e.LogoMesh=e.LogoTexture=void 0,i(85),i(19);var r=n(i(78)),s=n(i(81)),o=n(i(186));e.LogoTexture=r.default,e.LogoMesh=s.default,e.Logo=o.default,t.SHLogo=e}).call(e,i(12))},function(t,e,i){"use strict";(function(t){function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}e.__esModule=!0,e.loader=e.mesh=e.loaders=e.filters=e.interaction=void 0;var r=i(86);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var s=i(4);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})});var o=n(i(145)),a=n(i(149)),h=n(i(151)),u=n(i(155));s.utils.mixins.performMixins();var l=h.shared||null;e.interaction=o,e.filters=a,e.loaders=h,e.mesh=u,e.loader=l,t.PIXI=e}).call(e,i(12))},function(t,e,i){"use strict";i(87),i(89),i(90),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,i){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(i(88));Object.assign||(Object.assign=n.default)},function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,h=n(t),u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var l in i)s.call(i,l)&&(h[l]=i[l]);if(r){a=r(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(h[a[c]]=i[a[c]])}}return h}},function(t,e,i){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r){var s=n[r];t.requestAnimationFrame=t[s+"RequestAnimationFrame"],t.cancelAnimationFrame=t[s+"CancelAnimationFrame"]||t[s+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(e,i(12))},function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._x=r,this._y=s,this.cb=e,this.scope=i}return t.prototype.set=function(t,e){var i=t||0,n=e||(0!==e?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(23)),s=i(0),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,t),this.x=e,this.y=i,this.radius=r,this.type=s.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return n*=n,r*=r,n+r<=i},t.prototype.getBounds=function(){return new r.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(23)),s=i(0),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this.x=e,this.y=i,this.width=r,this.height=o,this.type=s.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,i+n<=1},t.prototype.getBounds=function(){return new r.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(21)),s=i(0),o=function(){function t(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];if(n(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof r.default){for(var a=[],h=0,u=i.length;h<u;h++)a.push(i[h].x,i[h].y);i=a}this.closed=!0,this.points=i,this.type=s.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;r<n;s=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*s],u=this.points[2*s+1];a>e!=u>e&&t<(e-a)/(u-a)*(h-o)+o&&(i=!i)}return i},t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(0),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,t),this.x=e,this.y=i,this.width=s,this.height=o,this.radius=a,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(n=e-(this.y+this.height-this.radius),i*i+n*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}();e.default=s},function(t,e){t.exports=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i}},function(t,e){var i=new ArrayBuffer(0),n=function(t,e,n,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=i,n&&this.upload(n),this._updateID=0};n.prototype.upload=function(t,e,i){i||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},n.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},n.createVertexBuffer=function(t,e,i){return new n(t,t.ARRAY_BUFFER,e,i)},n.createIndexBuffer=function(t,e,i){return new n(t,t.ELEMENT_ARRAY_BUFFER,e,i)},n.create=function(t,e,i,r){return new n(t,e,i,r)},n.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=n},function(t,e,i){var n=i(36),r=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,i,n){this.bind();var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,i,s){var o=n.fromData(t,null,e,i);o.enableNearestScaling(),o.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(o),a.unbind(),a},r.createFloat32=function(t,e,i,s){var o=new n.fromData(t,s,e,i);o.enableNearestScaling(),o.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(o),a.unbind(),a},t.exports=r},function(t,e,i){var n=i(37),r=i(38),s=i(40),o=i(42),a=i(43),h=function(t,e,i,h,u){this.gl=t,h&&(e=o(e,h),i=o(i,h)),this.program=n(t,e,i,u),this.attributes=r(t,this.program),this.uniformData=s(t,this.program),this.uniforms=a(t,this.uniformData)};h.prototype.bind=function(){this.gl.useProgram(this.program)},h.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=h},function(t,e,i){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=i(35);n.prototype.constructor=n,t.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,n,r,s){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:s||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(i||0)):n.drawArrays(t,i,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e,i){t.exports={compileProgram:i(37),defaultValue:i(41),extractAttributes:i(38),extractUniforms:i(40),generateUniformAccessObject:i(43),setPrecision:i(42),mapSize:i(39),mapType:i(24)}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){return n.default.tablet||n.default.phone?4:t};var n=function(t){return t&&t.__esModule?t:{default:t}}(i(45))},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},function(t,e,i){"use strict";function n(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.__esModule=!0,e.default={mixin:function(t){n(t)}}},function(t,e,i){"use strict";function n(t,e){if(t&&e)for(var i=Object.keys(e),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}}e.__esModule=!0,e.mixin=n,e.delayMixin=function(t,e){r.push(t,e)},e.performMixins=function(){for(var t=0;t<r.length;t+=2)n(r[t],r[t+1]);r.length=0};var r=[]},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,r||(r=document.createElement("a")),r.href=t;var i=!(t=n.default.parse(r.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"};var n=function(t){return t&&t.__esModule?t:{default:t}}(i(49)),r=void 0},function(t,e,i){(function(t,n){var r;!function(s){function o(t){throw new RangeError(A[t])}function a(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function h(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+a((t=t.replace(M,".")).split("."),e).join(".")}function u(t){for(var e,i,n=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function l(t){return a(t,function(t){var e="";return t>65535&&(e+=R((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=R(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:y}function f(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function d(t,e,i){var n=0;for(t=i?k(t/T):t>>1,t+=k(t/e);t>I*x>>1;n+=y)t=k(t/I);return k(n+(I+1)*t/(t+w))}function p(t){var e,i,n,r,s,a,h,u,f,p,g=[],v=t.length,_=0,w=S,T=E;for((i=t.lastIndexOf(C))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&o("not-basic"),g.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<v;){for(s=_,a=1,h=y;r>=v&&o("invalid-input"),((u=c(t.charCodeAt(r++)))>=y||u>k((m-_)/a))&&o("overflow"),_+=u*a,f=h<=T?b:h>=T+x?x:h-T,!(u<f);h+=y)a>k(m/(p=y-f))&&o("overflow"),a*=p;T=d(_-s,e=g.length+1,0==s),k(_/e)>m-w&&o("overflow"),w+=k(_/e),_%=e,g.splice(_++,0,w)}return l(g)}function g(t){var e,i,n,r,s,a,h,l,c,p,g,v,_,w,T,P=[];for(v=(t=u(t)).length,e=S,i=0,s=E,a=0;a<v;++a)(g=t[a])<128&&P.push(R(g));for(n=r=P.length,r&&P.push(C);n<v;){for(h=m,a=0;a<v;++a)(g=t[a])>=e&&g<h&&(h=g);for(h-e>k((m-i)/(_=n+1))&&o("overflow"),i+=(h-e)*_,e=h,a=0;a<v;++a)if((g=t[a])<e&&++i>m&&o("overflow"),g==e){for(l=i,c=y;p=c<=s?b:c>=s+x?x:c-s,!(l<p);c+=y)T=l-p,w=y-p,P.push(R(f(p+T%w,0))),l=k(T/w);P.push(R(f(l,0))),s=d(i,_,n==r),i=0,++n}++i,++e}return P.join("")}"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var v="object"==typeof n&&n;var _,m=2147483647,y=36,b=1,x=26,w=38,T=700,E=72,S=128,C="-",P=/^xn--/,O=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=y-b,k=Math.floor,R=String.fromCharCode;_={version:"1.4.1",ucs2:{decode:u,encode:l},decode:p,encode:g,toASCII:function(t){return h(t,function(t){return O.test(t)?"xn--"+g(t):t})},toUnicode:function(t){return h(t,function(t){return P.test(t)?p(t.slice(4).toLowerCase()):t})}},void 0!==(r=function(){return _}.call(e,i,e,t))&&(t.exports=r)}()}).call(e,i(108)(t),i(12))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(111),e.encode=e.stringify=i(112)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var l=0;l<u;++l){var c,f,d,p,g=t[l].replace(a,"%20"),v=g.indexOf(i);v>=0?(c=g.substr(0,v),f=g.substr(v+1)):(c=g,f=""),d=decodeURIComponent(c),p=decodeURIComponent(f),n(o,d)?r(o[d])?o[d].push(p):o[d]=[o[d],p]:o[d]=p}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(o(t),function(o){var a=encodeURIComponent(r(o))+i;return s(t[o])?n(t[o],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[o]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(i(3)),a=i(0),h=n(i(114)),u=function(){function t(){var e=this;r(this,t),this._head=new h.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/o.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new h.default(t,e,i))},t.prototype.addOnce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new h.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*o.default.TARGET_FPMS*this.speed;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},s(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,o.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,t),this.fn=e,this.context=i,this.priority=r,this.once=s,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.context?this.fn.call(this.context,t):this.fn(t);var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=n(i(10)),o=i(0),a=i(2),h=n(i(56)),u=new a.Matrix,l=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,n=e._frame.width,r=e._frame.height,s=t.transform.worldTransform,l=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var f=e.baseTexture.scaleMode===o.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==f&&(i.context[i.smoothProperty]=f),e.trim?(l=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,c=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(l=(.5-t.anchor.x)*e.orig.width,c=(.5-t.anchor.y)*e.orig.height),e.rotate&&(s.copy(u),s=u,a.GroupD8.matrixAppendRotationInv(s,e.rotate,l,c),l=0,c=0),l-=n/2,c-=r/2,i.roundPixels?(i.context.setTransform(s.a,s.b,s.c,s.d,s.tx*i.resolution|0,s.ty*i.resolution|0),l|=0,c|=0):i.context.setTransform(s.a,s.b,s.c,s.d,s.tx*i.resolution,s.ty*i.resolution);var d=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint!==t.tint&&(t.cachedTint=t.tint,t.tintedTexture=h.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,n*d,r*d,l*i.resolution,c*i.resolution,n*i.resolution,r*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*d,e._frame.y*d,n*d,r*d,l*i.resolution,c*i.resolution,n*i.resolution,r*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=l,s.default.registerPlugin("sprite",l)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(0),s=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,n=t.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var s=t.graphicsData[n],o=s.shape;if(s.type===r.SHAPES.POLY){var a=o.points;e.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(s.type===r.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(s.type===r.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(s.type===r.SHAPES.ELIP){var u=2*o.width,l=2*o.height,c=o.x-u/2,f=o.y-l/2,d=u/2*.5522848,p=l/2*.5522848,g=c+u,v=f+l,_=c+u/2,m=f+l/2;e.moveTo(c,m),e.bezierCurveTo(c,m-p,_-d,f,_,f),e.bezierCurveTo(_+d,f,g,m-p,g,m),e.bezierCurveTo(g,m+p,_+d,v,_,v),e.bezierCurveTo(_-d,v,c,m+p,c,m),e.closePath()}else if(s.type===r.SHAPES.RREC){var y=o.x,b=o.y,x=o.width,w=o.height,T=o.radius,E=Math.min(x,w)/2|0;T=T>E?E:T,e.moveTo(y,b+T),e.lineTo(y,b+w-T),e.quadraticCurveTo(y,b+w,y+T,b+w),e.lineTo(y+x-T,b+w),e.quadraticCurveTo(y+x,b+w,y+x,b+w-T),e.lineTo(y+x,b+T),e.quadraticCurveTo(y+x,b,y+x-T,b),e.lineTo(y+T,b),e.quadraticCurveTo(y,b,y,b+T),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore()},t.prototype.destroy=function(){},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,r.default)()?(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="multiply",t[n.BLEND_MODES.SCREEN]="screen",t[n.BLEND_MODES.OVERLAY]="overlay",t[n.BLEND_MODES.DARKEN]="darken",t[n.BLEND_MODES.LIGHTEN]="lighten",t[n.BLEND_MODES.COLOR_DODGE]="color-dodge",t[n.BLEND_MODES.COLOR_BURN]="color-burn",t[n.BLEND_MODES.HARD_LIGHT]="hard-light",t[n.BLEND_MODES.SOFT_LIGHT]="soft-light",t[n.BLEND_MODES.DIFFERENCE]="difference",t[n.BLEND_MODES.EXCLUSION]="exclusion",t[n.BLEND_MODES.HUE]="hue",t[n.BLEND_MODES.SATURATION]="saturate",t[n.BLEND_MODES.COLOR]="color",t[n.BLEND_MODES.LUMINOSITY]="luminosity"):(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="source-over",t[n.BLEND_MODES.SCREEN]="source-over",t[n.BLEND_MODES.OVERLAY]="source-over",t[n.BLEND_MODES.DARKEN]="source-over",t[n.BLEND_MODES.LIGHTEN]="source-over",t[n.BLEND_MODES.COLOR_DODGE]="source-over",t[n.BLEND_MODES.COLOR_BURN]="source-over",t[n.BLEND_MODES.HARD_LIGHT]="source-over",t[n.BLEND_MODES.SOFT_LIGHT]="source-over",t[n.BLEND_MODES.DIFFERENCE]="source-over",t[n.BLEND_MODES.EXCLUSION]="source-over",t[n.BLEND_MODES.HUE]="source-over",t[n.BLEND_MODES.SATURATION]="source-over",t[n.BLEND_MODES.COLOR]="source-over",t[n.BLEND_MODES.LUMINOSITY]="source-over"),t};var n=i(0),r=function(t){return t&&t.__esModule?t:{default:t}}(i(55))},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(13)),h=n(i(14)),u=n(i(60)),l=n(i(131)),c=n(i(132)),f=n(i(133)),d=n(i(3)),p=n(i(5)),g=n(i(27)),v=0,_=0,m=function(t){function e(i){r(this,e);var n=s(this,t.call(this,i));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=d.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var o=1;o<=g.default.nextPow2(n.size);o*=2)n.buffers.push(new f.default(4*o*n.vertByteSize));n.indices=(0,u.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var a=0;a<n.size;a++)n.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),d.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,c.default)(this.MAX_TEXTURES,t)),this.shader=(0,l.default)(t,this.MAX_TEXTURES),this.indexBuffer=p.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var n=this.vertexBuffers[i]=p.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),r=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&r.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=r}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=g.default.nextPow2(this.currentIndex),n=g.default.log2(i),r=this.buffers[n],s=this.sprites,o=this.groups,a=r.float32View,h=r.uint32View,u=this.boundTextures,l=this.renderer.boundTextures,c=this.renderer.textureGC.count,f=0,m=void 0,y=void 0,b=1,x=0,w=o[0],T=void 0,E=void 0,S=s[0].blendMode;w.textureCount=0,w.start=0,w.blend=S,v++;var C=void 0;for(C=0;C<e;++C)u[C]=l[C],u[C]._virtalBoundId=C;for(C=0;C<this.currentIndex;++C){var P=s[C];if(m=P._texture.baseTexture,S!==P.blendMode&&(S=P.blendMode,y=null,x=e,v++),y!==m&&(y=m,m._enabled!==v)){if(x===e&&(v++,w.size=C-w.start,x=0,(w=o[b++]).blend=S,w.textureCount=0,w.start=C),m.touched=c,-1===m._virtalBoundId)for(var O=0;O<e;++O){var M=(O+_)%e,A=u[M];if(A._enabled!==v){_++,A._virtalBoundId=-1,m._virtalBoundId=M,u[M]=m;break}}m._enabled=v,w.textureCount++,w.ids[x]=m._virtalBoundId,w.textures[x++]=m}if(T=P.vertexData,E=P._texture._uvs.uvsUint32,this.renderer.roundPixels){var I=this.renderer.resolution;a[f]=(T[0]*I|0)/I,a[f+1]=(T[1]*I|0)/I,a[f+5]=(T[2]*I|0)/I,a[f+6]=(T[3]*I|0)/I,a[f+10]=(T[4]*I|0)/I,a[f+11]=(T[5]*I|0)/I,a[f+15]=(T[6]*I|0)/I,a[f+16]=(T[7]*I|0)/I}else a[f]=T[0],a[f+1]=T[1],a[f+5]=T[2],a[f+6]=T[3],a[f+10]=T[4],a[f+11]=T[5],a[f+15]=T[6],a[f+16]=T[7];h[f+2]=E[0],h[f+7]=E[1],h[f+12]=E[2],h[f+17]=E[3],h[f+3]=h[f+8]=h[f+13]=h[f+18]=P._tintRGB+(255*Math.min(P.worldAlpha,1)<<24),a[f+4]=a[f+9]=a[f+14]=a[f+19]=m._virtalBoundId,f+=20}if(w.size=C-w.start,d.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var k=this.shader.attributes,R=this.vertexBuffers[this.vertexCount]=p.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),L=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(R,k.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(R,k.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(R,k.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);k.aTextureId&&L.addAttribute(R,k.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=L}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++}for(C=0;C<e;++C)l[C]._virtalBoundId=-1;for(C=0;C<b;++C){for(var D=o[C],N=D.textureCount,F=0;F<N;F++)y=D.textures[F],l[D.ids[F]]!==y&&this.renderer.bindTexture(y,D.ids[F],!0),y._virtalBoundId=-1;this.renderer.state.setBlendMode(D.blend),t.drawElements(t.TRIANGLES,6*D.size,t.UNSIGNED_SHORT,6*D.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),d.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(a.default);e.default=m,h.default.registerPlugin("sprite",m)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(11)),h=n(i(57)),u=function(t){function e(i){r(this,e);var n=s(this,t.call(this,i));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return o(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new h.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(a.default);e.default=u},function(t,e,i){"use strict";function n(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},n=void 0,s=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<s.length;o++){var a=s[o].trim();if(a.indexOf("uniform")>-1){var h=a.split(" "),u=h[1],l=h[2],c=1;l.indexOf("[")>-1&&(l=(n=l.split(/\[|]/))[0],c*=Number(n[1])),l.match(e)||(i[l]={value:r(u,c),name:l,type:u})}}return i}e.__esModule=!0,e.default=function(t,e,i){var r=n(t),s=n(e);return Object.assign(r,s)};var r=function(t){return t&&t.__esModule?t:{default:t}}(i(5)).default.shader.defaultValue},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(l===setTimeout)return setTimeout(t,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function s(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function o(){g&&d&&(g=!1,d.length?p=d.concat(p):v=-1,p.length&&a())}function a(){if(!g){var t=r(o);g=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;)d&&d[v].run();v=-1,e=p.length}d=null,g=!1,s(t)}}function h(t,e){this.fun=t,this.array=e}function u(){}var l,c,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(t){l=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var d,p=[],g=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];p.push(new h(t,e)),1!==p.length||g||r(a)},h.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(t){return t&&t.__esModule?t:{default:t}}(i(11)),a=function(t){function e(i){n(this,e);var s=r(this,t.call(this,i));return s.stencilMaskStack=null,s}return s(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack;0===i.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.stencilFunc(e.ALWAYS,1,1)),i.push(t),e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,i.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack,i=e.pop();0===e.length?t.disable(t.STENCIL_TEST):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(i),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.NOTEQUAL,0,e.length),t.stencilOp(t.KEEP,t.KEEP,t.KEEP))},e.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(o.default);e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=n(i(11)),h=n(i(15)),u=n(i(59)),l=i(2),c=n(i(16)),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(124)),d=n(i(27)),p=function t(){o(this,t),this.renderTarget=null,this.sourceFrame=new l.Rectangle,this.destinationFrame=new l.Rectangle,this.filters=[],this.target=null,this.resolution=1},g=function(t){function e(i){o(this,e);var n=r(this,t.call(this,i));return n.gl=n.renderer.gl,n.quad=new u.default(n.gl,i.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n}return s(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new p;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var s=n.stack[++n.index];s||(s=n.stack[n.index]=new p);var o=e[0].resolution,a=0|e[0].padding,h=t.filterArea||t.getBounds(!0),u=s.sourceFrame,l=s.destinationFrame;u.x=(h.x*o|0)/o,u.y=(h.y*o|0)/o,u.width=(h.width*o|0)/o,u.height=(h.height*o|0)/o,n.stack[0].renderTarget.transform||e[0].autoFit&&u.fit(n.stack[0].destinationFrame),u.pad(a),l.width=u.width,l.height=u.height;var c=this.getPotRenderTarget(i.gl,u.width,u.height,o);s.target=t,s.filters=e,s.resolution=o,s.renderTarget=c,c.setFrame(l,u),i.bindRenderTarget(c),c.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,s=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);s.setFrame(i.destinationFrame,i.sourceFrame),s.clear();var o=0;for(o=0;o<n.length-1;++o){n[o].apply(this,r,s,!0,i);var a=r;r=s,s=a}n[o].apply(this,r,e.renderTarget,!1,i),this.freePotRenderTarget(r),this.freePotRenderTarget(s)}0===--t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer,s=r.gl,o=t.glShaders[r.CONTEXT_UID];o||(t.glShaderKey?(o=this.shaderCache[t.glShaderKey])||(o=new c.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=o):o=t.glShaders[r.CONTEXT_UID]=new c.default(this.gl,t.vertexSrc,t.fragmentSrc),r.bindVao(null),this.quad.initVao(o)),r.bindVao(this.quad.vao),r.bindRenderTarget(i),n&&(s.disable(s.SCISSOR_TEST),r.clear(),s.enable(s.SCISSOR_TEST)),i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(o);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(o,t),r.state.setBlendMode(t.blendMode),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),s.bindTexture(s.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,n=e.uniforms,r=1,s=void 0;if(t.uniforms.filterArea){s=this.filterData.stack[this.filterData.index];var o=t.uniforms.filterArea;o[0]=s.renderTarget.size.width,o[1]=s.renderTarget.size.height,o[2]=s.sourceFrame.x,o[3]=s.sourceFrame.y,t.uniforms.filterArea=o}if(t.uniforms.filterClamp){s=s||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(s.sourceFrame.width-1)/s.renderTarget.size.width,a[3]=(s.sourceFrame.height-1)/s.renderTarget.size.height,t.uniforms.filterClamp=a}for(var h in i)if("sampler2D"===i[h].type&&0!==n[h]){if(n[h].baseTexture)t.uniforms[h]=this.renderer.bindTexture(n[h].baseTexture,r);else{t.uniforms[h]=r;var u=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],u.activeTexture(u.TEXTURE0+r),n[h].texture.bind()}r++}else if("mat3"===i[h].type)void 0!==n[h].a?t.uniforms[h]=n[h].toArray(!0):t.uniforms[h]=n[h];else if("vec2"===i[h].type)if(void 0!==n[h].x){var l=t.uniforms[h]||new Float32Array(2);l[0]=n[h].x,l[1]=n[h].y,t.uniforms[h]=l}else t.uniforms[h]=n[h];else"float"===i[h].type?t.uniforms.data[h].value!==i[h]&&(t.uniforms[h]=n[h]):t.uniforms[h]=n[h]},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return f.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return f.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return f.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,n){var r=(65535&(e=d.default.nextPow2(e*n)))<<16|65535&(i=d.default.nextPow2(i*n));this.pool[r]||(this.pool[r]=[]);var s=this.pool[r].pop();if(!s){var o=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),s=new h.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=n,s.defaultFrame.width=s.size.width=e/n,s.defaultFrame.height=s.size.height=i/n,s},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=(65535&t.size.width*t.resolution)<<16|65535&t.size.height*t.resolution;this.pool[e].push(t)},e}(a.default);e.default=g},function(t,e,i){"use strict";e.__esModule=!0,e.calculateScreenSpaceMatrix=function(t,e,i){var n=t.identity();return n.translate(e.x/i.width,e.y/i.height),n.scale(i.width,i.height),n},e.calculateNormalizedScreenSpaceMatrix=function(t,e,i){var n=t.identity();n.translate(e.x/i.width,e.y/i.height);var r=i.width/e.width,s=i.height/e.height;return n.scale(r,s),n},e.calculateSpriteMatrix=function(t,e,i,r){var s=r.worldTransform.copy(n.Matrix.TEMP_MATRIX),o=r._texture.baseTexture,a=t.identity(),h=i.height/i.width;a.translate(e.x/i.width,e.y/i.height),a.scale(1,h);var u=i.width/o.width,l=i.height/o.height;return s.tx/=o.width*u,s.ty/=o.width*u,s.invert(),a.prepend(s),a.scale(1,1/h),a.scale(u,l),a.translate(r.anchor.x,r.anchor.y),a};var n=i(2)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(5),s=i(0),o=function(t){return t&&t.__esModule?t:{default:t}}(i(15)),a=i(1),h=function(){function t(e){n(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===e){e=0;for(var h=0;h<a.length;++h)if(a[h]===t){e=h;break}}a[e]=t,i.activeTexture(i.TEXTURE0+e);var u=t._glTextures[this.renderer.CONTEXT_UID];if(u)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):u.upload(t.source);else{if(n){var l=new o.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);l.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=l,u=l.texture}else(u=new r.GLTexture(this.gl,null,null,null,null)).bind(e),u.premultiplyAlpha=!0,u.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=u,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&u.enableMipmap(),t.wrapMode===s.WRAP_MODES.CLAMP?u.enableWrapClamp():t.wrapMode===s.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),t.scaleMode===s.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded&&t._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(t),t._glTextures[this.renderer.CONTEXT_UID].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.renderer.CONTEXT_UID],!e)){var i=this._managedTextures.indexOf(t);-1!==i&&(0,a.removeItems)(this._managedTextures,i,1)}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=h},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=i(0),s=function(t){return t&&t.__esModule?t:{default:t}}(i(3)),o=function(){function t(e){n(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var s=0,o=0;o<e.length;o++)null!==e[o]&&(e[s++]=e[o]);e.length=s}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();e.default=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(128)),s=function(){function t(e){n(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,r.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){t!==this.activeState[4]&&(this.activeState[4]=t,this.gl.blendFunc(this.blendModes[t][0],this.blendModes[t][1]))},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[n.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[n.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e};var n=i(0)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[n.DRAW_MODES.POINTS]=t.POINTS,e[n.DRAW_MODES.LINES]=t.LINES,e[n.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[n.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[n.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[n.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[n.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var n=i(0)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},function(t,e,i){"use strict";function n(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}e.__esModule=!0,e.default=function(t,e){var i=s;i=(i=i.replace(/%count%/gi,e)).replace(/%forloop%/gi,n(e));for(var o=new r.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",i),a=[],h=0;h<e;h++)a[h]=h;return o.bind(),o.uniforms.uSamplers=a,o};var r=function(t){return t&&t.__esModule?t:{default:t}}(i(16)),s=(i(30),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},function(t,e,i){"use strict";function n(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}e.__esModule=!0,e.default=function(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var o=document.createElement("canvas");o.width=1,o.height=1,e=r.default.createContext(o)}for(var a=e.createShader(e.FRAGMENT_SHADER);;){var h=s.replace(/%forloop%/gi,n(t));if(e.shaderSource(a,h),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))break;t=t/2|0}return i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t};var r=function(t){return t&&t.__esModule?t:{default:t}}(i(5)),s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=r},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(7)),h=n(i(29)),u=n(i(8)),l=n(i(61)),c=n(i(48)),f=i(2),d=i(1),p=i(0),g=n(i(25)),v=n(i(135)),_=n(i(10)),m=void 0,y=new f.Matrix,b=new f.Point,x=new Float32Array(4),w=new Float32Array(4),T=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r(this,e);var n=s(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=i,n.lineColor=0,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=p.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new g.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n}return o(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.currentPath)if(this.currentPath.shape.points.length){var n=new f.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var i=new f.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r=this.currentPath.shape.points,s=0,o=0;0===r.length&&this.moveTo(0,0);for(var a=r[r.length-2],h=r[r.length-1],u=1;u<=20;++u){var l=u/20;s=a+(t-a)*l,o=h+(e-h)*l,r.push(s+(t+(i-t)*l-s)*l,o+(e+(n-e)*l-o)*l)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,i,n,r,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,a=o[o.length-2],h=o[o.length-1];return o.length-=2,(0,v.default)(a,h,t,e,i,n,r,s,o),this.dirty++,this},e.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,o=s[s.length-2],a=s[s.length-1]-e,h=o-t,u=n-e,l=i-t,c=Math.abs(a*l-h*u);if(c<1e-8||0===r)s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e);else{var f=a*a+h*h,d=u*u+l*l,p=a*u+h*l,g=r*Math.sqrt(f)/c,v=r*Math.sqrt(d)/c,_=g*p/f,m=v*p/d,y=g*l+v*h,b=g*u+v*a,x=h*(v+_),w=a*(v+_),T=l*(g+m),E=u*(g+m),S=Math.atan2(w-b,x-y),C=Math.atan2(E-b,T-y);this.arc(y+t,b+e,r,S,C,h*u>l*a)}return this.dirty++,this},e.prototype.arc=function(t,e,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===r)return this;!s&&r<=n?r+=2*Math.PI:s&&n<=r&&(n+=2*Math.PI);var o=r-n,a=40*Math.ceil(Math.abs(o)/(2*Math.PI));if(0===o)return this;var h=t+Math.cos(n)*i,u=e+Math.sin(n)*i,l=this.currentPath?this.currentPath.shape.points:null;l?l[l.length-2]===h&&l[l.length-1]===u||l.push(h,u):(this.moveTo(h,u),l=this.currentPath.shape.points);for(var c=o/(2*a),f=2*c,d=Math.cos(c),p=Math.sin(c),g=a-1,v=g%1/g,_=0;_<=g;++_){var m=c+n+f*(_+v*_),y=Math.cos(m),b=-Math.sin(m);l.push((d*y+p*b)*i+t,(d*-b+p*y)*i+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new f.Rectangle(t,e,i,n)),this},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new f.RoundedRectangle(t,e,i,n,r)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new f.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new f.Ellipse(t,e,i,n)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof f.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new f.Polygon(e);return r.closed=i,this.drawShape(r),this},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===p.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new c.default(new u.default(u.default.WHITE)));var i=this._spriteRect;if(16777215===this.tint)i.tint=this.graphicsData[0].fillColor;else{var n=x,r=w;(0,d.hex2rgb)(this.graphicsData[0].fillColor,n),(0,d.hex2rgb)(this.tint,r),n[0]*=r[0],n[1]*=r[1],n[2]*=r[2],i.tint=(0,d.rgb2hex)(n)}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,b);for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fill&&(n.shape&&n.shape.contains(b.x,b.y)))return!0}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r=0,s=0,o=0,a=0,h=0,u=0;u<this.graphicsData.length;u++){var l=this.graphicsData[u],c=l.type,f=l.lineWidth;if(r=l.shape,c===p.SHAPES.RECT||c===p.SHAPES.RREC)s=r.x-f/2,o=r.y-f/2,a=r.width+f,h=r.height+f,t=s<t?s:t,e=s+a>e?s+a:e,i=o<i?o:i,n=o+h>n?o+h:n;else if(c===p.SHAPES.CIRC)s=r.x,o=r.y,a=r.radius+f/2,h=r.radius+f/2,t=s-a<t?s-a:t,e=s+a>e?s+a:e,i=o-h<i?o-h:i,n=o+h>n?o+h:n;else if(c===p.SHAPES.ELIP)s=r.x,o=r.y,a=r.width+f/2,h=r.height+f/2,t=s-a<t?s-a:t,e=s+a>e?s+a:e,i=o-h<i?o-h:i,n=o+h>n?o+h:n;else for(var d=r.points,g=0,v=0,_=0,m=0,y=0,b=0,x=0,w=0,T=0;T+2<d.length;T+=2)s=d[T],o=d[T+1],g=d[T+2],v=d[T+3],_=Math.abs(g-s),m=Math.abs(v-o),h=f,(a=Math.sqrt(_*_+m*m))<1e-9||(b=(h/a*_+m)/2,w=(v+o)/2,t=(x=(g+s)/2)-(y=(h/a*m+_)/2)<t?x-y:t,e=x+y>e?x+y:e,i=w-b<i?w-b:i,n=w+b>n?w+b:n)}else t=0,e=0,i=0,n=0;var E=this.boundsPadding;this._localBounds.minX=t-E,this._localBounds.maxX=e+2*E,this._localBounds.minY=i-E,this._localBounds.maxY=n+2*E},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new l.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===p.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),n=h.default.create(i.width,i.height,t,e);m||(m=new _.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(y),y.invert(),y.tx-=i.x,y.ty-=i.y,m.render(this,n,!0,y);var r=u.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");return r.baseTexture.resolution=e,r.baseTexture.update(),r},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var n in this._webgl)for(var r=0;r<this._webgl[n].data.length;++r)this._webgl[n].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(a.default);e.default=T,T._SPRITE_TEXTURE=null},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i,n,r,s,o,a){var h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u=0,l=0,c=0,f=0,d=0;h.push(t,e);for(var p=1,g=0;p<=20;++p)c=(l=(u=1-(g=p/20))*u)*u,d=(f=g*g)*g,h.push(c*t+3*l*g*i+3*u*f*r+d*o,c*e+3*l*g*n+3*u*f*s+d*a);return h}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(1),h=i(0),u=n(i(13)),l=n(i(14)),c=n(i(137)),f=n(i(138)),d=n(i(139)),p=n(i(140)),g=n(i(141)),v=n(i(142)),_=function(t){function e(i){r(this,e);var n=s(this,t.call(this,i));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=i.gl,n.CONTEXT_UID=0,n}return o(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new f.default(this.gl)},e.prototype.destroy=function(){u.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=void 0,r=t._webGL[this.CONTEXT_UID];r&&t.dirty===r.dirty||(this.updateGraphics(t),r=t._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;e.bindShader(s),e.state.setBlendMode(t.blendMode);for(var o=0,h=r.data.length;o<h;o++){var u=(n=r.data[o]).shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,a.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var n=0;n<i.data.length;n++)this.graphicsDataPool.push(i.data[n]);i.data.length=0,i.lastIndex=0}for(var r=void 0,s=void 0,o=i.lastIndex;o<t.graphicsData.length;o++){var a=t.graphicsData[o];r=this.getWebGLData(i,0),a.nativeLines&&a.lineWidth&&(s=this.getWebGLData(i,0,!0),i.lastIndex++),a.type===h.SHAPES.POLY&&(0,d.default)(a,r,s),a.type===h.SHAPES.RECT?(0,p.default)(a,r,s):a.type===h.SHAPES.CIRC||a.type===h.SHAPES.ELIP?(0,v.default)(a,r,s):a.type===h.SHAPES.RREC&&(0,g.default)(a,r,s),i.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<i.data.length;u++)(r=i.data[u]).dirty&&r.upload()},e.prototype.getWebGLData=function(t,e,i){var n=t.data[t.data.length-1];return(!n||n.nativeLines!==i||n.points.length>32e4)&&((n=this.graphicsDataPool.pop()||new c.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=i,n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(u.default);e.default=_,l.default.registerPlugin("graphics",_)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(5)),s=function(){function t(e,i,s){n(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=r.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new r.default.VertexArrayObject(e,s).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=s},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(t){function e(i){return n(this,e),r(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return s(e,t),e}(function(t){return t&&t.__esModule?t:{default:t}}(i(16)).default);e.default=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.default=function(t,e,i){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&n.length>=6){for(var a=[],h=t.holes,u=0;u<h.length;u++){var l=h[u];a.push(n.length/2),n=n.concat(l.points)}var c=e.points,f=e.indices,d=n.length/2,p=(0,s.hex2rgb)(t.fillColor),g=t.fillAlpha,v=p[0]*g,_=p[1]*g,m=p[2]*g,y=(0,o.default)(n,a,2);if(!y)return;for(var b=c.length/6,x=0;x<y.length;x+=3)f.push(y[x]+b),f.push(y[x]+b),f.push(y[x+1]+b),f.push(y[x+2]+b),f.push(y[x+2]+b);for(var w=0;w<d;w++)c.push(n[2*w],n[2*w+1],v,_,m,g)}t.lineWidth>0&&(0,r.default)(t,e,i)};var r=n(i(17)),s=i(1),o=n(i(62))},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var s=t.shape,o=s.x,a=s.y,h=s.width,u=s.height;if(t.fill){var l=(0,r.hex2rgb)(t.fillColor),c=t.fillAlpha,f=l[0]*c,d=l[1]*c,p=l[2]*c,g=e.points,v=e.indices,_=g.length/6;g.push(o,a),g.push(f,d,p,c),g.push(o+h,a),g.push(f,d,p,c),g.push(o,a+u),g.push(f,d,p,c),g.push(o+h,a+u),g.push(f,d,p,c),v.push(_,_,_+1,_+2,_+3,_+3)}if(t.lineWidth){var m=t.points;t.points=[o,a,o+h,a,o+h,a+u,o,a+u,o,a],(0,n.default)(t,e,i),t.points=m}};var n=function(t){return t&&t.__esModule?t:{default:t}}(i(17)),r=i(1)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){return t+(e-t)*i}function s(t,e,i,n,s,o){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],h=0,u=0,l=0,c=0,f=0,d=0,p=0,g=0;p<=20;++p)h=r(t,i,g=p/20),u=r(e,n,g),l=r(i,s,g),c=r(n,o,g),f=r(h,l,g),d=r(u,c,g),a.push(f,d);return a}e.__esModule=!0,e.default=function(t,e,i){var n=t.shape,r=n.x,u=n.y,l=n.width,c=n.height,f=n.radius,d=[];if(d.push(r,u+f),s(r,u+c-f,r,u+c,r+f,u+c,d),s(r+l-f,u+c,r+l,u+c,r+l,u+c-f,d),s(r+l,u+f,r+l,u,r+l-f,u,d),s(r+f,u,r,u,r,u+f+1e-10,d),t.fill){for(var p=(0,h.hex2rgb)(t.fillColor),g=t.fillAlpha,v=p[0]*g,_=p[1]*g,m=p[2]*g,y=e.points,b=e.indices,x=y.length/6,w=(0,o.default)(d,null,2),T=0,E=w.length;T<E;T+=3)b.push(w[T]+x),b.push(w[T]+x),b.push(w[T+1]+x),b.push(w[T+2]+x),b.push(w[T+2]+x);for(var S=0,C=d.length;S<C;S++)y.push(d[S],d[++S],v,_,m,g)}if(t.lineWidth){var P=t.points;t.points=d,(0,a.default)(t,e,i),t.points=P}};var o=n(i(62)),a=n(i(17)),h=i(1)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var o=t.shape,a=o.x,h=o.y,u=void 0,l=void 0;if(t.type===r.SHAPES.CIRC?(u=o.radius,l=o.radius):(u=o.width,l=o.height),0!==u&&0!==l){var c=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(o.width+o.height)),f=2*Math.PI/c;if(t.fill){var d=(0,s.hex2rgb)(t.fillColor),p=t.fillAlpha,g=d[0]*p,v=d[1]*p,_=d[2]*p,m=e.points,y=e.indices,b=m.length/6;y.push(b);for(var x=0;x<c+1;x++)m.push(a,h,g,v,_,p),m.push(a+Math.sin(f*x)*u,h+Math.cos(f*x)*l,g,v,_,p),y.push(b++,b++);y.push(b-1)}if(t.lineWidth){var w=t.points;t.points=[];for(var T=0;T<c+1;T++)t.points.push(a+Math.sin(f*T)*u,h+Math.cos(f*T)*l);(0,n.default)(t,e,i),t.points=w}}};var n=function(t){return t&&t.__esModule?t:{default:t}}(i(17)),r=i(0),s=i(1)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(10)),s=i(0),o=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldAlpha,r=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var h=t.graphicsData[a],u=h.shape,l=h._fillTint,c=h._lineTint;if(i.lineWidth=h.lineWidth,h.type===s.SHAPES.POLY){i.beginPath(),this.renderPolygon(u.points,u.closed,i);for(var f=0;f<h.holes.length;f++)this.renderPolygon(h.holes[f].points,!0,i);h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===s.SHAPES.RECT)(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fillRect(u.x,u.y,u.width,u.height)),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(u.x,u.y,u.width,u.height));else if(h.type===s.SHAPES.CIRC)i.beginPath(),i.arc(u.x,u.y,u.radius,0,2*Math.PI),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(h.type===s.SHAPES.ELIP){var d=2*u.width,p=2*u.height,g=u.x-d/2,v=u.y-p/2;i.beginPath();var _=d/2*.5522848,m=p/2*.5522848,y=g+d,b=v+p,x=g+d/2,w=v+p/2;i.moveTo(g,w),i.bezierCurveTo(g,w-m,x-_,v,x,v),i.bezierCurveTo(x+_,v,y,w-m,y,w),i.bezierCurveTo(y,w+m,x+_,b,x,b),i.bezierCurveTo(x-_,b,g,w+m,g,w),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===s.SHAPES.RREC){var T=u.x,E=u.y,S=u.width,C=u.height,P=u.radius,O=Math.min(S,C)/2|0;P=P>O?O:P,i.beginPath(),i.moveTo(T,E+P),i.lineTo(T,E+C-P),i.quadraticCurveTo(T,E+C,T+P,E+C),i.lineTo(T+S-P,E+C),i.quadraticCurveTo(T+S,E+C,T+S,E+C-P),i.lineTo(T+S,E+P),i.quadraticCurveTo(T+S,E,T+S-P,E),i.lineTo(T+P,E),i.quadraticCurveTo(T,E,T,E+P),i.closePath(),(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;++r){var s=t.graphicsData[r],o=0|s.fillColor,a=0|s.lineColor;s._fillTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255,s._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)i.lineTo(t[2*n],t[2*n+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=o,r.default.registerPlugin("graphics",o)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(4),o=i(1),a=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n(this,t),this.baseTexture=e,this.textures={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,o.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE;i-e<n&&i<this._frameKeys.length;){var r=this._frameKeys[i],o=this._frames[r].frame;if(o){var a=null,h=null,u=new s.Rectangle(0,0,this._frames[r].sourceSize.w/this.resolution,this._frames[r].sourceSize.h/this.resolution);a=this._frames[r].rotated?new s.Rectangle(o.x/this.resolution,o.y/this.resolution,o.h/this.resolution,o.w/this.resolution):new s.Rectangle(o.x/this.resolution,o.y/this.resolution,o.w/this.resolution,o.h/this.resolution),this._frames[r].trimmed&&(h=new s.Rectangle(this._frames[r].spriteSourceSize.x/this.resolution,this._frames[r].spriteSourceSize.y/this.resolution,o.w/this.resolution,o.h/this.resolution)),this.textures[r]=new s.Texture(this.baseTexture,a,u,h,this._frames[r].rotated?2:0),s.Texture.addToCache(this.textures[r],r)}i++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(65);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return n(r).default}});var s=i(146);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return n(s).default}});var o=i(66);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return n(o).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),u=n(i(65)),l=n(i(147)),c=n(i(148)),f=n(i(6)),d=n(i(66));h.utils.mixins.delayMixin(h.DisplayObject.prototype,d.default);var p="MOUSE",g={target:null,data:{global:null}},v=function(t){function e(i,n){r(this,e);var o=s(this,t.call(this));return n=n||{},o.renderer=i,o.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,o.interactionFrequency=n.interactionFrequency||10,o.mouse=new u.default,o.mouse.identifier=p,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[p]=o.mouse,o.interactionDataPool=[],o.eventData=new l.default,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o._tempPoint=new h.Point,o.resolution=1,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return o(e,t),e.prototype.hitTest=function(t,e){return g.target=null,g.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(g,e,null,!0),g.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(h.ticker.shared.add(this.update,this,h.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(h.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":a(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=r=e.interactive||r;if(e.hitArea?a=!1:n&&e._mask&&(e._mask.containsPoint(s)||(n=!1)),e.interactiveChildren&&e.children)for(var h=e.children,u=h.length-1;u>=0;u--){var l=h[u],c=this.processInteractive(t,l,i,n,a);if(c){if(!l.parent)continue;a=!1,c&&(t.target&&(n=!1),o=!0)}}return r&&(n&&!t.target&&(e.hitArea?(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(o=!0)):e.containsPoint&&e.containsPoint(s)&&(o=!0)),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);if(o.data.originalEvent=t,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===r.pointerType)this.emit("touchstart",o);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new c.default(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;s?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<r;o++){var a=n[o],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,u),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+s:"mouseup"+s,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,u),this.releaseInteractionDataForPointerId(a.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,s=e.trackedPointers[r],o="touch"===n.pointerType;if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button,h=c.default.FLAGS,u=a?h.RIGHT_DOWN:h.LEFT_DOWN,l=void 0!==s&&s.flags&u;i?(this.dispatchEvent(e,a?"rightup":"mouseup",t),l&&this.dispatchEvent(e,a?"rightclick":"click",t)):l&&this.dispatchEvent(e,a?"rightupoutside":"mouseupoutside",t),s&&(a?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"===e[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);o.data.originalEvent=t;var a="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",o),"touch"===r.pointerType&&this.emit("touchmove",o),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,s="mouse"===n.pointerType||"pen"===n.pointerType,o=e.trackedPointers[r];i&&!o&&(o=e.trackedPointers[r]=new c.default(r)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.dispatchEvent(e,"pointerover",t),s&&this.dispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return e===p||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:((i=this.interactionDataPool.pop()||new u.default).identifier=e,this.activeInteractionData[e]=i),i._copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e._reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t._reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),r.twist=0,r.tangentialPressure=0,void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=p),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(f.default);e.default=v,h.WebGLRenderer.registerPlugin("interaction",v),h.CanvasRenderer.registerPlugin("interaction",v)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){n(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e.default=r},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(e){n(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e.default=s,s.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(150);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return n(r).default}});var s=i(67);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return n(s).default}});var o=i(71);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return n(o).default}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),u=n(i(67)),l=n(i(71)),c=function(t){function e(i,n,o,a){r(this,e);var c=s(this,t.call(this));return c.blurXFilter=new u.default(i,n,o,a),c.blurYFilter=new l.default(i,n,o,a),c.padding=0,c.resolution=o||h.settings.RESOLUTION,c.quality=n||4,c.blur=i||8,c}return o(e,t),e.prototype.apply=function(t,e,i){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,i,!1),t.returnRenderTarget(n)},a(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),e}(h.Filter);e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.Loader=void 0;var r=i(72);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return r.getResourcePath}});var s=i(77);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return n(s).default}});var o=i(18);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return o.Resource}});var a=n(i(63)),h=n(i(153));e.Loader=h.default;var u=new h.default;u.destroy=function(){},e.shared=u;var l=a.default.prototype;l._loader=null,Object.defineProperty(l,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?u:new h.default}return this._loader}}),l._parentDestroy=l.destroy,l.destroy=function(){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy()}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(i(73)),a=n(i(74)),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(75)),u=n(i(31)),l=/(#[\w-]+)?$/,c=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;r(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=h.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default}return t.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"===(void 0===t?"undefined":s(t))&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new u.default(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var o=i.parentResource,a=[],h=0;h<o.children.length;++h)o.children[h].isComplete||a.push(o.children[h]);var l=o.progressChunk*(a.length+1)/(a.length+2);o.children.push(this.resources[t]),o.progressChunk=l;for(var c=0;c<a.length;++c)a[c].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},t.prototype._prepareUrl=function(t){var e=(0,a.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=l.exec(i)[0];-1!==(i=i.substr(0,i.length-n.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,h.eachSeries(this._beforeMiddleware,function(e,n){e.call(i,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},t.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),h.eachSeries(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&(e.progress=100,e._onComplete())},!0)},t}();e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(18)),h=i(154),u=n(i(6)),l=n(i(77)),c=n(i(72)),f=function(t){function e(i,n){r(this,e);var o=s(this,t.call(this,i,n));u.default.call(o);for(var a=0;a<e._pixiMiddleware.length;++a)o.use(e._pixiMiddleware[a]());return o.onStart.add(function(t){return o.emit("start",t)}),o.onProgress.add(function(t,e){return o.emit("progress",t,e)}),o.onError.add(function(t,e,i){return o.emit("error",t,e,i)}),o.onLoad.add(function(t,e){return o.emit("load",t,e)}),o.onComplete.add(function(t,e){return o.emit("complete",t,e)}),o}return o(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(a.default);e.default=f;for(var d in u.default.prototype)f.prototype[d]=u.default.prototype[d];f._pixiMiddleware=[h.blobMiddlewareFactory,l.default,c.default];var p=a.default.Resource;p.setExtensionXhrType("fnt",p.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===s.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=function(){var i=a.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=s.default.TYPE.IMAGE,t.data.onload=function(){a.revokeObjectURL(i),t.data.onload=null,e()},{v:void 0}}();if("object"===(void 0===i?"undefined":r(i)))return i.v}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+o.default.encodeBinary(t.xhr.responseText),t.type=s.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}};var s=n(i(31)),o=n(i(76)),a=window.URL||window.webkitURL},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=i(32);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return n(r).default}});var s=i(157);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return n(s).default}});var o=i(158);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(o).default}})},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){return t&&t.__esModule?t:{default:t}}(i(22)),o=new s.default,a=function(){function t(e,i){n(this,t),this._texture=e,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],s=t[n+1];e[n]=r*i.a+s*i.c+i.tx,e[n+1]=r*i.b+s*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(o.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(o));var s=e.baseTexture,a=this.uClampFrame,h=this.clampMargin/s.resolution,u=this.clampOffset;return a[0]=(e._frame.x+h+u)/s.width,a[1]=(e._frame.y+h+u)/s.height,a[2]=(e._frame.x+e._frame.width-h+u)/s.width,a[3]=(e._frame.y+e._frame.height-h+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,!0},r(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),h=n(i(5)),u=n(i(32)),l=(i(30),a.Matrix.IDENTITY),c=function(t){function e(i){r(this,e);var n=s(this,t.call(this,i));return n.shader=null,n}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new a.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=t._texture;if(n.valid){var r=t._glDatas[e.CONTEXT_UID];r||(e.bindVao(null),(r={shader:this.shader,vertexBuffer:h.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:h.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:h.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty}).vao=new h.default.VertexArrayObject(i).addIndex(r.indexBuffer).addAttribute(r.vertexBuffer,r.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(r.uvBuffer,r.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=r),e.bindVao(r.vao),t.dirty!==r.dirty&&(r.dirty=t.dirty,r.uvBuffer.upload(t.uvs)),t.indexDirty!==r.indexDirty&&(r.indexDirty=t.indexDirty,r.indexBuffer.upload(t.indices)),r.vertexBuffer.upload(t.vertices),e.bindShader(r.shader),r.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(t.blendMode),r.shader.uniforms.uTransform&&(t.uploadUvTransform?r.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):r.shader.uniforms.uTransform=l.toArray(!0)),r.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),r.shader.uniforms.alpha=t.worldAlpha,r.shader.uniforms.tint=t.tintRgb;var s=t.drawMode===u.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;r.vao.draw(s,t.indices.length,0)}},e}(a.ObjectRenderer);e.default=c,a.WebGLRenderer.registerPlugin("mesh",c)},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(4)),s=function(t){return t&&t.__esModule?t:{default:t}}(i(32)),o=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldTransform,r=e.resolution;e.roundPixels?i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.setBlendMode(t.blendMode),t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var n=2*i;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,n=0;n<i;n+=3){var r=2*e[n],s=2*e[n+1],o=2*e[n+2];this._renderDrawTriangle(t,r,s,o)}},t.prototype._renderDrawTriangle=function(t,e,i,n){var r=this.renderer.context,s=t.uvs,o=t.vertices,a=t._texture;if(a.valid){var h=a.baseTexture,u=h.source,l=h.width,c=h.height,f=void 0,d=void 0,p=void 0,g=void 0,v=void 0,_=void 0;if(t.uploadUvTransform){var m=t._uvTransform.mapCoord;f=(s[e]*m.a+s[e+1]*m.c+m.tx)*h.width,d=(s[i]*m.a+s[i+1]*m.c+m.tx)*h.width,p=(s[n]*m.a+s[n+1]*m.c+m.tx)*h.width,g=(s[e]*m.b+s[e+1]*m.d+m.ty)*h.height,v=(s[i]*m.b+s[i+1]*m.d+m.ty)*h.height,_=(s[n]*m.b+s[n+1]*m.d+m.ty)*h.height}else f=s[e]*h.width,d=s[i]*h.width,p=s[n]*h.width,g=s[e+1]*h.height,v=s[i+1]*h.height,_=s[n+1]*h.height;var y=o[e],b=o[i],x=o[n],w=o[e+1],T=o[i+1],E=o[n+1];if(t.canvasPadding>0){var S=t.canvasPadding/t.worldTransform.a,C=t.canvasPadding/t.worldTransform.d,P=(y+b+x)/3,O=(w+T+E)/3,M=y-P,A=w-O,I=Math.sqrt(M*M+A*A);y=P+M/I*(I+S),w=O+A/I*(I+C),A=T-O,b=P+(M=b-P)/(I=Math.sqrt(M*M+A*A))*(I+S),T=O+A/I*(I+C),A=E-O,x=P+(M=x-P)/(I=Math.sqrt(M*M+A*A))*(I+S),E=O+A/I*(I+C)}r.save(),r.beginPath(),r.moveTo(y,w),r.lineTo(b,T),r.lineTo(x,E),r.closePath(),r.clip();var k=f*v+g*p+d*_-v*p-g*d-f*_,R=y*v+g*x+b*_-v*x-g*b-y*_,L=f*b+y*p+d*x-b*p-y*d-f*x,D=f*v*x+g*b*p+y*d*_-y*v*p-g*d*x-f*b*_,N=w*v+g*E+T*_-v*E-g*T-w*_,F=f*T+w*p+d*E-T*p-w*d-f*E,j=f*v*E+g*T*p+w*d*_-w*v*p-g*d*E-f*T*_;r.transform(R/k,N/k,L/k,F/k,D/k,j/k),r.drawImage(u,0,0,l*h.resolution,c*h.resolution,0,0,l,c),r.restore()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;r<n-2;++r){var s=2*r,o=i[s],a=i[s+1],h=i[s+2],u=i[s+3],l=i[s+4],c=i[s+5];e.moveTo(o,a),e.lineTo(h,u),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=o,r.CanvasRenderer.registerPlugin("mesh",o)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=n(i(79)),u=(n(i(80)),i(168)),l=(i(169),2),c=function(t){function e(i,n){r(this,e);var o=s(this,t.call(this,i,n));return o.cacheOrigin(n),o.setup(n,l),o.blurRadius=0,o}return o(e,t),e.prototype.cacheOrigin=function(t){this.layerRenderer=new PIXI.CanvasRenderer({width:t*l,height:t*l,transparent:!0,clearBeforeRender:!0}),this.layerOrigin=this.source,this.layerOrigin.x*=l,this.layerOrigin.y*=l,this.layerRenderer.render(this.layerOrigin);var e=this.layerRenderer.view,i=PIXI.Texture.fromCanvas(e);this.source=new PIXI.Sprite(i),this.context=e.getContext("2d")},e.prototype.blurify=function(){this.layerRenderer.render(this.layerOrigin),(0,u.fastBlurRGBA)(this.context,3*this.blurRadius,1),this.source.texture.update()},e.prototype.applyTint=function(){this.layerOrigin.tint=this.tintColor.toHex(),this.blurify()},a(e,[{key:"blur",get:function(){return this.blurRadius},set:function(t){var e=+t;e=isNaN(e)||e<0?0:Math.round(e),this.blurRadius!==e&&(this.blurRadius=e,this.blurify())}}]),e}(h.default);e.default=c},function(t,e,i){"use strict";e.__esModule=!0;var n=i(161);Object.defineProperty(e,"easeLinear",{enumerable:!0,get:function(){return n.linear}});var r=i(162);Object.defineProperty(e,"easeQuad",{enumerable:!0,get:function(){return r.quadInOut}}),Object.defineProperty(e,"easeQuadIn",{enumerable:!0,get:function(){return r.quadIn}}),Object.defineProperty(e,"easeQuadOut",{enumerable:!0,get:function(){return r.quadOut}});var s=i(163);Object.defineProperty(e,"easeSin",{enumerable:!0,get:function(){return s.sinInOut}}),Object.defineProperty(e,"easeSinIn",{enumerable:!0,get:function(){return s.sinIn}}),Object.defineProperty(e,"easeSinOut",{enumerable:!0,get:function(){return s.sinOut}});var o=i(164);Object.defineProperty(e,"easeExp",{enumerable:!0,get:function(){return o.expInOut}}),Object.defineProperty(e,"easeExpIn",{enumerable:!0,get:function(){return o.expIn}}),Object.defineProperty(e,"easeExpOut",{enumerable:!0,get:function(){return o.expOut}});var a=i(165);Object.defineProperty(e,"easeCircle",{enumerable:!0,get:function(){return a.circleInOut}}),Object.defineProperty(e,"easeCircleIn",{enumerable:!0,get:function(){return a.circleIn}}),Object.defineProperty(e,"easeCircleOut",{enumerable:!0,get:function(){return a.circleOut}});var h=i(166);Object.defineProperty(e,"easeBounce",{enumerable:!0,get:function(){return h.bounceOut}}),Object.defineProperty(e,"easeBounceIn",{enumerable:!0,get:function(){return h.bounceIn}}),Object.defineProperty(e,"easeBounceOut",{enumerable:!0,get:function(){return h.bounceOut}});var u=i(167);Object.defineProperty(e,"easeElastic",{enumerable:!0,get:function(){return u.elasticOut}}),Object.defineProperty(e,"easeElasticIn",{enumerable:!0,get:function(){return u.elasticIn}}),Object.defineProperty(e,"easeElasticOut",{enumerable:!0,get:function(){return u.elasticOut}})},function(t,e,i){"use strict";e.__esModule=!0,e.linear=function(t){return+t}},function(t,e,i){"use strict";e.__esModule=!0,e.quadIn=function(t){return t*t},e.quadOut=function(t){return t*(2-t)},e.quadInOut=function(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}},function(t,e,i){"use strict";e.__esModule=!0,e.sinIn=function(t){return 1-Math.cos(t*r)},e.sinOut=function(t){return Math.sin(t*r)},e.sinInOut=function(t){return(1-Math.cos(n*t))/2};var n=Math.PI,r=n/2},function(t,e,i){"use strict";e.__esModule=!0,e.expIn=function(t){return Math.pow(2,10*t-10)},e.expOut=function(t){return 1-Math.pow(2,-10*t)},e.expInOut=function(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}},function(t,e,i){"use strict";e.__esModule=!0,e.circleIn=function(t){return 1-Math.sqrt(1-t*t)},e.circleOut=function(t){return Math.sqrt(1- --t*t)},e.circleInOut=function(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}},function(t,e,i){"use strict";function n(t){return(t=+t)<r?d*t*t:t<o?d*(t-=s)*t+a:t<u?d*(t-=h)*t+l:d*(t-=c)*t+f}e.__esModule=!0,e.bounceIn=function(t){return 1-n(1-t)},e.bounceOut=n,e.bounceInOut=function(t){return((t*=2)<=1?1-n(1-t):n(t-1)+1)/2};var r=4/11,s=6/11,o=8/11,a=.75,h=9/11,u=10/11,l=.9375,c=21/22,f=63/64,d=1/r/r},function(t,e,i){"use strict";e.__esModule=!0;var n=2*Math.PI;e.elasticIn=function t(e,i){function r(t){return e*Math.pow(2,10*--t)*Math.sin((s-t)/i)}var s=Math.asin(1/(e=Math.max(1,e)))*(i/=n);return r.amplitude=function(e){return t(e,i*n)},r.period=function(i){return t(e,i)},r}(1,.3),e.elasticOut=function t(e,i){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+s)/i)}var s=Math.asin(1/(e=Math.max(1,e)))*(i/=n);return r.amplitude=function(e){return t(e,i*n)},r.period=function(i){return t(e,i)},r}(1,.3),e.elasticInOut=function t(e,i){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((s-t)/i):2-e*Math.pow(2,-10*t)*Math.sin((s+t)/i))/2}var s=Math.asin(1/(e=Math.max(1,e)))*(i/=n);return r.amplitude=function(e){return t(e,i*n)},r.period=function(i){return t(e,i)},r}(1,.3)},function(t,e,i){"use strict";e.__esModule=!0,e.fastBlurRGBA=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!(isNaN(e)||e<1)){for(var s,o,a,h,u,l,c,f,d,p,g,v,_,m,y=t.canvas.width,b=t.canvas.height,x=t.getImageData(0,0,y,b),w=x.data,T=y-1,E=b-1,S=e+1,C=n[e],P=r[e],O=[],M=[],A=[],I=[],k=[],R=[];i-- >0;){for(_=v=0,l=0;l<b;l++){for(s=w[_]*S,o=w[_+1]*S,a=w[_+2]*S,h=w[_+3]*S,c=1;c<=e;c++)f=_+((c>T?T:c)<<2),s+=w[f++],o+=w[f++],a+=w[f++],h+=w[f];for(u=0;u<y;u++)O[v]=s,M[v]=o,A[v]=a,I[v]=h,0===l&&(k[u]=((f=u+S)<T?f:T)<<2,R[u]=(f=u-e)>0?f<<2:0),d=_+k[u],p=_+R[u],s+=w[d++]-w[p++],o+=w[d++]-w[p++],a+=w[d++]-w[p++],h+=w[d]-w[p],v++;_+=y<<2}for(u=0;u<y;u++){for(s=O[g=u]*S,o=M[g]*S,a=A[g]*S,h=I[g]*S,c=1;c<=e;c++)s+=O[g+=c>E?0:y],o+=M[g],a+=A[g],h+=I[g];for(v=u<<2,l=0;l<b;l++)w[v+3]=m=h*C>>>P,m>0?(m=255/m,w[v]=(s*C>>>P)*m,w[v+1]=(o*C>>>P)*m,w[v+2]=(a*C>>>P)*m):w[v]=w[v+1]=w[v+2]=0,0===u&&(k[l]=((f=l+S)<E?f:E)*y,R[l]=(f=l-e)>0?f*y:0),d=u+k[l],p=u+R[l],s+=O[d]-O[p],o+=M[d]-M[p],a+=A[d]-A[p],h+=I[d]-I[p],v+=y<<2}}t.putImageData(x,0,0)}},e.fastBlurRGB=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!(isNaN(e)||e<1)){for(var s,o,a,h,u,l,c,f,d,p,g,v,_=t.canvas.width,m=t.canvas.height,y=t.getImageData(0,0,_,m),b=y.data,x=_-1,w=m-1,T=e+1,E=[],S=[],C=[],P=n[e],O=r[e],M=[],A=[];i-- >0;){for(v=g=0,u=0;u<m;u++){for(s=b[v]*T,o=b[v+1]*T,a=b[v+2]*T,l=1;l<=e;l++)c=v+((l>x?x:l)<<2),s+=b[c++],o+=b[c++],a+=b[c++];for(h=0;h<_;h++)E[g]=s,S[g]=o,C[g]=a,0===u&&(M[h]=((c=h+T)<x?c:x)<<2,A[h]=(c=h-e)>0?c<<2:0),f=v+M[h],d=v+A[h],s+=b[f++]-b[d++],o+=b[f++]-b[d++],a+=b[f++]-b[d++],g++;v+=_<<2}for(h=0;h<_;h++){for(s=E[p=h]*T,o=S[p]*T,a=C[p]*T,l=1;l<=e;l++)s+=E[p+=l>w?0:_],o+=S[p],a+=C[p];for(g=h<<2,u=0;u<m;u++)b[g]=s*P>>>O,b[g+1]=o*P>>>O,b[g+2]=a*P>>>O,0===h&&(M[u]=((c=u+T)<w?c:w)*_,A[u]=(c=u-e)>0?c*_:0),f=h+M[u],d=h+A[u],s+=E[f]-E[d],o+=S[f]-S[d],a+=C[f]-C[d],g+=_<<2}}t.putImageData(y,0,0)}};var n=[1,57,41,21,203,34,97,73,227,91,149,62,105,45,39,137,241,107,3,173,39,71,65,238,219,101,187,87,81,151,141,133,249,117,221,209,197,187,177,169,5,153,73,139,133,127,243,233,223,107,103,99,191,23,177,171,165,159,77,149,9,139,135,131,253,245,119,231,224,109,211,103,25,195,189,23,45,175,171,83,81,79,155,151,147,9,141,137,67,131,129,251,123,30,235,115,113,221,217,53,13,51,50,49,193,189,185,91,179,175,43,169,83,163,5,79,155,19,75,147,145,143,35,69,17,67,33,65,255,251,247,243,239,59,29,229,113,111,219,27,213,105,207,51,201,199,49,193,191,47,93,183,181,179,11,87,43,85,167,165,163,161,159,157,155,77,19,75,37,73,145,143,141,35,138,137,135,67,33,131,129,255,63,250,247,61,121,239,237,117,29,229,227,225,111,55,109,216,213,211,209,207,205,203,201,199,197,195,193,48,190,47,93,185,183,181,179,178,176,175,173,171,85,21,167,165,41,163,161,5,79,157,78,154,153,19,75,149,74,147,73,144,143,71,141,140,139,137,17,135,134,133,66,131,65,129,1],r=[0,9,10,10,14,12,14,14,16,15,16,15,16,15,15,17,18,17,12,18,16,17,17,19,19,18,19,18,18,19,19,19,20,19,20,20,20,20,20,20,15,20,19,20,20,20,21,21,21,20,20,20,21,18,21,21,21,21,20,21,17,21,21,21,22,22,21,22,22,21,22,21,19,22,22,19,20,22,22,21,21,21,22,22,22,18,22,22,21,22,22,23,22,20,23,22,22,23,23,21,19,21,21,21,23,23,23,22,23,23,21,23,22,23,18,22,23,20,22,23,23,23,21,22,20,22,21,22,24,24,24,24,24,22,21,24,23,23,24,21,24,23,24,22,24,24,22,24,24,22,23,24,24,24,20,23,22,23,24,24,24,24,24,24,24,23,21,23,22,23,24,24,24,22,24,24,24,23,22,24,24,25,23,25,25,23,24,25,25,24,22,25,25,25,24,23,24,25,25,25,25,25,25,25,25,25,25,25,25,23,25,23,24,25,25,25,25,25,25,25,25,25,24,22,25,25,23,25,25,20,24,25,24,25,25,22,24,25,24,25,24,25,25,24,25,25,25,25,22,25,25,25,24,25,24,25,18]},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.stackBlurRGBA=function(t,e){if(!(isNaN(e)||e<1)){e|=0;var i,n,a,h,u,l,c,f,d,p,g,v,_,m,y,b,x,w,T,E,S,C,P,O,M=t.canvas.width,A=t.canvas.height,I=t.getImageData(0,0,M,A),k=I.data,R=e+e+1,L=M-1,D=A-1,N=e+1,F=N*(N+1)/2,j=new o,B=null,U=j;for(a=1;a<R;a++)U=U.next=new o,a===N&&(B=U);U.next=j;var z=null,V=null;c=l=0;var X=r[e],q=s[e];for(n=0;n<A;n++){for(b=x=w=T=f=d=p=g=0,v=N*(E=k[l]),_=N*(S=k[l+1]),m=N*(C=k[l+2]),y=N*(P=k[l+3]),f+=F*E,d+=F*S,p+=F*C,g+=F*P,U=j,a=0;a<N;a++)U.r=E,U.g=S,U.b=C,U.a=P,U=U.next;for(a=1;a<N;a++)h=l+((L<a?L:a)<<2),f+=(U.r=E=k[h])*(O=N-a),d+=(U.g=S=k[h+1])*O,p+=(U.b=C=k[h+2])*O,g+=(U.a=P=k[h+3])*O,b+=E,x+=S,w+=C,T+=P,U=U.next;for(z=j,V=B,i=0;i<M;i++)k[l+3]=P=g*X>>q,0!==P?(P=255/P,k[l]=(f*X>>q)*P,k[l+1]=(d*X>>q)*P,k[l+2]=(p*X>>q)*P):k[l]=k[l+1]=k[l+2]=0,f-=v,d-=_,p-=m,g-=y,v-=z.r,_-=z.g,m-=z.b,y-=z.a,h=c+((h=i+e+1)<L?h:L)<<2,f+=b+=z.r=k[h],d+=x+=z.g=k[h+1],p+=w+=z.b=k[h+2],g+=T+=z.a=k[h+3],z=z.next,v+=E=V.r,_+=S=V.g,m+=C=V.b,y+=P=V.a,b-=E,x-=S,w-=C,T-=P,V=V.next,l+=4;c+=M}for(i=0;i<M;i++){for(x=w=T=b=d=p=g=f=0,v=N*(E=k[l=i<<2]),_=N*(S=k[l+1]),m=N*(C=k[l+2]),y=N*(P=k[l+3]),f+=F*E,d+=F*S,p+=F*C,g+=F*P,U=j,a=0;a<N;a++)U.r=E,U.g=S,U.b=C,U.a=P,U=U.next;for(u=M,a=1;a<=e;a++)l=u+i<<2,f+=(U.r=E=k[l])*(O=N-a),d+=(U.g=S=k[l+1])*O,p+=(U.b=C=k[l+2])*O,g+=(U.a=P=k[l+3])*O,b+=E,x+=S,w+=C,T+=P,U=U.next,a<D&&(u+=M);for(l=i,z=j,V=B,n=0;n<A;n++)k[3+(h=l<<2)]=P=g*X>>q,P>0?(P=255/P,k[h]=(f*X>>q)*P,k[h+1]=(d*X>>q)*P,k[h+2]=(p*X>>q)*P):k[h]=k[h+1]=k[h+2]=0,f-=v,d-=_,p-=m,g-=y,v-=z.r,_-=z.g,m-=z.b,y-=z.a,h=i+((h=n+N)<D?h:D)*M<<2,f+=b+=z.r=k[h],d+=x+=z.g=k[h+1],p+=w+=z.b=k[h+2],g+=T+=z.a=k[h+3],z=z.next,v+=E=V.r,_+=S=V.g,m+=C=V.b,y+=P=V.a,b-=E,x-=S,w-=C,T-=P,V=V.next,l+=M}t.putImageData(I,0,0)}},e.stackBlurRGB=function(t,e){if(!(isNaN(e)||e<1)){e|=0;var i,n,a,h,u,l,c,f,d,p,g,v,_,m,y,b,x,w,T,E,S=t.canvas.width,C=t.canvas.height,P=t.getImageData(0,0,S,C),O=P.data,M=e+e+1,A=S-1,I=C-1,k=e+1,R=k*(k+1)/2,L=new o,D=null,N=L;for(a=1;a<M;a++)N=N.next=new o,a===k&&(D=N);N.next=L;var F=null,j=null;c=l=0;var B=r[e],U=s[e];for(n=0;n<C;n++){for(m=y=b=f=d=p=0,g=k*(x=O[l]),v=k*(w=O[l+1]),_=k*(T=O[l+2]),f+=R*x,d+=R*w,p+=R*T,N=L,a=0;a<k;a++)N.r=x,N.g=w,N.b=T,N=N.next;for(a=1;a<k;a++)h=l+((A<a?A:a)<<2),f+=(N.r=x=O[h])*(E=k-a),d+=(N.g=w=O[h+1])*E,p+=(N.b=T=O[h+2])*E,m+=x,y+=w,b+=T,N=N.next;for(F=L,j=D,i=0;i<S;i++)O[l]=f*B>>U,O[l+1]=d*B>>U,O[l+2]=p*B>>U,f-=g,d-=v,p-=_,g-=F.r,v-=F.g,_-=F.b,h=c+((h=i+e+1)<A?h:A)<<2,f+=m+=F.r=O[h],d+=y+=F.g=O[h+1],p+=b+=F.b=O[h+2],F=F.next,g+=x=j.r,v+=w=j.g,_+=T=j.b,m-=x,y-=w,b-=T,j=j.next,l+=4;c+=S}for(i=0;i<S;i++){for(y=b=m=d=p=f=0,g=k*(x=O[l=i<<2]),v=k*(w=O[l+1]),_=k*(T=O[l+2]),f+=R*x,d+=R*w,p+=R*T,N=L,a=0;a<k;a++)N.r=x,N.g=w,N.b=T,N=N.next;for(u=S,a=1;a<=e;a++)l=u+i<<2,f+=(N.r=x=O[l])*(E=k-a),d+=(N.g=w=O[l+1])*E,p+=(N.b=T=O[l+2])*E,m+=x,y+=w,b+=T,N=N.next,a<I&&(u+=S);for(l=i,F=L,j=D,n=0;n<C;n++)O[h=l<<2]=f*B>>U,O[h+1]=d*B>>U,O[h+2]=p*B>>U,f-=g,d-=v,p-=_,g-=F.r,v-=F.g,_-=F.b,h=i+((h=n+k)<I?h:I)*S<<2,f+=m+=F.r=O[h],d+=y+=F.g=O[h+1],p+=b+=F.b=O[h+2],F=F.next,g+=x=j.r,v+=w=j.g,_+=T=j.b,m-=x,y-=w,b-=T,j=j.next,l+=S}t.putImageData(P,0,0)}};var r=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],s=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],o=function t(){n(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=function(t){function e(i,s){n(this,e);var o=r(this,t.call(this,i,s));return o.blurFilter=null,o.setupBlurFilter(),o}return s(e,t),e.prototype.setupBlurFilter=function(){this.blurFilter=new PIXI.filters.BlurFilter,this.blurFilter.blur=0,this.source.filters=[this.blurFilter]},e.prototype.applyTint=function(){this.source.tint=this.tintColor.toHex()},o(e,[{key:"blur",get:function(){return this.blurFilter.blur},set:function(t){var e=+t;e=isNaN(e)||e<0?0:e,this.blurFilter.blur=e}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(i(79)).default);e.default=a},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.MeshMovement=void 0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(i(20)),a=n(i(172)),h=i(19);e.MeshMovement=function(){function t(e){r(this,t),this.mesh=e,this.timer={x:0,y:0},this.originVertices=e.vertices.slice(),this.deformer={name:"none",func:a.default.none},this.speed={x:0,y:0},this.range={x:0,y:0}}return t.prototype.update=function(t){this._makeTransition(t),this._updateTimers(t),this.deformer.func.call(this)},t.prototype.reset=function(t){this.originVertices=t.slice()},t.prototype.getState=function(){return{movement:this.movement,xRange:this.xRange,yRange:this.yRange,xPace:this.xPace,yPace:this.yPace}},t.prototype.setState=function(t){t&&(this.movement=t.movement,this.xRange=t.xRange,this.yRange=t.yRange,this.xPace=t.xPace,this.yPace=t.yPace)},t.prototype.transitTo=function(t,e,i,n){if(t){var r=new o.default(this,e,i,n);r.tween("movement",t.movement),r.tween("xRange",t.xRange),r.tween("yRange",t.yRange),r.tween("xSpeed",(0,h.convertSpeedPace)(t.xPace)),r.tween("ySpeed",(0,h.convertSpeedPace)(t.yPace))}},t.prototype._makeTransition=function(t){this.__transition&&this.__transition.tick(t)},t.prototype._updateTimers=function(t){this.timer.x+=t*this.speed.x,this.timer.y+=t*this.speed.y},s(t,[{key:"movement",get:function(){return this.deformer.name},set:function(t){var e=a.default[t];if("function"!=typeof e)return this.deformer={name:t,func:a.default.none},this.timer.x=0,void(this.timer.y=0);this.deformer={name:t,func:e}}},{key:"xRange",get:function(){return this.range.x},set:function(t){this.range.x=t||0}},{key:"yRange",get:function(){return this.range.y},set:function(t){this.range.y=t||0}},{key:"xSpeed",get:function(){return this.speed.x},set:function(t){this.speed.x=t||0}},{key:"ySpeed",get:function(){return this.speed.y},set:function(t){this.speed.y=t||0}},{key:"xPace",get:function(){return(0,h.convertSpeedPace)(this.speed.x)},set:function(t){this.speed.x=(0,h.convertSpeedPace)(t)}},{key:"yPace",get:function(){return(0,h.convertSpeedPace)(this.speed.y)},set:function(t){this.speed.y=(0,h.convertSpeedPace)(t)}}]),t}()},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var r=n(i(173)),s=n(i(174)),o=n(i(175)),a={none:r.default,shake:o.default,wave:s.default};e.default=a},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){for(var t=this.mesh.vertices.length,e=1;e<t;e+=2){var i=n*r.y*(this.originVertices[e-1]/this.mesh.width),s=n*r.x*(this.originVertices[e]/this.mesh.height);this.mesh.vertices[e-1]=this.originVertices[e-1]+this.range.x*Math.sin(this.timer.x+s),this.mesh.vertices[e]=this.originVertices[e]+this.range.y*Math.sin(this.timer.y+i)}};var n=2*Math.PI,r={x:6,y:6}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){for(var t=this.mesh.vertices.length-1,e=0;e<t;e+=2)this.mesh.vertices[e]=this.originVertices[e]+this.range.x*Math.sin(this.timer.x+e),this.mesh.vertices[e+1]=this.originVertices[e+1]+this.range.y*Math.cos(this.timer.y+e)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(82)),h=n(i(178)),u=function(t){function e(i,n){r(this,e);var o=s(this,t.call(this,i,n));return o.noMaskColor="rgba(0,0,0,0)",o}return o(e,t),e.prototype.prepareMetaballizer=function(){this.metaballizer=new h.default(this.maskContext),this.metaballizer.registerBalls(this.bubbles)},e.prototype.appendMask=function(t){this.isApplied=!0,this.maskSprite=this._createMask(t),this.maskSprite.width=this.width,this.maskSprite.height=this.height},e.prototype.setupEmptyMask=function(){this.cleanupMask()},e.prototype.refreshMask=function(){this.maskSprite&&this.maskSprite.texture.update()},e}(a.default);e.default=u},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=n(i(33)),u=n(i(20)),l={minSize:.15,maxSize:.3},c=function(t){function e(i,n,o,a,h){r(this,e);var u=s(this,t.call(this,i,n,a,h));return u._isHidding=!1,u._radiusCoeff=o||1,u._radiusSize=u._radiusCoeff*u._baseRadius,u._prepareCache(),u}return o(e,t),e.prototype.update=function(e){this._pivot.update(e),t.prototype.update.call(this,e)},e.prototype.render=function(t){t.beginPath();var e=t.createRadialGradient(this.x,this.y,this._radiusSize,this.x,this.y,2*this._radiusSize);e.addColorStop(0,"rgba(255,255,255,1)"),e.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=e,t.arc(this.x,this.y,2*this._radiusSize,0,2*Math.PI),t.fill()},e.prototype.hideSlowly=function(){this._isHidding=!0},e.prototype.changeMovement=function(){},e.prototype.addModifiers=function(){},e.prototype.removeModifiers=function(){},e.prototype.getState=function(){return{size:this.size,pivot:this.pivot.getState(),bubble:t.prototype.getState.call(this)}},e.prototype.setState=function(e){e&&(e.hasOwnProperty("size")&&(this.size=e.size),t.prototype.setState.call(this,e.bubble),this.pivot.setState(e.pivot))},e.prototype.transitTo=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments[3];if(t){"function"==typeof this.pivot.transitTo&&this.pivot.transitTo(t.pivot,e,i);var r=new u.default(this,e,i,n);r.tween("size",t.size);for(var s in t.bubble)t.bubble.hasOwnProperty(s)&&("initRotation"===s?r.tweenRotation(s,t.bubble[s],100):r.tween(s,t.bubble[s]))}},e.prototype.getBaseRadius=function(){return this._baseRadius},e.prototype._prepareCache=function(){var t=4*this._radiusSize,e=document.createElement("canvas");e.height=t,e.width=t,this.gradientContext=e.getContext("2d"),this._cacheGradient()},e.prototype._updateCache=function(){var t=4*this._radiusSize,e=this.gradientContext.canvas;e.height=t,e.width=t,this.gradientContext.clearRect(0,0,t,t),this._cacheGradient()},e.prototype._cacheGradient=function(){this.gradientContext.beginPath();var t=this.gradientContext.createRadialGradient(this.x,this.y,this._radiusSize,this.x,this.y,2*this._radiusSize);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(1,"rgba(255,255,255,0)"),this.gradientContext.fillStyle=t,this.gradientContext.arc(this.x,this.y,2*this._radiusSize,0,2*Math.PI),this.gradientContext.fill()},e.getRandom=function(t,i){var n=2*Math.random()*Math.PI,r=new h.default(t,i,1,n),s=Math.PI+n;return new e(r,i,l.minSize+(l.maxSize-l.minSize)*Math.random(),0,s)},a(e,[{key:"radius",get:function(){return this._radiusSize}},{key:"size",get:function(){return 100*this._radiusCoeff},set:function(t){this._radiusCoeff=(t||0)/100,this._radiusSize=this._radiusCoeff*this._baseRadius}},{key:"pivot",get:function(){return this._pivot}}]),e}(h.default);e.default=c},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return new h.Point({angle:t*u,length:e})}function s(t,e){var i=t.bounds.width/2,n=e.bounds.width/2;if(0===i||0===n)return null;var s=t.position,o=e.position,a=s.getDistance(o);if(a>(i+n)*f||a<=Math.abs(i-n))return null;var u=0,p=0;a<i+n&&(u=Math.acos((i*i+a*a-n*n)/(2*i*a)),p=Math.acos((n*n+a*a-i*i)/(2*n*a)));var g=o.subtract(s).getAngleInRadians(),v=Math.acos((i-n)/a),_=g+u+(v-u)*d,m=g-u-(v-u)*d,y=g+Math.PI-p-(Math.PI-p-v)*d,b=g-Math.PI+p+(Math.PI-p-v)*d,x=s.add(r(_,i)),w=s.add(r(m,i)),T=o.add(r(y,n)),E=o.add(r(b,n)),S=i+n,C=Math.min(d*c,x.subtract(T).length/S);i*=C*=Math.min(1,2*a/(i+n)),n*=C;var P=new h.Path({segments:[x,T,E,w],style:t.style,closed:!0}),O=P.segments;return O[0].handleOut=r(_-l,i),O[1].handleIn=r(y+l,n),O[2].handleOut=r(b-l,n),O[3].handleIn=r(m+l,i),P}function o(t){for(var e=[],i=0;i<t.length;i++){var n=t[i],r=new h.Path.Circle({center:[n.x,n.y],radius:n.radius});e.push(r)}return e}function a(t,e){for(var i=[],n=0,r=t.length;n<r;n++)for(var o=n-1;o>=0;o--){var a=s(t[n],t[o],e);a&&i.push(a)}return i}e.__esModule=!0;var h=i(179),u=180/Math.PI,l=Math.PI/2,c=2.4,f=1.1,d=1,p=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white";n(this,t),this.balls=[],this.setup(e.canvas,i)}return t.prototype.setup=function(t,e){h.paper.setup(t),h.project.currentStyle={fillColor:e,strokeColor:e};new h.Path.Rectangle({from:[0,0],to:[t.width,t.height]});this.maskGroup=new h.Group,this.maskGroup.blendMode="destination-out"},t.prototype.registerBalls=function(t){this.balls=t||[]},t.prototype.render=function(){this.maskGroup.removeChildren();var t=o(this.balls),e=a(t);this.maskGroup.addChildren(e),this.maskGroup.addChildren(t),h.view.draw()},t}();e.default=p},function(t,e,i){var n,r,s,o=function(a,h){var u=(a=a||i(180)).window,l=a.document,c=new function(){function t(t,n,r,s,h){function u(i,u){"string"==typeof(u=u||(u=o(n,i))&&(u.get?u:u.value))&&"#"===u[0]&&(u=t[u.substring(1)]||u);var c,f="function"==typeof u,d=u,p=h||f&&!u.base?u&&u.get?i in t:t[i]:null;h&&p||(f&&p&&(u.base=p),f&&!1!==s&&(c=i.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(l[c[3].toLowerCase()+c[4]]=c[2]),d&&!f&&d.get&&"function"==typeof d.get&&e.isPlainObject(d)||(d={value:d,writable:!0}),(o(t,i)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=r?r:!c),a(t,i,d))}var l={};if(n){for(var c in n)n.hasOwnProperty(c)&&!i.test(c)&&u(c);for(var c in l){var f=l[c],d=t["set"+f],p=t["get"+f]||d&&t["is"+f];!p||!0!==s&&0!==p.length||u(c,{get:p,set:d})}}return t}function e(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];i&&c(this,i)}return this}var i=/^(statics|enumerable|beans|preserve)$/,n=[],r=n.slice,s=Object.create,o=Object.getOwnPropertyDescriptor,a=Object.defineProperty,u=n.forEach||function(t,e){for(var i=0,n=this.length;i<n;i++)t.call(e,this[i],i,this)},l=function(t,e){for(var i in this)this.hasOwnProperty(i)&&t.call(e,this[i],i,this)},c=Object.assign||function(t){for(var e=1,i=arguments.length;e<i;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t},f=function(t,e,i){if(t){var n=o(t,"length");(n&&"number"==typeof n.value?u:l).call(t,e,i=i||t)}return i};return t(e,{inject:function(e){if(e){var i=!0===e.statics?e:e.statics,n=e.beans,r=e.preserve;i!==e&&t(this.prototype,e,e.enumerable,n,r),t(this,i,null,n,r)}for(var s=1,o=arguments.length;s<o;s++)this.inject(arguments[s]);return this},extend:function(){for(var e,i,n,r=this,o=0,h=arguments.length;o<h&&(!e||!i);o++)n=arguments[o],e=e||n.initialize,i=i||n.prototype;return e=e||function(){r.apply(this,arguments)},i=e.prototype=i||s(this.prototype),a(i,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:e,set:e,inject:function(){for(var e=0,i=arguments.length;e<i;e++){var n=arguments[e];n&&t(this,n,n.enumerable,n.beans,n.preserve)}return this},extend:function(){var t=s(this);return t.inject.apply(t,arguments)},each:function(t,e){return f(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:c,each:f,create:s,define:a,describe:o,clone:function(t){return c(new t.constructor,t)},isPlainObject:function(t){var i=null!=t&&t.constructor;return i&&(i===Object||i===e||"Object"===i.name)},pick:function(t,e){return t!==h?t:e},slice:function(t,e,i){return r.call(t,e,i)}}})};t.exports=c,c.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+("number"===i?g.instance.number(t):"string"===i?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return c.importJSON(t,this)},exportJSON:function(t){return c.exportJSON(this,t)},toJSON:function(){return c.serialize(this)},set:function(t,e){return t&&c.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),i=e.prototype._class;return i&&!c.exports[i]&&(c.exports[i]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!c.equals(t[n],e[n]))return!1}else{var i=Object.keys(t),n=i.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var r=i[n];if(!e.hasOwnProperty(r)||!c.equals(t[r],e[r]))return!1}}return!0}return!1},read:function(t,e,i,n){if(this===c){var r=this.peek(t,e);return t.__index++,r}var s=this.prototype,o=s._readIndex,a=e||o&&t.__index||0,u=t.length,l=t[a];if(n=n||u-a,l instanceof this||i&&i.readNull&&null==l&&n<=1)return o&&(t.__index=a+1),l&&i&&i.clone?l.clone():l;if(l=c.create(s),o&&(l.__read=!0),l=l.initialize.apply(l,a>0||a+n<u?c.slice(t,a,a+n):t)||l,o){t.__index=a+l.__read;var f=l.__filtered;f&&(t.__filtered=f,l.__filtered=h),l.__read=h}return l},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,i,n){for(var r,s=[],o=e||0,a=n?o+n:t.length,h=o;h<a;h++)s.push(Array.isArray(r=t[h])?this.read(r,0,i):this.read(t,h,i,1));return s},readNamed:function(t,e,i,n,r){var s=this.getNamed(t,e),o=s!==h;if(o){var a=t.__filtered;a||((a=t.__filtered=c.create(t[0])).__unfiltered=t[0]),a[e]=h}var u=o?[s]:t;return this.read(u,i,n,r)},getNamed:function(t,e){var i=t[0];if(t._hasObject===h&&(t._hasObject=1===t.length&&c.isPlainObject(i)),t._hasObject)return e?i[e]:t.__filtered||i},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,i,n){function r(n){if(!(i&&n in i||s&&n in s)){var r=e[n];r!==h&&(t[n]=r)}}var s;if(n){for(var o,a={},u=0,l=n.length;u<l;u++)(o=n[u])in e&&(r(o),a[o]=!0);s=a}return Object.keys(e.__unfiltered||e).forEach(r),t},isPlainValue:function(t,e){return c.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,i,n){e=e||{};var r,s=!n;if(s&&(e.formatter=new g(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){var i="#"+t._id,n=this.references[i];if(!n){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[i]=r,n=this.references[i]=[i]}return n}}),t&&t._serialize){r=t._serialize(e,n);var o=t._class;!o||t._compactSerialize||!s&&i||r[0]===o||r.unshift(o)}else if(Array.isArray(t)){r=[];for(var a=0,h=t.length;a<h;a++)r[a]=c.serialize(t[a],e,i,n)}else if(c.isPlainObject(t)){r={};for(var u=Object.keys(t),a=0,h=u.length;a<h;a++){var l=u[a];r[l]=c.serialize(t[l],e,i,n)}}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&n.length>0?[["dictionary",n.definitions],r]:r},deserialize:function(t,e,i,n,r){var s=t,o=!i,a=o&&t&&t.length&&"dictionary"===t[0][0];if(i=i||{},Array.isArray(t)){var h=t[0],u="dictionary"===h;if(1==t.length&&/^#/.test(h))return i.dictionary[h];s=[];for(var l=(h=c.exports[h])?1:0,f=t.length;l<f;l++)s.push(c.deserialize(t[l],e,i,u,a));if(h){var d=s;e?s=e(h,d,o||r):(s=c.create(h.prototype),h.apply(s,d))}}else if(c.isPlainObject(t)){s={},n&&(i.dictionary=s);for(var p in t)s[p]=c.deserialize(t[p],e,i)}return a?s[1]:s},exportJSON:function(t,e){var i=c.serialize(t,e);return e&&0==e.asString?i:JSON.stringify(i)},importJSON:function(t,e){return c.deserialize("string"==typeof t?JSON.parse(t):t,function(t,i,n){var r=n&&e&&e.constructor===t,s=r?e:c.create(t.prototype);if(1===i.length&&s instanceof P&&(r||!(s instanceof M))){var o=i[0];c.isPlainObject(o)&&(o.insert=!1)}return(r?s.set:t).apply(s,i),r&&(e=null),s})},splice:function(t,e,i,n){var r=e&&e.length,s=i===h;(i=s?t.length:i)>t.length&&(i=t.length);for(u=0;u<r;u++)e[u]._index=i+u;if(s)return t.push.apply(t,e),[];var o=[i,n];e&&o.push.apply(o,e);for(var a=t.splice.apply(t,o),u=0,l=a.length;u<l;u++)a[u]._index=h;for(var u=i+r,l=t.length;u<l;u++)t[u]._index=u;return a},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var f={on:function(t,e){if("string"!=typeof t)c.each(t,function(t,e){this.on(e,t)},this);else{var i=this._eventTypes,n=i&&i[t],r=this._callbacks=this._callbacks||{};-1===(r=r[t]=r[t]||[]).indexOf(e)&&(r.push(e),n&&n.install&&1===r.length&&n.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var i,n=this._eventTypes,r=n&&n[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||-1!==(i=s.indexOf(e))&&1===s.length?(r&&r.uninstall&&r.uninstall.call(this,t),delete this._callbacks[t]):-1!==i&&s.splice(i,1)),this}c.each(t,function(t,e){this.off(e,t)},this)},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var i=this._callbacks&&this._callbacks[t];if(!i)return!1;var n=c.slice(arguments,1),r=e&&e.target&&!e.currentTarget;i=i.slice(),r&&(e.currentTarget=this);for(var s=0,o=i.length;s<o;s++)if(0==i[s].apply(this,n)){e&&e.stop&&e.stop();break}return r&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,i=this._callbacks,n=t?"install":"uninstall";if(e)for(var r in i)if(i[r].length>0){var s=e[r],o=s&&s[n];o&&o.call(this,r)}},statics:{inject:function t(e){var i=e._events;if(i){var n={};c.each(i,function(t,i){var r="string"==typeof t,s=r?t:i,o=c.capitalize(s),a=s.substring(2).toLowerCase();n[a]=r?{}:t,s="_"+s,e["get"+o]=function(){return this[s]},e["set"+o]=function(t){var e=this[s];e&&this.off(a,e),t&&this.on(a,t),this[s]=t}}),e._eventTypes=n}return t.base.apply(this,arguments)}}},d=c.extend({_class:"PaperScope",initialize:function t(){o=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var i=at.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:ht.nativeModes},at.release(i)}if(!this.agent){var n=a.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(n)||[])[0],s="darwin"===r?"mac":r,h=e.agent=e.browser={platform:s};s&&(h[s]=!0),n.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,i,n,r){if(!h.chrome){var s="opera"===e?n:/^(node|trident)$/.test(e)?r:i;h.version=s,h.versionNumber=parseFloat(s),e="trident"===e?"msie":e,h.name=e,h[e]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.11.5",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){o.PaperScript.execute(t,this,e),J.updateFocus()},install:function(t){var e=this;c.each(["project","view","tool"],function(i){c.define(t,i,{configurable:!0,get:function(){return e[i]}})});for(var i in this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return o=this,this.project=new C(t),this},createCanvas:function(t,e){return at.getCanvas(t,e)},activate:function(){o=this},clear:function(){for(var t=this.projects,e=this.tools,i=t.length-1;i>=0;i--)t[i].remove();for(i=e.length-1;i>=0;i--)e[i].remove()},remove:function(){this.clear(),delete d._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),p=c.extend(f,{initialize:function(t){this._scope=o,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),g=c.extend({initialize:function(t){this.precision=c.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,i){return this.number(t)+(i||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});g.instance=new g;var v=new function(){function t(t,e,i){return t<e?e:t>i?i:t}function e(t,e,i){function n(t){var e=134217729*t,i=t-e+e;return[i,t-i]}var r=e*e-t*i,o=e*e+t*i;if(3*s(r)<o){var a=n(t),h=n(e),u=n(i),l=e*e,c=t*i;r=l-c+(h[0]*h[0]-l+2*h[0]*h[1]+h[1]*h[1]-(a[0]*u[0]-c+a[0]*u[1]+a[1]*u[0]+a[1]*u[1]))}return r}function i(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?a(2,-Math.round(h(t))):0}var n=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],r=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],s=Math.abs,o=Math.sqrt,a=Math.pow,h=Math.log2||function(t){return Math.log(t)*Math.LOG2E};return{EPSILON:1e-12,MACHINE_EPSILON:1.12e-16,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(o(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:t,integrate:function(t,e,i,s){for(var o=n[s-2],a=r[s-2],h=.5*(i-e),u=h+e,l=0,c=s+1>>1,f=1&s?a[l++]*t(u):0;l<c;){var d=h*o[l];f+=a[l++]*(t(u+d)+t(u-d))}return h*f},findRoot:function(e,i,n,r,o,a,h){for(var u=0;u<a;u++){var l=e(n),c=l/i(n),f=n-c;if(s(c)<h){n=f;break}l>0?(o=n,n=f<=r?.5*(r+o):f):(r=n,n=f>=o?.5*(r+o):f)}return t(n,r,o)},solveQuadratic:function(n,r,a,h,u,l){var c,f=1/0;if(s(n)<1e-12){if(s(r)<1e-12)return s(a)<1e-12?-1:0;c=-a/r}else{var d=e(n,r*=-.5,a);if(d&&s(d)<1.12e-16){var p=i(s(n),s(r),s(a));p&&(d=e(n*=p,r*=p,a*=p))}if(d>=-1.12e-16){var g=d<0?0:o(d),v=r+(r<0?-g:g);0===v?f=-(c=a/n):(c=v/n,f=a/v)}}var _=0,m=null==u,y=u-1e-12,b=l+1e-12;return isFinite(c)&&(m||c>y&&c<b)&&(h[_++]=m?c:t(c,u,l)),f!==c&&isFinite(f)&&(m||f>y&&f<b)&&(h[_++]=m?f:t(f,u,l)),_},solveCubic:function(e,n,r,h,u,l,c){function f(t){var i=e*(d=t);_=(i+(p=i+n))*d+(g=p*d+r),m=g*d+h}var d,p,g,_,m,y=i(s(e),s(n),s(r),s(h));if(y&&(e*=y,n*=y,r*=y,h*=y),s(e)<1e-12)e=n,p=r,g=h,d=1/0;else if(s(h)<1e-12)p=n,g=r,d=0;else{f(-n/e/3);var b=m/e,x=a(s(b),1/3),w=b<0?-1:1,T=-_/e,E=T>0?1.324717957244746*Math.max(x,o(T)):x,S=d-w*E;if(S!==d){do{f(S),S=0===_?d:d-m/_/(1+1.12e-16)}while(w*S>w*d);s(e)*d*d>s(h/d)&&(p=((g=-h/d)-r)/d)}}var C=v.solveQuadratic(e,p,g,u,l,c),P=null==l;return isFinite(d)&&(0===C||C>0&&d!==u[0]&&d!==u[1])&&(P||d>l-1e-12&&d<c+1e-12)&&(u[C++]=P?d:t(d,l,c)),C}}},_={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},m=c.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,r=0;if("number"===i){var s="number"==typeof e;this._set(t,s?e:t),n&&(r=s?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(r=null===t?1:0);else{var o="string"===i?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"x"in o?this._set(o.x||0,o.y||0):"width"in o?this._set(o.width||0,o.height||0):"angle"in o?(this._set(o.length||0,0),this.setAngle(o.angle||0)):(this._set(0,0),r=0)}return n&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new m(this.x,this.y)},toString:function(){var t=g.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();v.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=m.read(arguments),e=this.getLength()*t.getLength();if(v.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(i<-1?-1:i>1?1:i)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=m.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=m.read(arguments),e=t.x-this.x,i=t.y-this.y,n=e*e+i*i;return c.read(arguments)?n:Math.sqrt(n)},normalize:function(t){t===h&&(t=1);var e=this.getLength(),i=0!==e?t/e:0,n=new m(this.x*i,this.y*i);return i>=0&&(n._angle=this._angle),n},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,n=Math.sin(t),r=Math.cos(t);return i=new m(i.x*r-i.y*n,i.x*n+i.y*r),e?i.add(e):i},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=m.read(arguments);return new m(this.x+t.x,this.y+t.y)},subtract:function(){var t=m.read(arguments);return new m(this.x-t.x,this.y-t.y)},multiply:function(){var t=m.read(arguments);return new m(this.x*t.x,this.y*t.y)},divide:function(){var t=m.read(arguments);return new m(this.x/t.x,this.y/t.y)},modulo:function(){var t=m.read(arguments);return new m(this.x%t.x,this.y%t.y)},negate:function(){return new m(-this.x,-this.y)},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var t=m.read(arguments),e=c.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=m.read(arguments);return m.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=m.read(arguments);return m.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=v.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=m.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=m.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=m.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new m(t.x*e,t.y*e)},statics:{min:function(){var t=m.read(arguments),e=m.read(arguments);return new m(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=m.read(arguments),e=m.read(arguments);return new m(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new m(Math.random(),Math.random())},isCollinear:function(t,e,i,n){return Math.abs(t*n-e*i)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))},isOrthogonal:function(t,e,i,n){return Math.abs(t*i+e*n)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+n*n))}}},c.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new m(e(this.x),e(this.y))}},{})),y=m.extend({initialize:function(t,e,i,n){this._x=t,this._y=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),b=c.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t,n=this.__read,r=0;if("number"===i){var s="number"==typeof e;this._set(t,s?e:t),n&&(r=s?2:1)}else if("undefined"===i||null===t)this._set(0,0),n&&(r=null===t?1:0);else{var o="string"===i?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(o)?this._set(+o[0],+(o.length>1?o[1]:o[0])):"width"in o?this._set(o.width||0,o.height||0):"x"in o?this._set(o.x||0,o.y||0):(this._set(0,0),r=0)}return n&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new b(this.width,this.height)},toString:function(){var t=g.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=b.read(arguments);return new b(this.width+t.width,this.height+t.height)},subtract:function(){var t=b.read(arguments);return new b(this.width-t.width,this.height-t.height)},multiply:function(){var t=b.read(arguments);return new b(this.width*t.width,this.height*t.height)},divide:function(){var t=b.read(arguments);return new b(this.width/t.width,this.height/t.height)},modulo:function(){var t=b.read(arguments);return new b(this.width%t.width,this.height%t.height)},negate:function(){return new b(-this.width,-this.height)},isZero:function(){var t=v.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new b(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new b(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new b(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new b(e(this.width),e(this.height))}},{})),x=b.extend({initialize:function(t,e,i,n){this._width=t,this._height=e,this._owner=i,this._setter=n},_set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),w=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,i,n){var r,s=typeof t;if("number"===s?(this._set(t,e,i,n),r=4):"undefined"===s||null===t?(this._set(0,0,0,0),r=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),r=1):t.x!==h||t.width!==h?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),r=1):t.from===h&&t.to===h&&(this._set(0,0,0,0),c.filter(this,t),r=1)),r===h){var o,a,u=m.readNamed(arguments,"from"),l=c.peek(arguments),f=u.x,d=u.y;if(l&&l.x!==h||c.hasNamed(arguments,"to")){var p=m.readNamed(arguments,"to");o=p.x-f,a=p.y-d,o<0&&(f=p.x,o=-o),a<0&&(d=p.y,a=-a)}else{var g=b.read(arguments);o=g.width,a=g.height}this._set(f,d,o,a),r=arguments.__index;var v=arguments.__filtered;v&&(this.__filtered=v)}return this.__read&&(this.__read=r),this},set:"#initialize",_set:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(t){var e=c.isPlainValue(t)?w.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=g.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?m:y)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=m.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?b:x)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=b.read(arguments),e=this._sx,i=this._sy,n=t.width,r=t.height;e&&(this.x+=(this.width-n)*e),i&&(this.y+=(this.height-r)*i),this.width=n,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?m:y)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=m.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==h||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(m.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(){var t=w.read(arguments),e=c.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=w.read(arguments),e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new w(e,i,n-e,r-i)},unite:function(){var t=w.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new w(e,i,n-e,r-i)},include:function(){var t=m.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new w(e,i,n-e,r-i)},expand:function(){var t=b.read(arguments),e=t.width,i=t.height;return new w(this.x-e/2,this.y-i/2,this.width+e,this.height+i)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===h?t:e)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),n=/^[RL]/.test(i);e>=4&&(t[1]+=n?"Y":"X");var r=t[n?0:1],s=t[n?1:0],o="get"+r,a="get"+s,h="set"+r,u="set"+s,l="set"+i;this["get"+i]=function(t){return new(t?m:y)(this[o](),this[a](),this,l)},this[l]=function(){var t=m.read(arguments);this[h](t.x),this[u](t.y)}},{beans:!0})),T=w.extend({initialize:function(t,e,i,n,r,s){this._set(t,e,i,n,!0),this._owner=r,this._setter=s},_set:function(t,e,i,n,r){return this._x=t,this._y=e,this._width=i,this._height=n,r||this._owner[this._setter](this),this}},new function(){var t=w.prototype;return c.each(["x","y","width","height"],function(t){var e=c.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}},c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),E=c.extend({_class:"Matrix",initialize:function t(e,i){var n=arguments.length,r=!0;if(n>=6?this._set.apply(this,arguments):1===n||2===n?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,i):Array.isArray(e)?this._set.apply(this,i?e.concat([i]):e):r=!1:n?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,i,n,r,s,o){return this._a=t,this._b=e,this._c=i,this._d=n,this._tx=r,this._ty=s,o||this._changed(),this},_serialize:function(t,e){return c.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new E(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=g.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var i=this._owner;return!!i&&(i.transform(null,!0,c.pick(t,!0),e),this.isIdentity())},translate:function(){var t=m.read(arguments),e=t.x,i=t.y;return this._tx+=e*this._a+i*this._c,this._ty+=e*this._b+i*this._d,this._changed(),this},scale:function(){var t=m.read(arguments),e=m.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=m.read(arguments,1),i=e.x,n=e.y,r=Math.cos(t),s=Math.sin(t),o=i-i*r+n*s,a=n-i*s-n*r,h=this._a,u=this._b,l=this._c,c=this._d;return this._a=r*h+s*l,this._b=r*u+s*c,this._c=-s*h+r*l,this._d=-s*u+r*c,this._tx+=o*h+a*l,this._ty+=o*u+a*c,this._changed(),this},shear:function(){var t=m.read(arguments),e=m.read(arguments,0,{readNull:!0});e&&this.translate(e);var i=this._a,n=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*n,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=m.read(arguments),e=m.read(arguments,0,{readNull:!0}),i=Math.PI/180,n=new m(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(n,e)},append:function(t,e){if(t){var i=this._a,n=this._b,r=this._c,s=this._d,o=t._a,a=t._c,h=t._b,u=t._d,l=t._tx,c=t._ty;this._a=o*i+h*r,this._c=a*i+u*r,this._b=o*n+h*s,this._d=a*n+u*s,this._tx+=l*i+c*r,this._ty+=l*n+c*s,e||this._changed()}return this},prepend:function(t,e){if(t){var i=this._a,n=this._b,r=this._c,s=this._d,o=this._tx,a=this._ty,h=t._a,u=t._c,l=t._b,c=t._d,f=t._tx,d=t._ty;this._a=h*i+u*n,this._c=h*r+u*s,this._b=l*i+c*n,this._d=l*r+c*s,this._tx=h*o+u*a+f,this._ty=l*o+c*a+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,i=this._c,n=this._d,r=this._tx,s=this._ty,o=t*n-e*i,a=null;return o&&!isNaN(o)&&isFinite(r)&&isFinite(s)&&(this._a=n/o,this._b=-e/o,this._c=-i/o,this._d=t/o,this._tx=(i*s-n*r)/o,this._ty=(e*r-t*s)/o,a=this),a},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new E(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,i){return arguments.length<3?this._transformPoint(m.read(arguments)):this._transformCoordinates(t,e,i)},_transformPoint:function(t,e,i){var n=t.x,r=t.y;return e||(e=new m),e._set(n*this._a+r*this._c+this._tx,n*this._b+r*this._d+this._ty,i)},_transformCoordinates:function(t,e,i){for(var n=0,r=2*i;n<r;n+=2){var s=t[n],o=t[n+1];e[n]=s*this._a+o*this._c+this._tx,e[n+1]=s*this._b+o*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,i=t.y,n=e+t.width,r=i+t.height,s=[e,i,n,i,n,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,i){for(var n=this._transformCorners(t),r=n.slice(0,2),s=r.slice(),o=2;o<8;o++){var a=n[o],h=1&o;a<r[h]?r[h]=a:a>s[h]&&(s[h]=a)}return e||(e=new w),e._set(r[0],r[1],s[0]-r[0],s[1]-r[1],i)},inverseTransform:function(){return this._inverseTransform(m.read(arguments))},_inverseTransform:function(t,e,i){var n=this._a,r=this._b,s=this._c,o=this._d,a=this._tx,h=this._ty,u=n*o-r*s,l=null;if(u&&!isNaN(u)&&isFinite(a)&&isFinite(h)){var c=t.x-this._tx,f=t.y-this._ty;e||(e=new m),l=e._set((c*o-f*s)/u,(f*n-c*r)/u,i)}return l},decompose:function(){var t,e,i,n=this._a,r=this._b,s=this._c,o=this._d,a=n*o-r*s,h=Math.sqrt,u=Math.atan2,l=180/Math.PI;if(0!==n||0!==r){var c=h(n*n+r*r);t=Math.acos(n/c)*(r>0?1:-1),e=[c,a/c],i=[u(n*s+r*o,c*c),0]}else if(0!==s||0!==o){var f=h(s*s+o*o);t=Math.asin(s/f)*(o>0?1:-1),e=[a/f,f],i=[0,u(n*s+r*o,f*f)]}else t=0,i=e=[0,0];return{translation:this.getTranslation(),rotation:t*l,scaling:new m(e),skewing:new m(i[0]*l,i[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new m(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],function(t){var e=c.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._changed()}},{})),S=c.extend({_class:"Line",initialize:function(t,e,i,n,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=i,this._vy=n,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=i),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new m(this._px,this._py)},getVector:function(){return new m(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return S.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return S.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return S.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return m.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return m.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,i,n,r,s,o,a,h,u){h||(i-=t,n-=e,o-=r,a-=s);var l=i*a-n*o;if(!v.isZero(l)){var c=t-r,f=e-s,d=(o*f-a*c)/l,p=(i*f-n*c)/l;if(u||-1e-12<d&&d<1+1e-12&&-1e-12<p&&p<1+1e-12)return u||(d=d<=0?0:d>=1?1:d),new m(t+d*i,e+d*n)}},getSide:function(t,e,i,n,r,s,o,a){o||(i-=t,n-=e);var h=r-t,u=h*n-(s-e)*i;return!a&&v.isZero(u)&&(u=(h*i+h*i)/(i*i+n*n))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(t,e,i,n,r,s,o){return o||(i-=t,n-=e),0===i?n>0?r-t:t-r:0===n?i<0?s-e:e-s:((r-t)*n-(s-e)*i)/Math.sqrt(i*i+n*n)},getDistance:function(t,e,i,n,r,s,o){return Math.abs(S.getSignedDistance(t,e,i,n,r,s,o))}}}),C=p.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){p.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Z(null,null,this),this._view=J.create(this,t||at.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return c.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var n=this._changes;if(n&&e){var r=this._changesById,s=e._id,o=r[s];o?o.flags|=t:n.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new M({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:k,match:function(i){var n=i._definition,r=n._id;return e[r]||(e[r]=!0,t.push(n)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var i in t){var n=t[i],r=n._selection;1&r&&n.isInserted()?e.push(n):r||this._updateSelection(n)}return e},_updateSelection:function(t){var e=t._id,i=this._selectionItems;t._selection?i[e]!==t&&(this._selectionCount++,i[e]=t):i[e]===t&&(this._selectionCount--,delete i[e])},selectAll:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(h,t)},insertLayer:function(t,e){if(e instanceof M){e._remove(!1,!0),c.splice(this._children,[e],t,0),e._setProject(this,!0);var i=e._name;i&&e.setName(i),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,i){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(h,new M(P.NO_INSERT),!0)).insertChild(t,e),i&&e.activate&&e.activate(),e},getItems:function(t){return P._getItems(this,t)},getItem:function(t){return P._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return c.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var i=e[t];if(i){for(var n in i){var r=i[n];for(var s in e){var o=e[s];o&&o!=i&&delete o[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,r=new c({offset:new m(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new E],updateMatrix:!0}),s=0,o=n.length;s<o;s++)n[s].draw(t,r);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var a=this._selectionItems,h=this._scope.settings.handleSize,u=this._updateVersion;for(var l in a)a[l]._drawSelection(t,e,h,a,u);t.restore()}}}),P=c.extend(f,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=c.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new E,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var i=t&&c.isPlainObject(t),n=i&&!0===t.internal,r=this._matrix=new E,s=i&&t.project||o.project,a=o.settings;return this._id=n?null:_.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&a.applyMatrix,e&&r.translate(e),r._owner=this,this._style=new Z(s._currentStyle,this,s),n||i&&0==t.insert||!a.insertItems&&(!i||!0!==t.insert)?this._setProject(s):(i&&t.parent||s)._insertItem(h,this,!0),i&&t!==P.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){function i(i){for(var s in i){var o=r[s];c.equals(o,"leading"===s?1.2*i.fontSize:i[s])||(n[s]=c.serialize(o,t,"data"!==s,e))}}var n={},r=this;return i(this._serializeFields),this instanceof O||i(this._style._defaults),[this._class,n]},_changed:function(t){var e=this._symbol,i=this._parent||e,n=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=h),i&&40&t&&P._clearBoundsCache(i),2&t&&P._clearBoundsCache(this),n&&n._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var i=e._children,n=e._namedChildren;(n[t]=n[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||h,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},c.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=c.capitalize(t),i="_"+t,n={locked:128,visible:137};this["get"+e]=function(){return this[i]},this["set"+e]=function(e){e!=this[i]&&(this[i]=e,this._changed(n[t]||129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,i=t.length;e<i;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var i=0,n=t.length;i<n;i++)if(!t[i].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var i=0,n=e.length;i<n;i++)e[i].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,i=t?m:y;if(!e){var n=this._pivot;e=this._position=n?this._matrix._transformPoint(n):this.getBounds().getCenter(!0)}return new i(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(m.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new y(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=m.read(arguments,0,{clone:!0,readNull:!0}),this._position=h}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var i=e||t instanceof E,n=c.set({},i?e:t,this._boundsOptions);n.stroke&&!this.getStrokeScaling()||(n.cacheItem=this);var r=this._getCachedBounds(i&&t,n).rect;return arguments.length?r:new T(r.x,r.y,r.width,r.height,this,"setBounds")},setBounds:function(){var t=w.read(arguments),e=this.getBounds(),i=this._matrix,n=new E,r=t.getCenter();n.translate(r),t.width==e.width&&t.height==e.height||(i.isInvertible()||(i.set(i._backup||(new E).translate(i.getTranslation())),e=this.getBounds()),n.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),n.translate(-r.x,-r.y),this.transform(n)},_getBounds:function(t,e){var i=this._children;return i&&i.length?(P._updateBoundsCache(this,e.cacheItem),P._getBounds(i,t,e)):new w},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,i){t=t&&t._orNullIfIdentity();var n=e.internal&&!i,r=e.cacheItem,s=n?null:this._matrix._orNullIfIdentity(),o=r&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,n),a=this._bounds;if(P._updateBoundsCache(this._parent||this._symbol,r),o&&a&&o in a)return{rect:(f=a[o]).rect.clone(),nonscaling:f.nonscaling};var h=this._getBounds(t||s,e),u=h.rect||h,l=this._style,c=h.nonscaling||l.hasStroke()&&!l.getStrokeScaling();if(o){a||(this._bounds=a={});var f=a[o]={rect:u.clone(),nonscaling:c,internal:n}}return{rect:u,nonscaling:c}},_getStrokeMatrix:function(t,e){var i=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,n=i?i.getViewMatrix().invert():t;return n&&n._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var i=e._id,n=t._boundsCache=t._boundsCache||{ids:{},list:[]};n.ids[i]||(n.list.push(e),n.ids[i]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=h;for(var i=0,n=e.list,r=n.length;i<r;i++){var s=n[i];s!==t&&(s._bounds=s._position=h,s._boundsCache&&P._clearBoundsCache(s))}}},_getBounds:function(t,e,i){var n=1/0,r=-n,s=n,o=r,a=!1;i=i||{};for(var h=0,u=t.length;h<u;h++){var l=t[h];if(l._visible&&!l.isEmpty()){var c=l._getCachedBounds(e&&e.appended(l._matrix),i,!0),f=c.rect;n=Math.min(f.x,n),s=Math.min(f.y,s),r=Math.max(f.x+f.width,r),o=Math.max(f.y+f.height,o),c.nonscaling&&(a=!0)}}return{rect:isFinite(n)?new w(n,s,r-n,o-s):new w,nonscaling:a}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var i=this._decomposed;this.rotate(t-e),i&&(i.rotation=t,this._decomposed=i)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new y(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=m.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var i=this.getRotation(),n=this._decomposed,r=new E,s=this.getPosition(!0);r.translate(s),i&&r.rotate(i),r.scale(e.x/t.x,e.y/t.y),i&&r.rotate(-i),r.translate(s.negate()),this.transform(r),n&&(n.scaling=e,this._decomposed=n)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,i=this._project._updateVersion;if(e&&e._updateVersion!==i&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var n=this._parent;n&&e.prepend(n.getGlobalMatrix(!0)),e._updateVersion=i}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var i=this._children,n=0,r=i&&i.length;n<r;n++)i[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var i=this._children,n=0,r=i&&i.length;n<r;n++)i[n]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof M)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return c.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(P.NO_INSERT),i=this._children,n=c.pick(t?t.insert:h,t===h||!0===t),r=c.pick(t?t.deep:h,!0);i&&e.copyAttributes(this),i&&!r||e.copyContent(this),i||e.copyAttributes(this),n&&e.insertAbove(this);var s=this._name,o=this._parent;if(s&&o){for(var i=o._children,a=s,u=1;i[s];)s=a+" "+u++;s!==a&&e.setName(s)}return e},copyContent:function(t){for(var e=t._children,i=0,n=e&&e.length;i<n;i++)this.addChild(e[i].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,r=i.length;n<r;n++){var s=i[n];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,a=t._name;this._data=o?c.clone(o):null,a&&this.setName(a)},rasterize:function(t,e){var i=this.getStrokeBounds(),n=(t||this.getView().getResolution())/72,r=i.getTopLeft().floor(),s=i.getBottomRight().ceil(),o=new b(s.subtract(r)),a=new I(P.NO_INSERT);if(!o.isZero()){var u=at.getCanvas(o.multiply(n)),l=u.getContext("2d"),f=(new E).scale(n).translate(r.negate());l.save(),f.applyToContext(l),this.draw(l,new c({matrices:[f]})),l.restore(),a.setCanvas(u)}return a.transform((new E).translate(r.add(o.divide(2))).scale(1/n)),(e===h||e)&&a.insertAbove(this),a},contains:function(){return!!this._contains(this._matrix._inverseTransform(m.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var i=e.length-1;i>=0;i--)if(e[i].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new U.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof P&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(m.read(arguments),L.getOptions(arguments))}function e(){var t=m.read(arguments),e=L.getOptions(arguments),i=[];return this._hitTest(t,c.set({all:i},e)),i}function i(t,e,i,n){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var o=r[s],a=o!==n&&o._hitTest(t,e,i);if(a&&!e.all)return a}return null}return C.inject({hitTest:t,hitTestAll:e,_hitTest:i}),{hitTest:t,hitTestAll:e,_hitTestChildren:i}},{_hitTest:function(t,e,i){function n(t){return t&&d&&!d(t)&&(t=null),t&&e.all&&e.all.push(t),t}function r(e,i){var n=i?u["get"+i]():p.getPosition();if(t.subtract(n).divide(h).length<=1)return new L(e,p,{name:i?c.hyphenate(i):e,point:n})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var s=this._matrix,o=i?i.appended(s):this.getGlobalMatrix().prepend(this.getView()._matrix),a=Math.max(e.tolerance,1e-12),h=e._tolerancePadding=new b(U._getStrokePadding(a,s._shiftless().invert()));if(!(t=s._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(t))return null;var u,l,f=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==c.hyphenate(this._class)||e.class&&!(this instanceof e.class)),d=e.match,p=this,g=e.position,v=e.center,_=e.bounds;if(f&&this._parent&&(g||v||_)){if((v||_)&&(u=this.getInternalBounds()),!(l=g&&r("position")||v&&r("center","Center"))&&_)for(var m=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],y=0;y<8&&!l;y++)l=r("bounds",m[y]);l=n(l)}return l||(l=this._hitTestChildren(t,e,o)||f&&n(this._hitTestSelf(t,e,o,this.getStrokeScaling()?null:o._shiftless().invert()))||null),l&&l.point&&(l.point=s.transform(l.point)),l},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new L("fill",this)},matches:function(t,e){function i(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],s=e[n];if(c.isPlainObject(r)&&c.isPlainObject(s)){if(!i(r,s))return!1}else if(!c.equals(r,s))return!1}return!0}var n=typeof t;if("object"===n){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var s=/^(empty|editable)$/.test(t)?this["is"+c.capitalize(t)]():"type"===t?c.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;s=this._class}if("function"==typeof e)return!!e(s);if(e){if(e.test)return e.test(s);if(c.isPlainObject(e))return i(e,s)}return c.equals(s,e)},getItems:function(t){return P._getItems(this,t,this._matrix)},getItem:function(t){return P._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,i,n,r,s){if(!r){var o="object"==typeof i&&i,a=o&&o.overlapping,h=o&&o.inside,u=(m=a||h)&&w.read([m]);r={items:[],recursive:o&&!1!==o.recursive,inside:!!h,overlapping:!!a,rect:u,path:a&&new U.Rectangle({rectangle:u,insert:!1})},o&&(i=c.filter({},i,{recursive:!0,inside:!0,overlapping:!0}))}var l=e._children,f=r.items;n=(u=r.rect)&&(n||new E);for(var d=0,p=l&&l.length;d<p;d++){var g=l[d],v=n&&n.appended(g._matrix),_=!0;if(u){var m=g.getBounds(v);if(!u.intersects(m))continue;u.contains(m)||r.overlapping&&(m.contains(u)||r.path.intersects(g,v))||(_=!1)}if(_&&g.matches(i)&&(f.push(g),s))break;if(!1!==r.recursive&&t(g,i,v,r,s),s&&f.length>0)break}return f}}},{importJSON:function(t){var e=c.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(h,t)},insertChild:function(t,e){var i=e?this.insertChildren(t,[e]):null;return i&&i[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var i=this._children;if(i&&e&&e.length>0){for(var n={},r=(e=c.slice(e)).length-1;r>=0;r--){var s=(u=e[r])&&u._id;!u||n[s]?e.splice(r,1):(u._remove(!1,!0),n[s]=!0)}c.splice(i,e,t,0);for(var o=this._project,a=o._changes,r=0,h=e.length;r<h;r++){var u=e[r],l=u._name;u._parent=this,u._setProject(o,!0),l&&u.setName(l),a&&u._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var i=t&&t._getOwner(),n=t!==this&&i?this:null;return n&&(n._remove(!1,!0),i._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(h,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(h,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var i=e[0].reduce(t);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,i=t._namedChildren,n=this._name,r=i[n],s=r?r.indexOf(this):-1;-1!==s&&(e[n]==this&&delete e[n],r.splice(s,1),r.length?e[n]=r[0]:delete i[n])}},_remove:function(t,e){var i=this._getOwner(),n=this._project,r=this._index;return!!i&&(this._name&&this._removeNamed(),null!=r&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(i._children,null,r,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&i._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=c.pick(e,this._children.length);for(var i=c.splice(this._children,null,t,e-t),n=i.length-1;n>=0;n--)i[n]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var i=e(this),n=e(t),r=0,s=Math.min(i.length,n.length);r<s;r++)if(i[r]!=n[r])return i[r]._index<n[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},c.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?c:m).read(arguments),n=m.read(arguments,0,{readNull:!0});return this.transform((new E)[t](i,n||this.getPosition(!0)))}},{translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,i,n){var r=this._matrix,s=t&&!t.isIdentity(),o=(e||this._applyMatrix)&&(!r.isIdentity()||s||e&&i&&this._children);if(!s&&!o)return this;if(s){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var a=this._style,h=a.getFillColor(!0),u=a.getStrokeColor(!0);h&&h.transform(t),u&&u.transform(t)}if(o&&(o=this._transformContent(r,i,n))){var l=this._pivot;l&&r._transformPoint(l,l,!0),r.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,f=this._position;(s||o)&&this._changed(9);var d=s&&c&&t.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var p in c){var g=c[p];if(g.nonscaling)delete c[p];else if(o||!g.internal){var v=g.rect;t._transformBounds(v,v)}}this._bounds=c;var _=c[this._getBoundsCacheKey(this._boundsOptions||{})];_&&(this._position=_.rect.getCenter(!0))}else s&&f&&this._pivot&&(this._position=t._transformPoint(f,f));return this},_transformContent:function(t,e,i){var n=this._children;if(n){for(var r=0,s=n.length;r<s;r++)n[r].transform(t,!0,e,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(m.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(m.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(m.read(arguments))},localToParent:function(){return this._matrix._transformPoint(m.read(arguments))},fitBounds:function(t,e){t=w.read(arguments);var i=this.getBounds(),n=i.height/i.width,r=t.height/t.width,s=(e?n>r:n<r)?t.width/i.width:t.height/i.height,o=new w(new m,new b(i.width*s,i.height*s));o.setCenter(t.getCenter()),this.setBounds(o)}}),{_setStyles:function(t,e,i){var n=this._style,r=this._matrix;if(n.hasFill()&&(t.fillStyle=n.getFillColor().toCanvasStyle(t,r)),n.hasStroke()){t.strokeStyle=n.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=n.getStrokeWidth();var s=n.getStrokeJoin(),a=n.getStrokeCap(),h=n.getMiterLimit();if(s&&(t.lineJoin=s),a&&(t.lineCap=a),h&&(t.miterLimit=h),o.support.nativeDash){var u=n.getDashArray(),l=n.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))}}if(n.hasShadow()){var c=e.pixelRatio||1,f=i._shiftless().prepend((new E).scale(c,c)),d=f.transform(new m(n.getShadowBlur(),0)),p=f.transform(this.getShadowOffset());t.shadowColor=n.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=p.x,t.shadowOffsetY=p.y}},draw:function(t,e,i){var n=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var r=e.matrices,s=e.viewMatrix,o=this._matrix,a=r[r.length-1].appended(o);if(a.isInvertible()){s=s?s.appended(a):a,r.push(a),e.updateMatrix&&(a._updateVersion=n,this._globalMatrix=a);var h,u,l,c=this._blendMode,f=this._opacity,d="normal"===c,p=ht.nativeModes[c],g=d&&1===f||e.dontStart||e.clip||(p||d&&f<1)&&this._canComposite(),v=e.pixelRatio||1;if(!g){var _=this.getStrokeBounds(s);if(!_.width||!_.height)return;l=e.offset,u=e.offset=_.getTopLeft().floor(),h=t,t=at.getContext(_.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var m=i?i.appended(o):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,y=!g&&e.clipItem,b=!m||y;if(g?(t.globalAlpha=f,p&&(t.globalCompositeOperation=c)):b&&t.translate(-u.x,-u.y),b&&(g?o:s).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(v,0,0,v,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,s,m),t.restore(),r.pop(),e.clip&&!e.dontFinish&&t.clip(),g||(ht.process(c,t,h,f,u.subtract(l).multiply(v)),at.release(t),e.offset=l)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof z)return e._isUpdated(t);var i=this._updateVersion===t;return!i&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,i=!0),i},_drawSelection:function(t,e,i,n,r){var s=this._selection,o=1&s,a=2&s||o&&this._selectBounds,h=4&s;if(this._drawSelected||(o=!1),(o||a||h)&&this._isUpdated(r)){var u,l=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),f=i/2;if(t.strokeStyle=t.fillStyle=l?l.toCanvasStyle(t):"#009dec",o&&this._drawSelected(t,c,n),h){var d=this.getPosition(!0),p=d.x,g=d.y;t.beginPath(),t.arc(p,g,f,0,2*Math.PI,!0),t.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],_=f,m=i+1,y=0;y<4;y++){var b=v[y],x=b[0],w=b[1];t.moveTo(p+x*_,g+w*_),t.lineTo(p+x*m,g+w*m),t.stroke()}}if(a){var T=c._transformCorners(this.getInternalBounds());t.beginPath();for(y=0;y<8;y++)t[y?"lineTo":"moveTo"](T[y],T[++y]);t.closePath(),t.stroke();for(y=0;y<8;y++)t.fillRect(T[y]-f,T[++y]-f,i,i)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],function(t){this["removeOn"+c.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,n=this._project,r=n._removeSets=n._removeSets||{};r[i]=r[i]||{},r[i][this._id]=this}return this}})),O=P.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),1026&e&&(this._clipItem=h)},_getClipItem:function(){var t=this._clipItem;if(t===h){t=null;for(var e=this._children,i=0,n=e.length;i<n;i++)if(e[i]._clipMask){t=e[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,i){var n=this._getClipItem();return n?n._getCachedBounds(e&&e.appended(n._matrix),c.set({},i,{stroke:!1})):t.base.call(this,e,i)},_hitTestChildren:function t(e,i,n){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,i,n,r)},_draw:function(t,e){var i=e.clip,n=!i&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),i?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,o=r.length;s<o;s++){var a=r[s];a!==n&&a.draw(t,e)}}}),M=O.extend({_class:"Layer",initialize:function(){O.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),A=P.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&c.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new x(t.width,t.height,this,"setSize")},setSize:function(){var t=b.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,i=t.width,n=t.height;"rectangle"===e?this._radius.set(b.min(this._radius,t.divide(2))):"circle"===e?(i=n=(i+n)/2,this._radius=i/2):"ellipse"===e&&this._radius._set(i/2,n/2),this._size._set(i,n),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new x(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;i=2*t;this._radius=t,this._size._set(i,i)}else if(t=b.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){var i=b.max(this._size,t.multiply(2));this._size.set(i)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(U[c.capitalize(this._type)])({center:new m,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),o.settings.applyMatrix&&e.setApplyMatrix(!0),(t===h||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,i,n){var r=this._style,s=r.hasFill(),o=r.hasStroke(),a=e.dontFinish||e.clip,h=!n;if(s||o||a){var u=this._type,l=this._radius,c="circle"===u;if(e.dontStart||t.beginPath(),h&&c)t.arc(0,0,l,0,2*Math.PI,!0);else{var f=c?l:l.width,d=c?l:l.height,p=this._size,g=p.width,v=p.height;if(h&&"rectangle"===u&&0===f&&0===d)t.rect(-g/2,-v/2,g,v);else{var _=g/2,m=v/2,y=.44771525016920644,b=f*y,x=d*y,w=[-_,-m+d,-_,-m+x,-_+b,-m,-_+f,-m,_-f,-m,_-b,-m,_,-m+x,_,-m+d,_,m-d,_,m-x,_-b,m,_-f,m,-_+f,m,-_+b,m,-_,m-x,-_,m-d];n&&n.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),_!==f&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),m!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),_!==f&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}a||!s&&!o||(this._setStyles(t,e,i),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var i=new w(this._size).setCenter(0,0),n=this._style,r=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(i=t._transformBounds(i)),r?i.expand(U._getStrokePadding(r,this._getStrokeMatrix(t,e))):i}},new function(){function t(t,e,i){var n=t._radius;if(!n.isZero())for(var r=t._size.divide(2),s=1;s<=4;s++){var o=new m(s>1&&s<4?-1:1,s>2?-1:1),a=o.multiply(r),h=a.subtract(o.multiply(n));if(new w(i?a.add(o.multiply(i)):a,h).contains(e))return{point:h,quadrant:s}}}function e(t,e,i,n){var r=t.divide(e);return(!n||r.isInQuadrant(n))&&r.subtract(r.normalize()).multiply(e).divide(i).length<=1}return{_contains:function e(i){if("rectangle"===this._type){var n=t(this,i);return n?i.subtract(n.point).divide(this._radius).getLength()<=1:e.base.call(this,i)}return i.divide(this.size).getLength()<=.5},_hitTestSelf:function i(n,r,s,o){var a=!1,h=this._style,u=r.stroke&&h.hasStroke(),l=r.fill&&h.hasFill();if(u||l){var c=this._type,f=this._radius,d=u?h.getStrokeWidth()/2:0,p=r._tolerancePadding.add(U._getStrokePadding(d,!h.getStrokeScaling()&&o));if("rectangle"===c){var g=p.multiply(2),v=t(this,n,g);if(v)a=e(n.subtract(v.point),f,p,v.quadrant);else{var _=new w(this._size).setCenter(0,0),m=_.expand(g),y=_.expand(g.negate());a=m._containsPoint(n)&&!y._containsPoint(n)}}else a=e(n,f,p)}return a?new L(u?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,i,n,r){var s=new A(c.getNamed(r),e);return s._type=t,s._size=i,s._radius=n,s}return{Circle:function(){var e=m.readNamed(arguments,"center"),i=c.readNamed(arguments,"radius");return t("circle",e,new b(2*i),i,arguments)},Rectangle:function(){var e=w.readNamed(arguments,"rectangle"),i=b.min(b.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),i,arguments)},Ellipse:function(){var e=A._readEllipse(arguments),i=e.radius;return t("ellipse",e.center,i.multiply(2),i,arguments)},_readEllipse:function(t){var e,i;if(c.hasNamed(t,"radius"))e=m.readNamed(t,"center"),i=b.readNamed(t,"radius");else{var n=w.readNamed(t,"rectangle");e=n.getCenter(!0),i=n.getSize(!0).divide(2)}return{center:e,radius:i}}}}}),I=P.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,e){if(!this._initialize(t,e!==h&&m.read(arguments,1))){var i="string"==typeof t?l.getElementById(t):t;i?this.setImage(i):this.setSource(t)}this._size||(this._size=new b,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,i=t._canvas;if(e)this._setImage(e);else if(i){var n=at.getCanvas(t._size);n.getContext("2d").drawImage(i,0,0),this._setImage(n)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new x(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=b.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(at.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&at.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new m(0,0).transform(t),i=new m(1,0).transform(t).subtract(e),n=new m(0,1).transform(t).subtract(e);return new b(72/i.getLength(),72/n.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=i.getView(),n=t&&t.type||"load";e&&i.responds(n)&&(o=e._scope,i.emit(n,new tt(t)))}var i=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&$.add(t,{load:function(n){i._setImage(t),e(n)},error:e})},_setImage:function(t){this._canvas&&at.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new b(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=at.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){at.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new a.Image,i=this._crossOrigin;i&&(e.crossOrigin=i),e.src=t,this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=w.read(arguments),e=at.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=w.read(arguments),e=new I(P.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(t){var e=m.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;if(t?t instanceof B?(i=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new w(t):"x"in t&&(e=new w(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var n=Math.min(e.width,32),r=Math.min(e.height,32),s=I._sampleContext;s?s.clearRect(0,0,33,33):s=I._sampleContext=at.getContext(new b(32)),s.save();var o=(new E).scale(n/e.width,r/e.height).translate(-e.x,-e.y);o.applyToContext(s),i&&i.draw(s,new c({clip:!0,matrices:[o]})),this._matrix.applyToContext(s);var a=this.getElement(),h=this._size;a&&s.drawImage(a,-h.width/2,-h.height/2),s.restore();for(var u=s.getImageData(.5,.5,Math.ceil(n),Math.ceil(r)).data,l=[0,0,0],f=0,d=0,p=u.length;d<p;d+=4){var g=u[d+3];f+=g,g/=255,l[0]+=u[d]*g,l[1]+=u[d+1]*g,l[2]+=u[d+2]*g}for(d=0;d<3;d++)l[d]/=f;return f?H.read(l):null},getPixel:function(){var t=m.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new H("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=m.read(arguments),e=H.read(arguments),i=e._convert("rgb"),n=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),o=s.data;o[0]=255*i[0],o[1]=255*i[1],o[2]=255*i[2],o[3]=null!=n?255*n:255,r.putImageData(s,t.x,t.y)},createImageData:function(){var t=b.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=w.read(arguments);return t.isEmpty()&&(t=new w(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=m.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var i=new w(this._size).setCenter(0,0);return t?t._transformBounds(i):i},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new L("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),k=P.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==h&&m.read(arguments,1))||this.setDefinition(t instanceof R?t:new R(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(t),e)},_hitTestSelf:function(t,e,i){var n=this._definition._item._hitTest(t,e,i);return n&&(n.item=this),n},_draw:function(t,e){this._definition._item.draw(t,e)}}),R=c.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=_.get(),this.project=o.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return c.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&P._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new m),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new k(this,t)},clone:function(){return new R(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),L=c.extend({_class:"HitResult",initialize:function(t,e,i){this.type=t,this.item=e,i&&this.inject(i)},statics:{getOptions:function(t){var e=t&&c.read(t);return c.set({type:null,tolerance:o.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),D=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,i,n,r,s){var o,a,u,l,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(o=t.point,a=t.handleIn,u=t.handleOut,l=t.selection):(o=t,a=e,u=i,l=n):(o=[t,e],a=i!==h?[i,n]:null,u=r!==h?[r,s]:null)),new N(o,this,"_point"),new N(a,this,"_handleIn"),new N(u,this,"_handleOut"),l&&this.setSelection(l)},_serialize:function(t,e){var i=this._point,n=this._selection,r=n||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return n&&r.push(n),c.serialize(r,t,!0,e)},_changed:function(t){var e=this._path;if(e){var i,n=e._curves,r=this._index;n&&(t&&t!==this._point&&t!==this._handleIn||!(i=r>0?n[r-1]:e._closed?n[n.length-1]:null)||i._changed(),t&&t!==this._point&&t!==this._handleOut||!(i=n[r])||i._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(m.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(m.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(m.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,i=this._path;this._selection=t=t||0,i&&t!==e&&(i._updateSelection(this,e,t),i._changed(129))},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==h?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new j(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,i){var n=t||{},r=n.type,s=n.factor,o=this.getPrevious(),a=this.getNext(),u=(o||this)._point,l=this._point,c=(a||this)._point,f=u.getDistance(l),d=l.getDistance(c);if(r&&"catmull-rom"!==r){if("geometric"!==r)throw new Error("Smoothing method '"+r+"' not supported.");if(o&&a){var p=u.subtract(c),g=s===h?.4:s,v=g*f/(f+d);e||this.setHandleIn(p.multiply(v)),i||this.setHandleOut(p.multiply(v-g))}}else{var _=s===h?.5:s,y=Math.pow(f,_),b=y*y,x=Math.pow(d,_),w=x*x;if(!e&&o){var T=2*w+3*x*y+b,E=3*x*(x+y);this.setHandleIn(0!==E?new m((w*u._x+T*l._x-b*c._x)/E-l._x,(w*u._y+T*l._y-b*c._y)/E-l._y):new m)}if(!i&&a){var T=2*b+3*y*x+w,E=3*y*(y+x);this.setHandleOut(0!==E?new m((b*c._x+T*l._x-w*u._x)/E-l._x,(b*c._y+T*l._y-w*u._y)/E-l._y):new m)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,i=t.clone();t.set(e),e.set(i)},reversed:function(){return new D(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new D(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,i){var n=1-i,r=i,s=t._point,o=e._point,a=t._handleIn,h=e._handleIn,u=e._handleOut,l=t._handleOut;this._point._set(n*s._x+r*o._x,n*s._y+r*o._y,!0),this._handleIn._set(n*a._x+r*h._x,n*a._y+r*h._y,!0),this._handleOut._set(n*l._x+r*u._x,n*l._y+r*u._y,!0),this._changed()},_transformCoordinates:function(t,e,i){var n=this._point,r=i&&this._handleIn.isZero()?null:this._handleIn,s=i&&this._handleOut.isZero()?null:this._handleOut,o=n._x,a=n._y,h=2;return e[0]=o,e[1]=a,r&&(e[h++]=r._x+o,e[h++]=r._y+a),s&&(e[h++]=s._x+o,e[h++]=s._y+a),t&&(t._transformCoordinates(e,e,h/2),o=e[0],a=e[1],i?(n._x=o,n._y=a,h=2,r&&(r._x=e[h++]-o,r._y=e[h++]-a),s&&(s._x=e[h++]-o,s._y=e[h++]-a)):(r||(e[h++]=o,e[h++]=a),s||(e[h++]=o,e[h++]=a))),e}}),N=m.extend({initialize:function(t,e,i){var n,r,s;if(t)if((n=t[0])!==h)r=t[1];else{var o=t;(n=o.x)===h&&(n=(o=m.read(arguments)).x),r=o.y,s=o.selected}else n=r=0;this._x=n,this._y=r,this._owner=e,e[i]=this,s&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=v.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),F=c.extend({_class:"Curve",beans:!0,initialize:function(t,e,i,n,r,s,o,a){var h,u,l,c,f,d,p=arguments.length;3===p?(this._path=t,h=e,u=i):p?1===p?"segment1"in t?(h=new D(t.segment1),u=new D(t.segment2)):"point1"in t?(l=t.point1,f=t.handle1,d=t.handle2,c=t.point2):Array.isArray(t)&&(l=[t[0],t[1]],c=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===p?(h=new D(t),u=new D(e)):4===p?(l=t,f=e,d=i,c=n):8===p&&(l=[t,e],c=[o,a],f=[i-t,n-e],d=[r-o,s-a]):(h=new D,u=new D),this._segment1=h||new D(l,null,f),this._segment2=u||new D(c,d,null)},_serialize:function(t,e){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=h},clone:function(){return new F(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return F.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,i=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(i)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(m.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(m.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(m.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(m.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return F.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;i<8;i+=2)e.push(new m(t[i],t[i+1]));return e}},{getLength:function(){return null==this._length&&(this._length=F.getLength(this.getValues(),0,1)),this._length},getArea:function(){return F.getArea(this.getValues())},getLine:function(){return new S(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new F(F.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return F.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var i=null;if(t>=1e-8&&t<=1-1e-8){var n=F.subdivide(this.getValues(),t),r=n[0],s=n[1],o=e||this.hasHandles(),a=this._segment1,h=this._segment2,u=this._path;o&&(a._handleOut._set(r[2]-r[0],r[3]-r[1]),h._handleIn._set(s[4]-s[6],s[5]-s[7]));var l=r[6],c=r[7],f=new D(new m(l,c),o&&new m(r[4]-l,r[5]-c),o&&new m(s[2]-l,s[3]-c));u?(u.insert(a._index+1,f),i=this.getNext()):(this._segment2=f,this._changed(),i=new F(f,h))}return i},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===h?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===h?.5:e?t:this.getTimeAt(t))},reversed:function(){return new F(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,i,n){var r=t._point,s=t._handleOut,o=e._handleIn,a=e._point,h=r.x,u=r.y,l=a.x,c=a.y,f=n?[h,u,h,u,l,c,l,c]:[h,u,h+s._x,u+s._y,l+o._x,c+o._y,l,c];return i&&i._transformCoordinates(f,f,4),f},subdivide:function(t,e){var i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],l=t[7];e===h&&(e=.5);var c=1-e,f=c*i+e*r,d=c*n+e*s,p=c*r+e*o,g=c*s+e*a,v=c*o+e*u,_=c*a+e*l,m=c*f+e*p,y=c*d+e*g,b=c*p+e*v,x=c*g+e*_,w=c*m+e*b,T=c*y+e*x;return[[i,n,f,d,m,y,w,T],[w,T,b,x,v,_,u,l]]},getMonoCurves:function(t,e){var i=[],n=e?0:1,r=t[n+0],s=t[n+2],o=t[n+4],a=t[n+6];if(r>=s==s>=o&&s>=o==o>=a||F.isStraight(t))i.push(t);else{var h=3*(s-o)-r+a,u=2*(r+o)-4*s,l=s-r,c=[],f=v.solveQuadratic(h,u,l,c,1e-8,1-1e-8);if(f){c.sort();var d=c[0],p=F.subdivide(t,d);i.push(p[0]),f>1&&(d=(c[1]-d)/(1-d),p=F.subdivide(p[1],d),i.push(p[0])),i.push(p[1])}else i.push(t)}return i},solveCubic:function(t,e,i,n,r,s){var o=t[e],a=t[e+2],h=t[e+4],u=t[e+6],l=0;if(!(o<i&&u<i&&a<i&&h<i||o>i&&u>i&&a>i&&h>i)){var c=3*(a-o),f=3*(h-a)-c,d=u-o-c-f;l=v.solveCubic(d,f,c,o-i,n,r,s)}return l},getTimeOf:function(t,e){var i=new m(t[0],t[1]),n=new m(t[6],t[7]);if(null===(e.isClose(i,1e-12)?0:e.isClose(n,1e-12)?1:null))for(var r=[e.x,e.y],s=[],o=0;o<2;o++)for(var a=F.solveCubic(t,o,r[o],s,0,1),h=0;h<a;h++){var u=s[h];if(e.isClose(F.getPoint(t,u),1e-7))return u}return e.isClose(i,1e-7)?0:e.isClose(n,1e-7)?1:null},getNearestTime:function(t,e){function i(i){if(i>=0&&i<=1){var n=e.getDistance(F.getPoint(t,i),!0);if(n<u)return u=n,l=i,!0}}if(F.isStraight(t)){var n=t[0],r=t[1],s=t[6]-n,o=t[7]-r,a=s*s+o*o;if(0===a)return 0;var h=((e.x-n)*s+(e.y-r)*o)/a;return h<1e-12?0:h>.999999999999?1:F.getTimeOf(t,new m(n+h*s,r+h*o))}for(var u=1/0,l=0,c=0;c<=100;c++)i(c/100);for(var f=.005;f>1e-8;)i(l-f)||i(l+f)||(f/=2);return l},getPart:function(t,e,i){var n=e>i;if(n){var r=e;e=i,i=r}return e>0&&(t=F.subdivide(t,e)[1]),i<1&&(t=F.subdivide(t,(i-e)/(1-e))[0]),n?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],h=t[6],u=t[7],l=3*r-2*i-h,c=3*s-2*n-u,f=3*o-2*h-i,d=3*a-2*u-n;return Math.max(l*l,f*f)+Math.max(c*c,d*d)<=16*e*e},getArea:function(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],h=t[7];return 3*((h-i)*(n+s)-(a-e)*(r+o)+r*(e-s)-n*(i-o)+h*(s+e/3)-a*(o+i/3))/20},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),n=[0,0],r=0;r<2;r++)F._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,i,n);return new w(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,n,r,s,o,a,h){function u(t,e){var i=t-e,n=t+e;i<o[r]&&(o[r]=i),n>a[r]&&(a[r]=n)}s/=2;var l=o[r]-s,c=a[r]+s;if(t<l||e<l||i<l||n<l||t>c||e>c||i>c||n>c)if(e<t!=e<n&&i<t!=i<n)u(t,s),u(n,s);else{var f=3*(e-i)-t+n,d=2*(t+i)-4*e,p=e-t,g=v.solveQuadratic(f,d,p,h);u(n,0);for(var _=0;_<g;_++){var m=h[_],y=1-m;1e-8<=m&&m<=1-1e-8&&u(y*y*y*t+3*y*y*m*e+3*y*m*m*i+m*m*m*n,s)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=U[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),c.each({isStraight:function(t,e,i,n){if(e.isZero()&&i.isZero())return!0;var r=n.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(i)){var s=new S(t,n);if(s.getDistance(t.add(e))<1e-7&&s.getDistance(n.add(i))<1e-7){var o=r.dot(r),a=r.dot(e)/o,h=r.dot(i)/o;return a>=0&&a<=1&&h<=0&&h>=-1}}return!1},isLinear:function(t,e,i,n){var r=n.subtract(t).divide(3);return e.equals(r)&&i.negate().equals(r)}},function(t,e){this[e]=function(e){var i=this._segment1,n=this._segment2;return t(i._point,i._handleOut,n._handleIn,n._point,e)},this.statics[e]=function(e,i){var n=e[0],r=e[1],s=e[6],o=e[7];return t(new m(n,r),new m(e[2]-n,e[3]-r),new m(e[4]-s,e[5]-o),new m(s,o),i)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new j(this,t):null},getTimeAt:function(t,e){return F.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(m.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return F.getTimeOf(this.getValues(),m.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=m.read(arguments),e=this.getValues(),i=F.getNearestTime(e,t),n=F.getPoint(e,i);return new j(this,i,n,null,t.getDistance(n))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(t,function(t){this[t+"At"]=function(e,i){var n=this.getValues();return F[t](n,i?e:F.getTimeAt(n,e))},this[t+"AtTime"]=function(e){return F[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=9*(n-s)+3*(t[6]-e),h=6*(e+s)-12*n,u=3*(n-e),l=9*(r-o)+3*(t[7]-i),c=6*(i+o)-12*r,f=3*(r-i);return function(t){var e=(a*t+h)*t+u,i=(l*t+c)*t+f;return Math.sqrt(e*e+i*i)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,i,n){if(null==e||e<0||e>1)return null;var r=t[0],s=t[1],o=t[2],a=t[3],h=t[4],u=t[5],l=t[6],c=t[7],f=v.isZero;f(o-r)&&f(a-s)&&(o=r,a=s),f(h-l)&&f(u-c)&&(h=l,u=c);var d,p,g=3*(o-r),_=3*(h-o)-g,y=l-r-g-_,b=3*(a-s),x=3*(u-a)-b,w=c-s-b-x;if(0===i)d=0===e?r:1===e?l:((y*e+_)*e+g)*e+r,p=0===e?s:1===e?c:((w*e+x)*e+b)*e+s;else{if(e<1e-8?(d=g,p=b):e>1-1e-8?(d=3*(l-h),p=3*(c-u)):(d=(3*y*e+2*_)*e+g,p=(3*w*e+2*x)*e+b),n){0===d&&0===p&&(e<1e-8||e>1-1e-8)&&(d=h-o,p=u-a);var T=Math.sqrt(d*d+p*p);T&&(d/=T,p/=T)}if(3===i){var h=6*y*e+2*_,u=6*w*e+2*x,E=Math.pow(d*d+p*p,1.5);d=0!==E?(d*u-p*h)/E:0,p=0}}return 2===i?new m(p,-d):new m(d,p)}return{statics:{classify:function(t){function e(t,e,i){var n=e!==h,r=n&&e>0&&e<1,s=n&&i>0&&i<1;return!n||(r||s)&&("loop"!==t||r&&s)||(t="arch",r=s=!1),{type:t,roots:r||s?r&&s?e<i?[e,i]:[i,e]:[r?e:i]:null}}var i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=r*(n-l)+s*(u-i)+i*l-n*u,f=3*(o*(s-n)+a*(i-r)+r*n-s*i),d=f-c,p=d-c+(i*(l-a)+n*(o-u)+u*a-l*o),g=Math.sqrt(p*p+d*d+f*f),_=0!==g?1/g:0,m=v.isZero;if(p*=_,d*=_,f*=_,m(p))return m(d)?e(m(f)?"line":"quadratic"):e("serpentine",f/(3*d));var y=3*d*d-4*p*f;if(m(y))return e("cusp",d/(2*p));var b=y>0?Math.sqrt(y/3):Math.sqrt(-y),x=2*p;return e(y>0?"serpentine":"loop",(d+b)/x,(d-b)/x)},getLength:function(i,n,r,s){if(n===h&&(n=0),r===h&&(r=1),F.isStraight(i)){var o=i;r<1&&(o=F.subdivide(o,r)[0],n/=r),n>0&&(o=F.subdivide(o,n)[1]);var a=o[6]-o[0],u=o[7]-o[1];return Math.sqrt(a*a+u*u)}return v.integrate(s||t(i),n,r,e(n,r))},getTimeAt:function(i,n,r){if(r===h&&(r=n<0?1:0),0===n)return r;var s=Math.abs,o=n>0,a=o?r:0,u=o?1:r,l=t(i),c=F.getLength(i,a,u,l),f=s(n)-c;if(s(f)<1e-12)return o?u:a;if(f>1e-12)return null;var d=n/c,p=0;return v.findRoot(function(t){return p+=v.integrate(l,r,t,e(r,t)),r=t,p-n},l,r+d,a,u,32,1e-12)},getPoint:function(t,e){return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x},getPeaks:function(t){var e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=3*n-e-3*s+t[6],h=3*e-6*n+3*s,u=-3*e+3*n,l=3*r-i-3*o+t[7],c=3*i-6*r+3*o,f=-3*i+3*r,d=[];return v.solveCubic(9*(a*a+l*l),9*(a*h+c*l),2*(h*h+c*c)+3*(u*a+f*l),u*h+c*f,d,1e-8,1-1e-8),d.sort()}}}},new function(){function t(t,e,i,n,r,s,o){var a=!o&&i.getPrevious()===r,h=!o&&i!==r&&i.getNext()===r;if(null!==n&&n>=(a?1e-8:0)&&n<=(h?1-1e-8:1)&&null!==s&&s>=(h?1e-8:0)&&s<=(a?1-1e-8:1)){var u=new j(i,n,null,o),l=new j(r,s,null,o);u._intersection=l,l._intersection=u,e&&!e(u)||j.insert(t,u,!0)}}function e(r,s,o,a,h,u,l,c,f,d,p,g,v){if(++f>=4096||++c>=40)return f;var _,m,y=s[0],b=s[1],x=s[6],w=s[7],T=S.getSignedDistance,E=T(y,b,x,w,s[2],s[3]),C=T(y,b,x,w,s[4],s[5]),P=E*C>0?.75:4/9,O=P*Math.min(0,E,C),M=P*Math.max(0,E,C),A=T(y,b,x,w,r[0],r[1]),I=T(y,b,x,w,r[2],r[3]),k=T(y,b,x,w,r[4],r[5]),R=T(y,b,x,w,r[6],r[7]),L=i(A,I,k,R),D=L[0],N=L[1];if(0===E&&0===C&&0===A&&0===I&&0===k&&0===R||null==(_=n(D,N,O,M))||null==(m=n(D.reverse(),N.reverse(),O,M)))return f;var j=d+(p-d)*_,B=d+(p-d)*m;if(Math.max(v-g,B-j)<1e-9){var U=(j+B)/2,z=(g+v)/2;t(h,u,l?a:o,l?z:U,l?o:a,l?U:z)}else if(r=F.getPart(r,_,m),m-_>.8)if(B-j>v-g){U=(j+B)/2;f=e(s,(V=F.subdivide(r,.5))[0],a,o,h,u,!l,c,f,g,v,j,U),f=e(s,V[1],a,o,h,u,!l,c,f,g,v,U,B)}else{var V=F.subdivide(s,.5),z=(g+v)/2;f=e(V[0],r,a,o,h,u,!l,c,f,g,z,j,B),f=e(V[1],r,a,o,h,u,!l,c,f,z,v,j,B)}else f=v-g>=1e-9?e(s,r,a,o,h,u,!l,c,f,g,v,j,B):e(r,s,o,a,h,u,l,c,f,j,B,g,v);return f}function i(t,e,i,n){var r,s=[0,t],o=[1/3,e],a=[2/3,i],h=[1,n],u=e-(2*t+n)/3,l=i-(t+2*n)/3;if(u*l<0)r=[[s,o,h],[s,a,h]];else{var c=u/l;r=[c>=2?[s,o,h]:c<=.5?[s,a,h]:[s,o,a,h],[s,h]]}return(u||l)<0?r.reverse():r}function n(t,e,i,n){return t[0][1]<i?r(t,!0,i):e[0][1]>n?r(e,!1,n):t[0][0]}function r(t,e,i){for(var n=t[0][0],r=t[0][1],s=1,o=t.length;s<o;s++){var a=t[s][0],h=t[s][1];if(e?h>=i:h<=i)return h===i?a:n+(i-r)*(a-n)/(h-r);n=a,r=h}return null}function s(t,e,i,n,r){var s=v.isZero;if(s(n)&&s(r)){var o=F.getTimeOf(t,new m(e,i));return null===o?[]:[o]}for(var a=Math.atan2(-r,n),h=Math.sin(a),u=Math.cos(a),l=[],c=[],f=0;f<8;f+=2){var d=t[f]-e,p=t[f+1]-i;l.push(d*u-p*h,d*h+p*u)}return F.solveCubic(l,1,0,c,0,1),c}function o(e,i,n,r,o,a,h){for(var u=i[0],l=i[1],c=s(e,u,l,i[6]-u,i[7]-l),f=0,d=c.length;f<d;f++){var p=c[f],g=F.getPoint(e,p),v=F.getTimeOf(i,g);null!==v&&t(o,a,h?r:n,h?v:p,h?n:r,h?p:v)}}function a(e,i,n,r,s,o){var a=S.intersect(e[0],e[1],e[6],e[7],i[0],i[1],i[6],i[7]);a&&t(s,o,n,F.getTimeOf(e,a),r,F.getTimeOf(i,a))}function h(i,n,r,s,h,u){var c=Math.min,f=Math.max;if(f(i[0],i[2],i[4],i[6])+1e-12>c(n[0],n[2],n[4],n[6])&&c(i[0],i[2],i[4],i[6])-1e-12<f(n[0],n[2],n[4],n[6])&&f(i[1],i[3],i[5],i[7])+1e-12>c(n[1],n[3],n[5],n[7])&&c(i[1],i[3],i[5],i[7])-1e-12<f(n[1],n[3],n[5],n[7])){var d=l(i,n);if(d)for(x=0;x<2;x++){var p=d[x];t(h,u,r,p[0],s,p[1],!0)}else{var g=F.isStraight(i),v=F.isStraight(n),_=g&&v,y=g&&!v,b=h.length;if((_?a:g||v?o:e)(y?n:i,y?i:n,y?s:r,y?r:s,h,u,y,0,0,0,1,0,1),!_||h.length===b)for(var x=0;x<4;x++){var w=x>>1,T=1&x,E=6*w,S=6*T,C=new m(i[E],i[E+1]),P=new m(n[S],n[S+1]);C.isClose(P,1e-12)&&t(h,u,r,w,s,T)}}}return h}function u(e,i,n,r){var s=F.classify(e);if("loop"===s.type){var o=s.roots;t(n,r,i,o[0],i,o[1])}return n}function l(t,e){function i(t){var e=t[6]-t[0],i=t[7]-t[1];return e*e+i*i}var n=Math.abs,r=S.getDistance,s=F.isStraight(t),o=F.isStraight(e),a=s&&o,h=i(t)<i(e),u=h?e:t,l=h?t:e,c=u[0],f=u[1],d=u[6]-c,p=u[7]-f;if(r(c,f,d,p,l[0],l[1],!0)<1e-7&&r(c,f,d,p,l[6],l[7],!0)<1e-7)!a&&r(c,f,d,p,u[2],u[3],!0)<1e-7&&r(c,f,d,p,u[4],u[5],!0)<1e-7&&r(c,f,d,p,l[2],l[3],!0)<1e-7&&r(c,f,d,p,l[4],l[5],!0)<1e-7&&(s=o=a=!0);else if(a)return null;if(s^o)return null;for(var g=[t,e],v=[],_=0;_<4&&v.length<2;_++){var y=1&_,b=1^y,x=_>>1,w=F.getTimeOf(g[y],new m(g[b][x?6:0],g[b][x?7:1]));if(null!=w){var T=y?[x,w]:[w,x];(!v.length||n(T[0]-v[0][0])>1e-8&&n(T[1]-v[0][1])>1e-8)&&v.push(T)}if(_>2&&!v.length)break}if(2!==v.length)v=null;else if(!a){var E=F.getPart(t,v[0][0],v[1][0]),C=F.getPart(e,v[0][1],v[1][1]);(n(C[2]-E[2])>1e-7||n(C[3]-E[3])>1e-7||n(C[4]-E[4])>1e-7||n(C[5]-E[5])>1e-7)&&(v=null)}return v}return{getIntersections:function(t){var e=this.getValues(),i=t&&t!==this&&t.getValues();return i?h(e,i,this,t,[]):u(e,this,[])},statics:{getOverlaps:l,getIntersections:function(t,e,i,n,r,s){var o=!e;o&&(e=t);for(var a,l,c=t.length,f=e.length,d=[],p=[],g=0;g<f;g++)d[g]=e[g].getValues(r);for(g=0;g<c;g++){var v=t[g],_=o?d[g]:v.getValues(n),m=v.getPath();m!==l&&(l=m,a=[],p.push(a)),o&&u(_,v,a,i);for(var y=o?g+1:0;y<f;y++){if(s&&a.length)return a;h(_,d[y],v,e[y],a,i)}}a=[];for(var g=0,b=p.length;g<b;g++)a.push.apply(a,p[g]);return a},getCurveLineIntersections:s}}}),j=c.extend({_class:"CurveLocation",initialize:function(t,e,i,n,r){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=i||t.getPointAtTime(e),this._overlap=n,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),i=this.getTime();0===i?t=e._segment1:1===i?t=e._segment2:null!=i&&(t=e.getPartLength(0,i)<e.getPartLength(i,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(i._time=e.getTimeOf(i._point)))return i._setCurve(e),e}var e=this._path,i=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),i=this.getIndex();if(e&&null!=i)for(var n=e.getCurves(),r=0;r<i;r++)t+=n[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),i=this.getTime();this._curveOffset=t=null!=i&&e&&e.getPartLength(0,i)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,i=t&&t.splitAtTime(this.getTime());return i&&this._setSegment(e.getLastSegment()),i},equals:function(t,e){var i=this===t;if(!i&&t instanceof j){var n=this.getCurve(),r=t.getCurve(),s=n._path;if(s===r._path){var o=Math.abs,a=o(this.getOffset()-t.getOffset()),h=!e&&this._intersection,u=!e&&t._intersection;i=(a<1e-7||s&&o(s.getLength()-a)<1e-7)&&(!h&&!u||h&&u&&h.equals(u,!0))}}return i},toString:function(){var t=[],e=this.getPoint(),i=g.instance;e&&t.push("point: "+e);var n=this.getIndex();null!=n&&t.push("index: "+n);var r=this.getTime();return null!=r&&t.push("time: "+i.number(r)),null!=this._distance&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),i=t.getCurve();return!(e.isStraight()&&i.isStraight()&&e.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){function t(t,e){var i=t.getValues(),n=F.classify(i).roots||F.getPeaks(i),r=n.length,s=e&&r>1?n[r-1]:r>0?n[0]:.5;c.push(F.getLength(i,e?s:0,e?1:s)/2)}function e(t,e,i){return e<i?t>e&&t<i:t>e||t<i}var i=this._intersection;if(!i)return!1;var n=this.getTime(),r=i.getTime(),s=n>=1e-8&&n<=1-1e-8,o=r>=1e-8&&r<=1-1e-8;if(s&&o)return!this.isTouching();var a=this.getCurve(),h=n<1e-8?a.getPrevious():a,u=i.getCurve(),l=r<1e-8?u.getPrevious():u;if(n>1-1e-8&&(a=a.getNext()),r>1-1e-8&&(u=u.getNext()),!(h&&a&&l&&u))return!1;var c=[];s||(t(h,!0),t(a,!1)),o||(t(l,!0),t(u,!1));var f=this.getPoint(),d=Math.min.apply(Math,c),p=s?a.getTangentAtTime(n):a.getPointAt(d).subtract(f),g=s?p.negate():h.getPointAt(-d).subtract(f),v=o?u.getTangentAtTime(r):u.getPointAt(d).subtract(f),_=o?v.negate():l.getPointAt(-d).subtract(f),m=g.getAngle(),y=p.getAngle(),b=_.getAngle(),x=v.getAngle();return!!(s?e(m,b,x)^e(y,b,x)&&e(m,x,b)^e(y,x,b):e(b,m,y)^e(x,m,y)&&e(b,y,m)^e(x,y,m))},hasOverlap:function(){return!!this._overlap}},c.each(F._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),i=this.getTime();return null!=i&&t&&t[e](i,!0)}},{preserve:!0}),new function(){function t(t,e,i){function n(i,n){for(var s=i+n;s>=-1&&s<=r;s+=n){var o=t[(s%r+r)%r];if(!e.getPoint().isClose(o.getPoint(),1e-7))break;if(e.equals(o))return o}return null}for(var r=t.length,s=0,o=r-1;s<=o;){var a,h=s+o>>>1,u=t[h];if(i&&(a=e.equals(u)?u:n(h,-1)||n(h,1)))return e._overlap&&(a._overlap=a._intersection._overlap=!0),a;var l=e.getPath(),c=u.getPath();(l!==c?l._id-c._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?o=h-1:s=h+1}return t.splice(s,0,e),e}return{statics:{insert:t,expand:function(e){for(var i=e.slice(),n=e.length-1;n>=0;n--)t(i,e[n]._intersection,!1);return i}}}}),B=P.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,i,n;if(c.isPlainObject(t)?(i=t.segments,e=t.pathData):Array.isArray(t)?i=t:"string"==typeof t&&(e=t),i){var r=i[0];n=r&&Array.isArray(r[0])}else e&&(n=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(n?z:U)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var i=+n[t];return a&&(i+=h[e]),i}function i(t){return new m(e(t,"x"),e(t+1,"y"))}var n,r,s,o=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),a=!1,h=new m,u=new m;this.clear();for(var l=0,c=o&&o.length;l<c;l++){var f=o[l],d=f[0],p=d.toLowerCase(),g=(n=f.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&n.length;switch(a=d===p,"z"!==r||/[mz]/.test(p)||this.moveTo(h),p){case"m":case"l":for(var v="m"===p,_=0;_<g;_+=2)this[v?"moveTo":"lineTo"](h=i(_)),v&&(u=h,v=!1);s=h;break;case"h":case"v":var y="h"===p?"x":"y";h=h.clone();for(_=0;_<g;_++)h[y]=e(_,y),this.lineTo(h);s=h;break;case"c":for(_=0;_<g;_+=6)this.cubicCurveTo(i(_),s=i(_+2),h=i(_+4));break;case"s":for(_=0;_<g;_+=4)this.cubicCurveTo(/[cs]/.test(r)?h.multiply(2).subtract(s):h,s=i(_),h=i(_+2)),r=p;break;case"q":for(_=0;_<g;_+=4)this.quadraticCurveTo(s=i(_),h=i(_+2));break;case"t":for(_=0;_<g;_+=2)this.quadraticCurveTo(s=/[qt]/.test(r)?h.multiply(2).subtract(s):h,h=i(_)),r=p;break;case"a":for(_=0;_<g;_+=7)this.arcTo(h=i(_+5),new b(+n[_],+n[_+1]),+n[_+2],+n[_+4],+n[_+3]);break;case"z":this.closePath(1e-12),h=u}r=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,i,n){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),o=r?s:(i||t._matrix)._orNullIfIdentity();return r||this.getBounds(s).intersects(t.getBounds(o),1e-12)?F.getIntersections(this.getCurves(),!r&&t.getCurves(),e,s,o,n):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=m.read(arguments),e=this.getCurves(),i=1/0,n=null,r=0,s=e.length;r<s;r++){var o=e[r].getNearestLocation(t);o._distance<i&&(i=o._distance,n=o)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,i){var n=!this._children,r=n?"_segments":"_children",s=t[r],o=e[r],a=this[r];if(!s||!o||s.length!==o.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var h=a.length,u=o.length;if(h<u)for(var l=n?D:U,c=h;c<u;c++)this.add(new l);else h>u&&this[n?"removeSegments":"removeChildren"](u,h);for(c=0;c<u;c++)a[c].interpolate(s[c],o[c],i);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var i=this._children||[this],n=t._children?t._children.slice():[t],r=i.length,s=n.length,o=[],a=0;e=!0;for(var h=r-1;h>=0&&e;h--){var u=i[h];e=!1;for(var l=s-1;l>=0&&!e;l--)u.compare(n[l])&&(o[l]||(o[l]=!0,a++),e=!0)}e=e&&a===s}return e}}),U=B.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==h||t.x===h&&t.point===h?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=h,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&c.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=h,16&e)this._version++;else if(this._curves)for(var i=0,n=this._curves.length;i<n;i++)this._curves[i]._changed()}else 32&e&&(this._bounds=h)},getStyle:function(){var t=this._parent;return(t instanceof z?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=h,i){var n=t[i-1];"boolean"==typeof n&&(this.setClosed(n),i--),this._add(D.readList(t,0,{},i))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=new Array(i);for(var n=0;n<i;n++)t[n]=new F(this,e[n],e[n+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new F(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){function i(e,i){if(e._transformCoordinates(t,p),n=p[0],r=p[1],v)_.push("M"+d.pair(n,r)),v=!1;else if(a=p[2],h=p[3],a===n&&h===r&&u===s&&l===o){if(!i){var c=n-s,f=r-o;_.push(0===c?"v"+d.number(f):0===f?"h"+d.number(c):"l"+d.pair(c,f))}}else _.push("c"+d.pair(u-s,l-o)+" "+d.pair(a-s,h-o)+" "+d.pair(n-s,r-o));s=n,o=r,u=p[4],l=p[5]}var n,r,s,o,a,h,u,l,c=this._segments,f=c.length,d=new g(e),p=new Array(6),v=!0,_=[];if(!f)return"";for(var m=0;m<f;m++)i(c[m]);return this._closed&&f>0&&(i(c[0],!0),_.push("z")),_.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,i=new Array(6),n=0,r=e.length;n<r;n++)e[n]._transformCoordinates(t,i,!0);return!0},_add:function(t,e){for(var i=this._segments,n=this._curves,r=t.length,s=null==e,e=s?i.length:e,o=0;o<r;o++){var a=t[o];a._path&&(a=t[o]=a.clone()),a._path=this,a._index=e+o,a._selection&&this._updateSelection(a,0,a._selection)}if(s)i.push.apply(i,t);else{i.splice.apply(i,[e,0].concat(t));for(var o=e+r,h=i.length;o<h;o++)i[o]._index=o}if(n){var u=this._countCurves(),l=e>0&&e+r-1===u?e-1:e,c=l,f=Math.min(l+r,u);t._curves&&(n.splice.apply(n,[l,0].concat(t._curves)),c+=t._curves.length);for(o=c;o<f;o++)n.splice(o,0,new F(this,null,null));this._adjustCurves(l,f)}return this._changed(25),t},_adjustCurves:function(t,e){for(var i,n=this._segments,r=this._curves,s=t;s<e;s++)(i=r[s])._path=this,i._segment1=n[s],i._segment2=n[s+1]||n[0],i._changed();(i=r[this._closed&&!t?n.length-1:t-1])&&(i._segment2=n[t]||n[0],i._changed()),(i=r[e])&&(i._segment1=n[e],i._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(D.readList(arguments)):this._add([D.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(D.readList(arguments,1),t):this._add([D.read(arguments,1)],t)[0]},addSegment:function(){return this._add([D.read(arguments)])[0]},insertSegment:function(t){return this._add([D.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(D.readList(t))},insertSegments:function(t,e){return this._add(D.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,e=c.pick(e,this._segments.length);var n=this._segments,r=this._curves,s=n.length,o=n.splice(t,e-t),a=o.length;if(!a)return o;for(u=0;u<a;u++){var h=o[u];h._selection&&this._updateSelection(h,h._selection,0),h._index=h._path=null}for(var u=t,l=n.length;u<l;u++)n[u]._index=u;if(r){for(var f=t>0&&e===s+(this._closed?1:0)?t-1:t,u=(r=r.splice(f,a)).length-1;u>=0;u--)r[u]._path=null;i&&(o._curves=r.slice(1)),this._adjustCurves(f,f)}return this._changed(25),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,i=this._closed;t=0;for(var n=0,r=e.length;n<r;n++){var s=n+1===r;t+=F.getArea(F.getValues(e[n],e[s?0:n+1],null,s&&!i))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,i=e.length,n=t?7:0;this._segmentSelection=n*i;for(var r=0;r<i;r++)e[r]._selection=n},_updateSelection:function(t,e,i){t._selection=i,(this._segmentSelection+=i-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,i=this.getLocationAt(t);return i&&(e=i.getCurve().divideAt(i.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),i=e&&e.index,n=e&&e.time;n>1-1e-8&&(i++,n=0);var r=this.getCurves();if(i>=0&&i<r.length){n>=1e-8&&r[i++].divideAtTime(n);var s,o=this.removeSegments(i,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new U(P.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(o,0),this.addSegment(o[0]),s}return null},split:function(t,e){var i,n=e===h?t:(i=this.getCurves()[t])&&i.getLocationAtTime(e);return null!=n?this.splitAt(n):null},join:function(t,e){var i=e||0;if(t&&t!==this){var n=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,i)&&t.reverse();var o=t.getFirstSegment();if(r&&r._point.isClose(o._point,i))r.setHandleOut(o._handleOut),this._add(n.slice(1));else{var a=this.getFirstSegment();a&&a._point.isClose(o._point,i)&&t.reverse(),s=t.getLastSegment(),a&&a._point.isClose(s._point,i)?(a.setHandleIn(s._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())}t._closed&&this._add([n[0]]),t.remove()}var h=this.getFirstSegment(),u=this.getLastSegment();return h!==u&&h._point.isClose(u._point,i)&&(h.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),i=t&&t.simplify,n=i?1e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(!s.hasLength(n)||i&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var i=this._segments[t],n=i._handleIn;i._handleIn=i._handleOut,i._handleOut=n,i._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new V(this,t||.25,256,!0).parts,i=e.length,n=[],r=0;r<i;r++)n.push(new D(e[r].curve.slice(0,2)));!this._closed&&i>0&&n.push(new D(e[i-1].curve.slice(6))),this.setSegments(n)},simplify:function(t){var e=new X(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function e(t,e){var n=t&&t.index;if(null!=n){var r=t.path;if(r&&r!==i)throw new Error(t._class+" "+n+" of "+r+" is not part of "+i);e&&t instanceof F&&n++}else n="number"==typeof t?t:e;return Math.min(n<0&&a?n%o:n<0?n+o:n,o-1)}var i=this,n=t||{},r=n.type||"asymmetric",s=this._segments,o=s.length,a=this._closed,u=a&&n.from===h&&n.to===h,l=e(n.from,0),c=e(n.to,o-1);if(l>c)if(a)l-=o;else{var f=l;l=c,c=f}if(/^(?:asymmetric|continuous)$/.test(r)){var d="asymmetric"===r,p=Math.min,g=c-l+1,v=g-1,_=u?p(g,4):1,m=_,y=_,b=[];if(a||(m=p(1,l),y=p(1,o-c-1)),(v+=m+y)<=1)return;for(var x=0,w=l-m;x<=v;x++,w++)b[x]=s[(w<0?w+o:w)%o]._point;for(var T=b[0]._x+2*b[1]._x,E=b[0]._y+2*b[1]._y,S=2,C=v-1,P=[T],O=[E],M=[S],A=[],I=[],x=1;x<v;x++){var k=x<C,R=k?1:d?1:2,L=k?4:d?2:7,D=k?4:d?3:8,N=k?2:d?0:1,j=R/S;S=M[x]=L-j,T=P[x]=D*b[x]._x+N*b[x+1]._x-j*T,E=O[x]=D*b[x]._y+N*b[x+1]._y-j*E}A[C]=P[C]/M[C],I[C]=O[C]/M[C];for(x=v-2;x>=0;x--)A[x]=(P[x]-A[x+1])/M[x],I[x]=(O[x]-I[x+1])/M[x];A[v]=(3*b[v]._x-A[C])/2,I[v]=(3*b[v]._y-I[C])/2;for(var x=m,B=v-y,w=l;x<=B;x++,w++){var U=s[w<0?w+o:w],z=U._point,V=A[x]-z._x,X=I[x]-z._y;(u||x<B)&&U.setHandleOut(V,X),(u||x>m)&&U.setHandleIn(-V,-X)}}else for(x=l;x<=c;x++)s[x<0?x+o:x].smooth(n,!u&&x===l,!u&&x===c)},toShape:function(t){function e(t,e){var i=u[t],n=i.getNext(),r=u[e],s=r.getNext();return i._handleOut.isZero()&&n._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&n._point.subtract(i._point).isCollinear(s._point.subtract(r._point))}function i(t){var e=u[t],i=e.getNext(),n=e._handleOut,r=i._handleIn;if(n.isOrthogonal(r)){var s=e._point,o=i._point,a=new S(s,n,!0).intersect(new S(o,r,!0),!0);return a&&v.isZero(n.getLength()/a.subtract(s).getLength()-.5522847498307936)&&v.isZero(r.getLength()/a.subtract(o).getLength()-.5522847498307936)}return!1}function n(t,e){return u[t]._point.getDistance(u[e]._point)}if(!this._closed)return null;var r,s,o,a,u=this._segments;if(!this.hasHandles()&&4===u.length&&e(0,2)&&e(1,3)&&function(t){var e=u[t],i=e.getPrevious(),n=e.getNext();return i._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&n._handleIn.isZero()&&e._point.subtract(i._point).isOrthogonal(n._point.subtract(e._point))}(1)?(r=A.Rectangle,s=new b(n(0,3),n(0,1)),a=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&i(0)&&i(2)&&i(4)&&i(6)&&e(1,5)&&e(3,7)?(r=A.Rectangle,o=(s=new b(n(1,6),n(0,3))).subtract(new b(n(0,7),n(1,2))).divide(2),a=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&i(0)&&i(1)&&i(2)&&i(3)&&(v.isZero(n(0,2)-n(1,3))?(r=A.Circle,o=n(0,2)/2):(r=A.Ellipse,o=new b(n(2,0)/2,n(3,1)/2)),a=u[1]._point),r){var l=this.getPosition(!0),c=new r({center:l,size:s,radius:o,insert:!1});return c.copyAttributes(this,!0),c._matrix.prepend(this._matrix),c.rotate(a.subtract(l).getAngle()+90),(t===h||t)&&c.insertAbove(this),c}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof z)return t.base.call(this,e);var i=this.getCurves(),n=e.getCurves(),r=i.length,s=n.length;if(!r||!s)return r==s;for(var o,a,h=i[0].getValues(),u=[],l=0,c=0,f=0;f<s;f++){g=n[f].getValues();if(u.push(g),v=F.getOverlaps(h,g)){o=!f&&v[0][0]>0?s-1:f,a=v[0][1];break}}for(var d,p=Math.abs,g=u[o];h&&g;){var v=F.getOverlaps(h,g);if(v&&p(v[0][0]-c)<1e-8){1===(c=v[1][0])&&(h=++l<r?i[l].getValues():null,c=0);var _=v[0][1];if(p(_-a)<1e-8){if(d||(d=[o,_]),1===(a=v[1][1])&&(++o>=s&&(o=0),g=u[o]||n[o].getValues(),a=0),!h)return d[0]===o&&d[1]===a;continue}}break}return!1},_hitTestSelf:function(t,e,i,n){function r(e,i){return t.subtract(e).divide(i).length<=1}function s(t,i,n){if(!e.selected||i.isSelected()){var s=t._point;if(i!==s&&(i=i.add(s)),r(i,x))return new L(n,g,{segment:t,point:i})}}function o(t,i){return(i||e.segments)&&s(t,t._point,"segment")||!i&&e.handles&&(s(t,t._handleIn,"handle-in")||s(t,t._handleOut,"handle-out"))}function a(t){f.add(t)}function h(e){var i=y||e._index>0&&e._index<m-1;if("round"===(i?u:l))return r(e._point,x);if(f=new U({internal:!0,closed:!0}),i?e.isSmooth()||U._addBevelJoin(e,u,S,c,null,n,a,!0):"square"===l&&U._addSquareCap(e,l,S,null,n,a,!0),!f.isEmpty()){var s;return f.contains(t)||(s=f.getNearestLocation(t))&&r(s.getPoint(),b)}}var u,l,c,f,d,p,g=this,v=this.getStyle(),_=this._segments,m=_.length,y=this._closed,b=e._tolerancePadding,x=b,w=e.stroke&&v.hasStroke(),T=e.fill&&v.hasFill(),E=e.curves,S=w?v.getStrokeWidth()/2:T&&e.tolerance>0||E?0:null;if(null!==S&&(S>0?(u=v.getStrokeJoin(),l=v.getStrokeCap(),c=v.getMiterLimit(),x=x.add(U._getStrokePadding(S,n))):u=l="round"),!e.ends||e.segments||y){if(e.segments||e.handles)for(P=0;P<m;P++)if(p=o(_[P]))return p}else if(p=o(_[0],!0)||o(_[m-1],!0))return p;if(null!==S){if(d=this.getNearestLocation(t)){var C=d.getTime();0===C||1===C&&m>1?h(d.getSegment())||(d=null):r(d.getPoint(),x)||(d=null)}if(!d&&"miter"===u&&m>1)for(var P=0;P<m;P++){var O=_[P];if(t.getDistance(O._point)<=c*S&&h(O)){d=O.getLocation();break}}}return!d&&T&&this._contains(t)||d&&!w&&!E?new L("fill",this):d?new L(w?"stroke":"curve",this,{location:d,point:d.getPoint()}):null}},c.each(F._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this.getLocationAt(e);return i&&i[t]()}},{beans:!1,getLocationOf:function(){for(var t=m.read(arguments),e=this.getCurves(),i=0,n=e.length;i<n;i++){var r=e[i].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),i=0,n=0,r=e.length;n<r;n++){var s=i,o=e[n];if((i+=o.getLength())>t)return o.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new j(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,i,n){function r(e){var i=h[e],n=h[e+1];s==i&&o==n||(t.beginPath(),t.moveTo(s,o),t.lineTo(i,n),t.stroke(),t.beginPath(),t.arc(i,n,a,0,2*Math.PI,!0),t.fill())}for(var s,o,a=n/2,h=new Array(6),u=0,l=e.length;u<l;u++){var c=e[u],f=c._selection;if(c._transformCoordinates(i,h),s=h[0],o=h[1],2&f&&r(2),4&f&&r(4),t.fillRect(s-a,o-a,n,n),!(1&f)){var d=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(s-a+1,o-a+1,n-2,n-2),t.fillStyle=d}}}function e(t,e,i){function n(e){if(i)e._transformCoordinates(i,p),r=p[0],s=p[1];else{var n=e._point;r=n._x,s=n._y}if(g)t.moveTo(r,s),g=!1;else{if(i)h=p[2],u=p[3];else{f=e._handleIn;h=r+f._x,u=s+f._y}h===r&&u===s&&l===o&&c===a?t.lineTo(r,s):t.bezierCurveTo(l,c,h,u,r,s)}if(o=r,a=s,i)l=p[4],c=p[5];else{var f=e._handleOut;l=o+f._x,c=a+f._y}}for(var r,s,o,a,h,u,l,c,f=e._segments,d=f.length,p=new Array(6),g=!0,v=0;v<d;v++)n(f[v]);e._closed&&d>0&&n(f[0])}return{_draw:function(t,i,n,r){function s(t){return f[(t%d+d)%d]}var a=i.dontStart,h=i.dontFinish||i.clip,u=this.getStyle(),l=u.hasFill(),c=u.hasStroke(),f=u.getDashArray(),d=!o.support.nativeDash&&c&&f&&f.length;if(a||t.beginPath(),(l||c&&!d||h)&&(e(t,this,r),this._closed&&t.closePath()),!h&&(l||c)&&(this._setStyles(t,i,n),l&&(t.fill(u.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),c)){if(d){a||t.beginPath();var p,g=new V(this,.25,32,!1,r),v=g.length,_=-u.getDashOffset(),m=0;for(_%=v;_>0;)_-=s(m--)+s(m--);for(;_<v;)p=_+s(m++),(_>0||p>0)&&g.drawPart(t,Math.max(_,0),Math.max(p,0)),_=p+s(m++)}t.stroke()}},_drawSelected:function(i,n){i.beginPath(),e(i,this,n),i.stroke(),t(i,this._segments,n,o.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new D(m.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new D(m.read(arguments))])},cubicCurveTo:function(){var e=m.read(arguments),i=m.read(arguments),n=m.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new D(n,i.subtract(n))])},quadraticCurveTo:function(){var e=m.read(arguments),i=m.read(arguments),n=t(this)._point;this.cubicCurveTo(e.add(n.subtract(e).multiply(1/3)),e.add(i.subtract(e).multiply(1/3)),i)},curveTo:function(){var e=m.read(arguments),i=m.read(arguments),n=c.pick(c.read(arguments),.5),r=1-n,s=t(this)._point,o=e.subtract(s.multiply(r*r)).subtract(i.multiply(n*n)).divide(2*n*r);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+n);this.quadraticCurveTo(o,i)},arcTo:function(){var e,i,n,r,s=Math.abs,o=Math.sqrt,a=t(this),h=a._point,u=m.read(arguments),l=c.peek(arguments);if("boolean"==typeof(_=c.pick(l,!0)))var f=(x=h.add(u).divide(2)).add(x.subtract(h).rotate(_?-90:90));else if(c.remain(arguments)<=2)f=u,u=m.read(arguments);else{var d=b.read(arguments),p=v.isZero;if(p(d.width)||p(d.height))return this.lineTo(u);var g=c.read(arguments),_=!!c.read(arguments),y=!!c.read(arguments),x=h.add(u).divide(2),w=(H=h.subtract(x).rotate(-g)).x,T=H.y,C=s(d.width),P=s(d.height),O=C*C,M=P*P,A=w*w,I=T*T,k=o(A/O+I/M);if(k>1&&(O=(C*=k)*C,M=(P*=k)*P),k=(O*M-O*I-M*A)/(O*I+M*A),s(k)<1e-12&&(k=0),k<0)throw new Error("Cannot create an arc with the given arguments");e=new m(C*T/P,-P*w/C).multiply((y===_?-1:1)*o(k)).rotate(g).add(x),i=(n=(r=(new E).translate(e).rotate(g).scale(C,P))._inverseTransform(h)).getDirectedAngle(r._inverseTransform(u)),!_&&i>0?i-=360:_&&i<0&&(i+=360)}if(f){var R=new S(h.add(f).divide(2),f.subtract(h).rotate(90),!0),L=new S(f.add(u).divide(2),u.subtract(f).rotate(90),!0),N=new S(h,u),F=N.getSide(f);if(!(e=R.intersect(L,!0))){if(!F)return this.lineTo(u);throw new Error("Cannot create an arc with the given arguments")}i=(n=h.subtract(e)).getDirectedAngle(u.subtract(e));var j=N.getSide(e);0===j?i=F*s(i):F===j&&(i+=i<0?360:-360)}for(var B=s(i),U=B>=360?4:Math.ceil((B-1e-7)/90),z=i/U,V=z*Math.PI/360,X=4/3*Math.sin(V)/(1+Math.cos(V)),q=[],G=0;G<=U;G++){var H=u,W=null;if(G<U&&(W=n.rotate(90).multiply(X),r?(H=r._transformPoint(n),W=r._transformPoint(n.add(W)).subtract(H)):H=e.add(n)),G){var Y=n.rotate(-90).multiply(X);r&&(Y=r._transformPoint(n.add(Y)).subtract(H)),q.push(new D(H,Y,W))}else a.setHandleOut(W);n=n.rotate(z)}this._add(q)},lineBy:function(){var e=m.read(arguments),i=t(this)._point;this.lineTo(i.add(e))},curveBy:function(){var e=m.read(arguments),i=m.read(arguments),n=c.read(arguments),r=t(this)._point;this.curveTo(r.add(e),r.add(i),n)},cubicCurveBy:function(){var e=m.read(arguments),i=m.read(arguments),n=m.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(i),r.add(n))},quadraticCurveBy:function(){var e=m.read(arguments),i=m.read(arguments),n=t(this)._point;this.quadraticCurveTo(n.add(e),n.add(i))},arcBy:function(){var e=t(this)._point,i=e.add(m.read(arguments)),n=c.pick(c.peek(arguments),!0);"boolean"==typeof n?this.arcTo(i,n):this.arcTo(i,e.add(m.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var i=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return U[i](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,i,n,r,s){function o(t){t._transformCoordinates(n,h);for(var e=0;e<2;e++)F._addBounds(u[e],u[e+4],h[e+2],h[e],e,s?s[e]:0,l,c,f);var i=u;u=h,h=i}var a=t[0];if(!a)return new w;for(var h=new Array(6),u=a._transformCoordinates(n,new Array(6)),l=u.slice(0,2),c=l.slice(),f=new Array(2),d=1,p=t.length;d<p;d++)o(t[d]);return e&&o(a),new w(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,i,n,r){function s(t){p=p.include(t)}function o(t){p=p.unite(y.setCenter(t._point.transform(n)))}function a(t,e){"round"===e||t.isSmooth()?o(t):U._addBevelJoin(t,e,g,m,n,f,s)}function h(t,e){"round"===e?o(t):U._addSquareCap(t,e,g,n,f,s)}var u=i.getStyle(),l=u.hasStroke(),c=u.getStrokeWidth(),f=l&&i._getStrokeMatrix(n,r),d=l&&U._getStrokePadding(c,f),p=U.getBounds(t,e,i,n,r,d);if(!l)return p;for(var g=c/2,v=u.getStrokeJoin(),_=u.getStrokeCap(),m=u.getMiterLimit(),y=new w(new b(d)),x=t.length-(e?0:1),T=1;T<x;T++)a(t[T],v);return e?a(t[0],v):x>0&&(h(t[0],_),h(t[t.length-1],_)),p},_getStrokePadding:function(t,e){if(!e)return[t,t];var i=new m(t,0).transform(e),n=new m(0,t).transform(e),r=i.getAngleInRadians(),s=i.getLength(),o=n.getLength(),a=Math.sin(r),h=Math.cos(r),u=Math.tan(r),l=Math.atan2(o*u,s),c=Math.atan2(o,u*s);return[Math.abs(s*Math.cos(l)*h+o*Math.sin(l)*a),Math.abs(o*Math.sin(c)*h+s*Math.cos(c)*a)]},_addBevelJoin:function(t,e,i,n,r,s,o,a){var h=t.getCurve(),u=h.getPrevious(),l=h.getPoint1().transform(r),c=u.getNormalAtTime(1).multiply(i).transform(s),f=h.getNormalAtTime(0).multiply(i).transform(s);if(c.getDirectedAngle(f)<0&&(c=c.negate(),f=f.negate()),a&&o(l),o(l.add(c)),"miter"===e){var d=new S(l.add(c),new m(-c.y,c.x),!0).intersect(new S(l.add(f),new m(-f.y,f.x),!0),!0);d&&l.getDistance(d)<=n*i&&o(d)}o(l.add(f))},_addSquareCap:function(t,e,i,n,r,s,o){var a=t._point.transform(n),h=t.getLocation(),u=h.getNormal().multiply(0===h.getTime()?i:-i).transform(r);"square"===e&&(o&&(s(a.subtract(u)),s(a.add(u))),a=a.add(u.rotate(-90))),s(a.add(u)),s(a.subtract(u))},getHandleBounds:function(t,e,i,n,r){var s,o,a=i.getStyle();if(r.stroke&&a.hasStroke()){var h=i._getStrokeMatrix(n,r),u=a.getStrokeWidth()/2,l=u;"miter"===a.getStrokeJoin()&&(l=u*a.getMiterLimit()),"square"===a.getStrokeCap()&&(l=Math.max(l,u*Math.SQRT2)),s=U._getStrokePadding(u,h),o=U._getStrokePadding(l,h)}for(var c=new Array(6),f=1/0,d=-f,p=f,g=d,v=0,_=t.length;v<_;v++){t[v]._transformCoordinates(n,c);for(var m=0;m<6;m+=2){var y=m?s:o,b=y?y[0]:0,x=y?y[1]:0,T=c[m],E=c[m+1],S=T-b,C=T+b,P=E-x,O=E+x;S<f&&(f=S),C>d&&(d=C),P<p&&(p=P),O>g&&(g=O)}}return new w(f,p,d-f,g-p)}}});U.inject({statics:new function(){function t(t,e,i){var n=c.getNamed(i),r=new U(n&&0==n.insert&&P.NO_INSERT);return r._add(t),r._closed=e,r.set(n,{insert:!0})}function e(e,i,r){for(var s=new Array(4),o=0;o<4;o++){var a=n[o];s[o]=new D(a._point.multiply(i).add(e),a._handleIn.multiply(i),a._handleOut.multiply(i))}return t(s,!0,r)}var i=.5522847498307936,n=[new D([-1,0],[0,i],[0,-i]),new D([0,-1],[-i,0],[i,0]),new D([1,0],[0,-i],[0,i]),new D([0,1],[i,0],[-i,0])];return{Line:function(){return t([new D(m.readNamed(arguments,"from")),new D(m.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=m.readNamed(arguments,"center"),i=c.readNamed(arguments,"radius");return e(t,new b(i),arguments)},Rectangle:function(){var e,n=w.readNamed(arguments,"rectangle"),r=b.readNamed(arguments,"radius",0,{readNull:!0}),s=n.getBottomLeft(!0),o=n.getTopLeft(!0),a=n.getTopRight(!0),h=n.getBottomRight(!0);if(!r||r.isZero())e=[new D(s),new D(o),new D(a),new D(h)];else{var u=(r=b.min(r,n.getSize(!0).divide(2))).width,l=r.height,c=u*i,f=l*i;e=[new D(s.add(u,0),null,[-c,0]),new D(s.subtract(0,l),[0,f]),new D(o.add(0,l),null,[0,-f]),new D(o.add(u,0),[-c,0],null),new D(a.subtract(u,0),null,[c,0]),new D(a.add(0,l),[0,-f],null),new D(h.subtract(0,l),null,[0,f]),new D(h.subtract(u,0),[c,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=A._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=m.readNamed(arguments,"from"),e=m.readNamed(arguments,"through"),i=m.readNamed(arguments,"to"),n=c.getNamed(arguments),r=new U(n&&0==n.insert&&P.NO_INSERT);return r.moveTo(t),r.arcTo(e,i),r.set(n)},RegularPolygon:function(){for(var e=m.readNamed(arguments,"center"),i=c.readNamed(arguments,"sides"),n=c.readNamed(arguments,"radius"),r=360/i,s=i%3==0,o=new m(0,s?-n:n),a=s?-1:.5,h=new Array(i),u=0;u<i;u++)h[u]=new D(e.add(o.rotate((u+a)*r)));return t(h,!0,arguments)},Star:function(){for(var e=m.readNamed(arguments,"center"),i=2*c.readNamed(arguments,"points"),n=c.readNamed(arguments,"radius1"),r=c.readNamed(arguments,"radius2"),s=360/i,o=new m(0,-1),a=new Array(i),h=0;h<i;h++)a[h]=new D(e.add(o.rotate(s*h).multiply(h%2?r:n)));return t(a,!0,arguments)}}}});var z=B.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,i){var n=i,r=n[0];r&&"number"==typeof r[0]&&(n=[n]);for(var s=i.length-1;s>=0;s--){var o=n[s];n!==i||o instanceof U||(n=c.slice(n)),Array.isArray(o)?n[s]=new U({segments:o,insert:!1}):o instanceof z&&(n.splice.apply(n,[s,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,n)},reduce:function t(e){for(var i=this._children,n=i.length-1;n>=0;n--)(r=i[n].reduce(e)).isEmpty()&&r.remove();if(!i.length){var r=new U(P.NO_INSERT);return r.copyAttributes(this),r.insertAbove(this),this.remove(),r}return t.base.call(this)},isClosed:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,i=0,n=e.length;i<n;i++)e[i].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,n=t.length;i<n;i++)e.push.apply(e,t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getArea();return e},getLength:function(){for(var t=this._children,e=0,i=0,n=t.length;i<n;i++)e+=t[i].getLength();return e},getPathData:function(t,e){for(var i=this._children,n=[],r=0,s=i.length;r<s;r++){var o=i[r],a=o._matrix;n.push(o.getPathData(t&&!a.isIdentity()?t.appended(a):t,e))}return n.join("")},_hitTestChildren:function t(e,i,n){return t.base.call(this,e,i.class===U||"path"===i.type?i:c.set({},i,{fill:!1}),n)},_draw:function(t,e,i,n){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,o=r.length;s<o;s++)r[s].draw(t,e,n);if(!e.clip){this._setStyles(t,e,i);var a=this._style;a.hasFill()&&(t.fill(a.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,i){for(var n=this._children,r=0,s=n.length;r<s;r++){var o=n[r],a=o._matrix;i[o._id]||o._drawSelected(t,a.isIdentity()?e:e.appended(a))}}},new function(){function t(t,e){var i=t._children;if(e&&!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var i=t(this,!0);i[e].apply(i,arguments)}},{moveTo:function(){var e=t(this),i=e&&e.isEmpty()?e:new U(P.NO_INSERT);i!==e&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var e=t(this,!0),i=e&&e.getLastSegment(),n=m.read(arguments);this.moveTo(i?n.add(i._point):n)},closePath:function(e){t(this,!0).closePath(e)}})},c.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var i,n=this._children,r=0,s=n.length;r<s;r++)i=n[r][t](e)||i;return i}},{}));B.inject(new function(){function t(t,e){var i=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?i.resolveCrossings().reorient("nonzero"===i.getFillRule(),!0):i}function e(t,e,i,n,r){var s=new z(P.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),r&&0==r.insert||s.insertAbove(n&&i.isSibling(n)&&i.getIndex()<n.getIndex()?n:i),s.copyAttributes(i,!0),s}function i(i,r,s,h){function u(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];b.push.apply(b,n._segments),x.push.apply(x,n.getCurves()),n._overlapsOnly=!0}}if(h&&(0==h.trace||h.stroke)&&/^(subtract|intersect)$/.test(s))return n(i,r,s);var c=t(i,!0),d=r&&i!==r&&t(r,!0),p=_[s];p[s]=!0,d&&(p.subtract||p.exclude)^d.isClockwise()^c.isClockwise()&&d.reverse();var g,v=a(j.expand(c.getCrossings(d))),m=c._children||[c],y=d&&(d._children||[d]),b=[],x=[];if(v.length){u(m),y&&u(y);for(var w=0,T=v.length;w<T;w++)l(v[w]._segment,c,d,x,p);for(var w=0,T=b.length;w<T;w++){var E=b[w],S=E._intersection;E._winding||l(E,c,d,x,p),S&&S._overlap||(E._path._overlapsOnly=!1)}g=f(b,p)}else g=o(y?m.concat(y):m.slice(),function(t){return!!p[t]});return e(g,!0,i,r,h)}function n(i,n,r){function s(t){if(!c[t._id]&&(l||a.contains(t.getPointAt(t.getLength()/2))^u))return f.unshift(t),c[t._id]=!0}for(var o=t(i),a=t(n),h=o.getCrossings(a),u="subtract"===r,l="divide"===r,c={},f=[],d=h.length-1;d>=0;d--){var p=h[d].split();p&&(s(p)&&p.getFirstSegment().setHandleIn(0,0),o.getLastSegment().setHandleOut(0,0))}return s(o),e(f,!1,i,n)}function r(t,e){for(var i=t;i;){if(i===e)return;i=i._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function s(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function o(t,e,i){var n=t&&t.length;if(n){var r=c.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),s=t.slice().sort(function(t,e){return g(e.getArea())-g(t.getArea())}),o=s[0];null==i&&(i=o.isClockwise());for(var a=0;a<n;a++){for(var h=s[a],u=r[h._id],l=h.getInteriorPoint(),f=0,d=a-1;d>=0;d--){var p=s[d];if(p.contains(l)){var v=r[p._id];f=v.winding,u.winding+=f,u.container=v.exclude?v.container:p;break}}if(e(u.winding)===e(f))u.exclude=!0,t[u.index]=null;else{var _=u.container;h.setClockwise(_?!_.isClockwise():i)}}}return t}function a(t,e,i){function n(t){return t._path._id+"."+t._segment1._index}for(var o,a,h,u=e&&[],l=!1,c=i||[],f=i&&{},d=(i&&i.length)-1;d>=0;d--)(y=i[d])._path&&(f[n(y)]=!0);for(d=t.length-1;d>=0;d--){var p,g=t[d],v=g._time,_=v,m=e&&!e(g),y=g._curve;if(y&&(y!==a?(l=!y.hasHandles()||f&&f[n(y)],o=[],h=null,a=y):h>=1e-8&&(v/=h)),m)o&&o.push(g);else{if(e&&u.unshift(g),h=_,v<1e-8)p=y._segment1;else if(v>1-1e-8)p=y._segment2;else{var b=y.divideAtTime(v,!0);l&&c.push(y,b),p=b._segment1;for(var x=o.length-1;x>=0;x--){var w=o[x];w._time=(w._time-v)/(1-v)}}g._setSegment(p);var T=p._intersection,E=g._intersection;if(T){r(T,E);for(var S=T;S;)r(S._intersection,T),S=S._next}else p._intersection=E}}return i||s(c),u||t}function u(t,e,i,n,r){function s(s){var o=s[c+0],h=s[c+6];if(!(_<d(o,h)||_>p(o,h))){var f=s[l+0],g=s[l+2],x=s[l+4],w=s[l+6];if(o!==h){var C=_===o?0:_===h?1:y>p(f,g,x,w)||b<d(f,g,x,w)?1:F.solveCubic(s,c,_,O,0,1)>0?O[0]:1,M=0===C?f:1===C?w:F.getPoint(s,C)[i?"y":"x"],A=o>h?1:-1,I=a[c]>a[c+6]?1:-1,k=a[l+6];return _!==o?(M<y?T+=A:M>b?E+=A:S=!0,M>v-m&&M<v+m&&(P/=2)):(A!==I?f<y?T+=A:f>b&&(E+=A):f!=k&&(k<b&&M>b?(E+=A,S=!0):k>y&&M<y&&(T+=A,S=!0)),P=0),a=s,!r&&M>y&&M<b&&0===F.getTangent(s,C)[i?"x":"y"]&&u(t,e,!i,n,!0)}(f<b&&w>y||w<b&&f>y)&&(S=!0)}}function o(t){var e=t[c+0],n=t[c+2],r=t[c+4],o=t[c+6];if(_<=p(e,n,r,o)&&_>=d(e,n,r,o))for(var a,h=t[l+0],u=t[l+2],f=t[l+4],g=t[l+6],v=y>p(h,u,f,g)||b<d(h,u,f,g)?[t]:F.getMonoCurves(t,i),m=0,x=v.length;m<x;m++)if(a=s(v[m]))return a}for(var a,h,l=i?1:0,c=1^l,f=[t.x,t.y],v=f[l],_=f[c],m=1e-6,y=v-1e-9,b=v+1e-9,x=0,w=0,T=0,E=0,S=!1,C=!1,P=1,O=[],M=0,A=e.length;M<A;M++){var I,k=e[M],R=k._path,L=k.getValues();if(!(M&&e[M-1]._path===R||(a=null,R._closed||(h=F.getValues(R.getLastCurve().getSegment2(),k.getSegment1(),null,!n))[c]!==h[c+6]&&(a=h),a))){a=L;for(var D=R.getLastCurve();D&&D!==k;){var N=D.getValues();if(N[c]!==N[c+6]){a=N;break}D=D.getPrevious()}}if(I=o(L))return I;if(M+1===A||e[M+1]._path!==R){if(h&&(I=o(h)))return I;!S||T||E||(T=E=R.isClockwise(n)^i?1:-1),x+=T,w+=E,T=E=0,S&&(C=!0,S=!1),h=null}}return x=g(x),w=g(w),{winding:p(x,w),windingL:x,windingR:w,quality:P,onPath:C}}function l(t,e,i,n,r){var s=[],o=t,a=0;do{f=(y=t.getCurve()).getLength();s.push({segment:t,curve:y,length:f}),a+=f,t=t.getNext()}while(t&&!t._intersection&&t!==o);for(var h=[.5,.25,.75],l={winding:0,quality:-1},c=0;c<h.length&&l.quality<.5;c++)for(var f=a*h[c],d=0,p=s.length;d<p;d++){var _=s[d],m=_.length;if(f<=m){var y=_.curve,b=y._path,x=b._parent,w=x instanceof z?x:b,T=v.clamp(y.getTimeAt(f),1e-8,1-1e-8),E=y.getPointAtTime(T),S=g(y.getTangentAtTime(T).y)<Math.SQRT1_2,C=r.subtract&&i&&(w===e&&i._getWinding(E,S,!0).winding||w===i&&!e._getWinding(E,S,!0).winding)?{winding:0,quality:1}:u(E,n,S,!0);C.quality>l.quality&&(l=C);break}f-=m}for(d=s.length-1;d>=0;d--)s[d].segment._winding=l}function f(t,e){function i(t){var i;return!(!t||t._visited||e&&(!e[(i=t._winding||{}).winding]||e.unite&&2===i.winding&&i.windingL&&i.windingR))}function n(t){if(t)for(var e=0,i=s.length;e<i;e++)if(t===s[e])return!0;return!1}function r(t){for(var e=t._segments,i=0,n=e.length;i<n;i++)e[i]._visited=!0}var s,o=[];t.sort(function(t,e){var i=t._intersection,n=e._intersection,r=!(!i||!i._overlap),s=!(!n||!n._overlap),o=t._path,a=e._path;return r^s?r?1:-1:!i^!n?i?1:-1:o!==a?o._id-a._id:t._index-e._index});for(var a=0,h=t.length;a<h;a++){var u,l,c,f=t[a],d=i(f),p=null,g=!1,v=!0,_=[];if(d&&f._path._overlapsOnly){var m=f._path,y=f._intersection._segment._path;m.compare(y)&&(m.getArea()&&o.push(m.clone(!1)),r(m),r(y),d=!1)}for(;d;){var b=!p,x=function(t,e){function r(r,o){for(;r&&r!==o;){var a=r._segment,u=a&&a._path;if(u){var l=a.getNext()||u.getFirstSegment(),c=l._intersection;a!==t&&(n(a)||n(l)||l&&i(a)&&(i(l)||c&&i(c._segment)))&&h.push(a),e&&s.push(a)}r=r._next}}var o=t._intersection,a=o,h=[];if(e&&(s=[t]),o){for(r(o);o&&o._prev;)o=o._prev;r(o,a)}return h}(f,b),w=x.shift(),T=!(g=!b&&(n(f)||n(w)))&&w;if(b&&(p=new U(P.NO_INSERT),u=null),g){(f.isFirst()||f.isLast())&&(v=f._path._closed),f._visited=!0;break}if(T&&u&&(_.push(u),u=null),u||(T&&x.push(f),u={start:p._segments.length,crossings:x,visited:l=[],handleIn:c}),T&&(f=w),!i(f)){p.removeSegments(u.start);for(var E=0,S=l.length;E<S;E++)l[E]._visited=!1;l.length=0;do{(f=u&&u.crossings.shift())&&f._path||(f=null,(u=_.pop())&&(l=u.visited,c=u.handleIn))}while(u&&!i(f));if(!f)break}var C=f.getNext();p.add(new D(f._point,c,C&&f._handleOut)),f._visited=!0,l.push(f),f=C||f._path.getFirstSegment(),c=C&&C._handleIn}g&&(v&&(p.getFirstSegment().setHandleIn(c),p.setClosed(v)),0!==p.getArea()&&o.push(p))}return o}var d=Math.min,p=Math.max,g=Math.abs,_={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,i){return u(t,this.getCurves(),e,i)},unite:function(t,e){return i(this,t,"unite",e)},intersect:function(t,e){return i(this,t,"intersect",e)},subtract:function(t,e){return i(this,t,"subtract",e)},exclude:function(t,e){return i(this,t,"exclude",e)},divide:function(t,i){return i&&(0==i.trace||i.stroke)?n(this,t,"divide"):e([this.subtract(t,i),this.intersect(t,i)],!0,this,t,i)},resolveCrossings:function(){function t(t,e){var i=t&&t._intersection;return i&&i._overlap&&i._path===e}var e=this._children,i=e||[this],n=!1,r=!1,o=this.getIntersections(null,function(t){return t.hasOverlap()&&(n=!0)||t.isCrossing()&&(r=!0)}),h=n&&r&&[];if(o=j.expand(o),n)for(var u=a(o,function(t){return t.hasOverlap()},h),l=u.length-1;l>=0;l--){var d=u[l],p=d._path,g=d._segment,v=g.getPrevious(),_=g.getNext();t(v,p)&&t(_,p)&&(g.remove(),v._handleOut._set(0,0),_._handleIn._set(0,0),v===g||v.getCurve().hasLength()||(_._handleIn.set(v._handleIn),v.remove()))}r&&(a(o,n&&function(t){var e=t.getCurve(),i=t.getSegment(),n=t._intersection,r=n._curve,s=n._segment;if(e&&r&&e._path&&r._path)return!0;i&&(i._intersection=null),s&&(s._intersection=null)},h),h&&s(h),i=f(c.each(i,function(t){this.push.apply(this,t._segments)},[])));var m,y=i.length;return y>1&&e?(i!==e&&this.setChildren(i),m=this):1!==y||e||(i[0]!==this&&this.setSegments(i[0].removeSegments()),m=this),m||((m=new z(P.NO_INSERT)).addChildren(i),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(t,e){var i=this._children;return i&&i.length?this.setChildren(o(this.removeChildren(),function(e){return!!(t?e:1&e)},e)):e!==h&&this.setClockwise(e),this},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var e=this.getCurves(),i=t.y,n=[],r=[],s=0,o=e.length;s<o;s++){var a=e[s].getValues(),h=a[1],u=a[3],l=a[5],c=a[7];if(i>=d(h,u,l,c)&&i<=p(h,u,l,c))for(var f=F.getMonoCurves(a),g=0,v=f.length;g<v;g++){var _=f[g],m=_[1],y=_[7];if(m!==y&&(i>=m&&i<=y||i>=y&&i<=m)){var b=i===m?_[0]:i===y?_[6]:1===F.solveCubic(_,1,i,r,0,1)?F.getPoint(_,r[0]).x:(_[0]+_[6])/2;n.push(b)}}}n.length>1&&(n.sort(function(t,e){return t-e}),t.x=(n[0]+n[1])/2)}return t}}});var V=c.extend({_class:"PathFlattener",initialize:function(t,e,i,n,r){function s(t,e){var i=F.getValues(t,e,r);h.push(i),o(i,t._index,0,1)}function o(t,i,r,s){if(!(s-r>c)||n&&F.isStraight(t)||F.isFlatEnough(t,e||.25)){var a=t[6]-t[0],h=t[7]-t[1],f=Math.sqrt(a*a+h*h);f>0&&(l+=f,u.push({offset:l,curve:t,index:i,time:s}))}else{var d=F.subdivide(t,.5),p=(r+s)/2;o(d[0],i,r,p),o(d[1],i,p,s)}}for(var a,h=[],u=[],l=0,c=1/(i||32),f=t._segments,d=f[0],p=1,g=f.length;p<g;p++)s(d,a=f[p]),d=a;t._closed&&s(a,f[0]),this.curves=h,this.parts=u,this.length=l,this.index=0},_get:function(t){for(var e,i=this.parts,n=i.length,r=this.index;e=r,r&&!(i[--r].offset<t););for(;e<n;e++){var s=i[e];if(s.offset>=t){this.index=e;var o=i[e-1],a=o&&o.index===s.index?o.time:0,h=o?o.offset:0;return{index:s.index,time:a+(s.time-a)*(t-h)/(s.offset-h)}}}return{index:i[n-1].index,time:1}},drawPart:function(t,e,i){for(var n=this._get(e),r=this._get(i),s=n.index,o=r.index;s<=o;s++){var a=F.getPart(this.curves[s],s===n.index?n.time:0,s===r.index?r.time:1);s===n.index&&t.moveTo(a[0],a[1]),t.bezierCurveTo.apply(t,a.slice(2))}}},c.each(F._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this._get(e);return F[t](this.curves[i.index],i.time)}},{})),X=c.extend({initialize:function(t){for(var e,i=this.points=[],n=t._segments,r=t._closed,s=0,o=n.length;s<o;s++){var a=n[s].point;e&&e.equals(a)||i.push(e=a.clone())}r&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=r},fit:function(t){var e=this.points,i=e.length,n=null;return i>0&&(n=[new D(e[0])],i>1&&(this.fitCubic(n,t,0,i-1,e[1].subtract(e[0]),e[i-2].subtract(e[i-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,i,n,r,s){var o=this.points;if(n-i!=1){for(var a,h=this.chordLengthParameterize(i,n),u=Math.max(e,e*e),l=!0,c=0;c<=4;c++){var f=this.generateBezier(i,n,h,r,s),d=this.findMaxError(i,n,f,h);if(d.error<e&&l)return void this.addCurve(t,f);if(a=d.index,d.error>=u)break;l=this.reparameterize(i,n,h,f),u=d.error}var p=o[a-1].subtract(o[a+1]);this.fitCubic(t,e,i,a,r,p),this.fitCubic(t,e,a,n,p.negate(),s)}else{var g=o[i],v=o[n],_=g.getDistance(v)/3;this.addCurve(t,[g,g.add(r.normalize(_)),v.add(s.normalize(_)),v])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new D(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,i,n,r){for(var s=Math.abs,o=this.points,a=o[t],h=o[e],u=[[0,0],[0,0]],l=[0,0],c=0,f=e-t+1;c<f;c++){var d=i[c],p=1-d,g=3*d*p,v=p*p*p,_=g*p,m=g*d,y=d*d*d,b=n.normalize(_),x=r.normalize(m),w=o[t+c].subtract(a.multiply(v+_)).subtract(h.multiply(m+y));u[0][0]+=b.dot(b),u[0][1]+=b.dot(x),u[1][0]=u[0][1],u[1][1]+=x.dot(x),l[0]+=b.dot(w),l[1]+=x.dot(w)}var T,E,S=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(s(S)>1e-12){var C=u[0][0]*l[1]-u[1][0]*l[0];T=(l[0]*u[1][1]-l[1]*u[0][1])/S,E=C/S}else{var P=u[0][0]+u[0][1],O=u[1][0]+u[1][1];T=E=s(P)>1e-12?l[0]/P:s(O)>1e-12?l[1]/O:0}var M,A,I=h.getDistance(a),k=1e-12*I;if(T<k||E<k)T=E=I/3;else{var R=h.subtract(a);M=n.normalize(T),A=r.normalize(E),M.dot(R)-A.dot(R)>I*I&&(T=E=I/3,M=A=null)}return[a,a.add(M||n.normalize(T)),h.add(A||r.normalize(E)),h]},reparameterize:function(t,e,i,n){for(r=t;r<=e;r++)i[r-t]=this.findRoot(n,this.points[r],i[r-t]);for(var r=1,s=i.length;r<s;r++)if(i[r]<=i[r-1])return!1;return!0},findRoot:function(t,e,i){for(var n=[],r=[],s=0;s<=2;s++)n[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)r[s]=n[s+1].subtract(n[s]).multiply(2);var o=this.evaluate(3,t,i),a=this.evaluate(2,n,i),h=this.evaluate(1,r,i),u=o.subtract(e),l=a.dot(a)+u.dot(h);return v.isZero(l)?i:i-u.dot(a)/l},evaluate:function(t,e,i){for(var n=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)n[s]=n[s].multiply(1-i).add(n[s+1].multiply(i));return n[0]},chordLengthParameterize:function(t,e){for(var i=[0],n=t+1;n<=e;n++)i[n-t]=i[n-t-1]+this.points[n].getDistance(this.points[n-1]);for(var n=1,r=e-t;n<=r;n++)i[n]/=i[r];return i},findMaxError:function(t,e,i,n){for(var r=Math.floor((e-t+1)/2),s=0,o=t+1;o<e;o++){var a=this.evaluate(3,i,n[o-t]).subtract(this.points[o]),h=a.x*a.x+a.y*a.y;h>=s&&(s=h,r=o)}return{error:s,index:r}}}),q=P.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&c.isPlainObject(t)&&t.x===h&&t.y===h;this._initialize(e&&t,!e&&m.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),G=q.extend({_class:"PointText",initialize:function(){q.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new y(t.x,t.y,this,"setPoint")},setPoint:function(){var t=m.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,i){if(this._content){this._setStyles(t,e,i);var n=this._lines,r=this._style,s=r.hasFill(),o=r.hasStroke(),a=r.getLeading(),h=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var u=0,l=n.length;u<l;u++){t.shadowColor=h;var c=n[u];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),o&&t.strokeText(c,0,0),t.translate(0,a)}}},_getBounds:function(t,e){var i=this._style,n=this._lines,r=n.length,s=i.getJustification(),o=i.getLeading(),a=this.getView().getTextWidth(i.getFontStyle(),n),h=0;"left"!==s&&(h-=a/("center"===s?2:1));var u=new w(h,r?-.75*o:0,a,r*o);return t?t._transformBounds(u,u):u}}),H=c.extend(new function(){function t(t){var i,n=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(n){i=[0,0,0];for(s=0;s<3;s++){a=n[s+1];i[s]=parseInt(1==a.length?a+a:a,16)/255}}else if(n=t.match(/^rgba?\((.*)\)$/))for(var s=0,o=(i=n[1].split(",")).length;s<o;s++){var a=+i[s];i[s]=s<3?a/255:a}else if(u){var h=r[t];if(!h){e||((e=at.getContext(1,1)).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var l=e.getImageData(0,0,1,1).data;h=r[t]=[l[0]/255,l[1]/255,l[2]/255]}i=h.slice()}else i=[0,0,0];return i}var e,i={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},n={},r={},s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(t,e,i){var n=Math.max(t,e,i),r=n-Math.min(t,e,i);return[0===r?0:60*(n==t?(e-i)/r+(e<i?6:0):n==e?(i-t)/r+2:(t-e)/r+4),0===n?0:r/n,n]},"hsb-rgb":function(t,e,i){t=(t/60%6+6)%6;var n=Math.floor(t),r=t-n,o=[i,i*(1-e),i*(1-e*r),i*(1-e*(1-r))];return[o[(n=s[n])[0]],o[n[1]],o[n[2]]]},"rgb-hsl":function(t,e,i){var n=Math.max(t,e,i),r=Math.min(t,e,i),s=n-r,o=0===s,a=(n+r)/2;return[o?0:60*(n==t?(e-i)/s+(e<i?6:0):n==e?(i-t)/s+2:(t-e)/s+4),o?0:a<.5?s/(n+r):s/(2-n-r),a]},"hsl-rgb":function(t,e,i){if(t=(t/360%1+1)%1,0===e)return[i,i,i];for(var n=[t+1/3,t,t-1/3],r=i<.5?i*(1+e):i+e-i*e,s=2*i-r,o=[],a=0;a<3;a++){var h=n[a];h<0&&(h+=1),h>1&&(h-=1),o[a]=6*h<1?s+6*(r-s)*h:2*h<1?r:3*h<2?s+(r-s)*(2/3-h)*6:s}return o},"rgb-gray":function(t,e,i){return[.2989*t+.587*e+.114*i]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(i,function(t,e){n[e]=[],c.each(t,function(t,r){var s=c.capitalize(t),o=/^(hue|saturation)$/.test(t),a=n[e][r]="gradient"===t?function(t){var e=this._components[0];return t=W.read(Array.isArray(t)?t:arguments,0,{readNull:!0}),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===e?function(){return m.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+s]=function(){return this._type===e||o&&/^hs[bl]$/.test(this._type)?this._components[r]:this._convert(e)[r]},this["set"+s]=function(t){this._type===e||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=i[e],this._type=e),this._components[r]=a.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function e(r){var s,o,a,h,u=arguments,l=this.__read,f=0;Array.isArray(r)&&(r=(u=r)[0]);var d=null!=r&&typeof r;if("string"===d&&r in i&&(s=r,r=u[1],Array.isArray(r)?(o=r,a=u[2]):(l&&(f=1),u=c.slice(u,1),d=typeof r)),!o){if(h="number"===d?u:"object"===d&&null!=r.length?r:null){s||(s=h.length>=3?"rgb":"gray");var p=i[s].length;a=h[p],l&&(f+=h===arguments?p+(null!=a?1:0):1),h.length>p&&(h=c.slice(h,0,p))}else if("string"===d)s="rgb",4===(o=t(r)).length&&(a=o[3],o.length--);else if("object"===d)if(r.constructor===e){if(s=r._type,o=r._components.slice(),a=r._alpha,"gradient"===s)for(var g=1,v=o.length;g<v;g++){var _=o[g];_&&(o[g]=_.clone())}}else if(r.constructor===W)s="gradient",h=u;else{var m=i[s="hue"in r?"lightness"in r?"hsl":"hsb":"gradient"in r||"stops"in r||"radial"in r?"gradient":"gray"in r?"gray":"rgb"],y=n[s];this._components=o=[];for(var g=0,v=m.length;g<v;g++)null==(b=r[m[g]])&&!g&&"gradient"===s&&"stops"in r&&(b={stops:r.stops,radial:r.radial}),null!=(b=y[g].call(this,b))&&(o[g]=b);a=r.alpha}l&&s&&(f=1)}if(this._type=s||"rgb",!o){this._components=o=[];for(var g=0,v=(y=n[this._type]).length;g<v;g++){var b=y[g].call(this,h&&h[g]);null!=b&&(o[g]=b)}}return this._components=o,this._properties=i[this._type],this._alpha=a,l&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var i=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=o[this._type+"-"+t])?e.apply(this,this._components):o["rgb-"+t].apply(this,o[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new H(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=i[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=c.isPlainValue(t,!0)?H.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&c.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],i="gradient"===this._type,n=g.instance,r=0,s=t.length;r<s;r++){var o=this._components[r];null!=o&&e.push(t[r]+": "+(i?o:n.number(o)))}return null!=this._alpha&&e.push("alpha: "+n.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var i=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;return i=[e(i[0]),e(i[1]),e(i[2])],n<1&&i.push(n<0?0:n),t?"#"+((1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]).toString(16).slice(1):(4==i.length?"rgba(":"rgb(")+i.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var i,n=this._components,r=n[0],s=r._stops,o=n[1],a=n[2],h=n[3],u=e&&e.inverted();if(u&&(o=u._transformPoint(o),a=u._transformPoint(a),h&&(h=u._transformPoint(h))),r._radial){var l=a.getDistance(o);if(h){var c=h.subtract(o);c.getLength()>l&&(h=o.add(c.normalize(l-.1)))}var f=h||o;i=t.createRadialGradient(f.x,f.y,0,o.x,o.y,l)}else i=t.createLinearGradient(o.x,o.y,a.x,a.y);for(var d=0,p=s.length;d<p;d++){var g=s[d],v=g._offset;i.addColorStop(null==v?d/(p-1):v,g._color.toCanvasStyle())}return this._canvasStyle=i},transform:function(t){if("gradient"===this._type){for(var e=this._components,i=1,n=e.length;i<n;i++){var r=e[i];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:i,random:function(){var t=Math.random;return new H(t(),t(),t())}}})},new function(){var t={add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}};return c.each(t,function(t,e){this[e]=function(e){e=H.read(arguments);for(var i=this._type,n=this._components,r=e._convert(i),s=0,o=n.length;s<o;s++)r[s]=t(n[s],r[s]);return new H(i,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),W=c.extend({_class:"Gradient",initialize:function(t,e){this._id=_.get(),t&&c.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return c.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=h))},clone:function(){for(var t=[],e=0,i=this._stops.length;e<i;e++)t[e]=this._stops[e].clone();return new W(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var i=0,n=e.length;i<n;i++)e[i]._owner=h;for(var i=0,n=(e=this._stops=Y.readList(t,0,{clone:!0})).length;i<n;i++)e[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,i=t._stops,n=e.length;if(n===i.length){for(var r=0;r<n;r++)if(!e[r].equals(i[r]))return!1;return!0}}return!1}}),Y=c.extend({_class:"GradientStop",initialize:function(t,e){var i=t,n=e;"object"==typeof t&&e===h&&(Array.isArray(t)&&"number"!=typeof t[0]?(i=t[0],n=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(i=t.color,n=t.offset||t.rampPoint||0)),this.setColor(i),this.setOffset(n)},clone:function(){return new Y(this._color.clone(),this._offset)},_serialize:function(t,e){var i=this._color,n=this._offset;return c.serialize(null==n?[i]:[i,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=H.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Z=c.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new m,selectedColor:null},e=c.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=c.set({},e,{fillColor:new H}),n={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},r={beans:!0},s={_class:"Style",beans:!0,initialize:function(n,r,s){this._values={},this._owner=r,this._project=r&&r._project||s||o.project,this._defaults=!r||r instanceof O?e:r instanceof q?i:t,n&&this.set(n)}};return c.each(e,function(t,e){var i=/Color$/.test(e),o="shadowOffset"===e,a=c.capitalize(e),u=n[e],l="set"+a,f="get"+a;s[l]=function(t){var n=this._owner,r=n&&n._children;if(r&&r.length>0&&!(n instanceof z))for(var s=0,o=r.length;s<o;s++)r[s]._style[l](t);else if(e in this._defaults){var a=this._values[e];a!==t&&(i&&(a&&a._owner!==h&&(a._owner=h),t&&t.constructor===H&&(t._owner&&(t=t.clone()),t._owner=n)),this._values[e]=t,n&&n._changed(u||65))}},s[f]=function(t){var n,r=this._owner,s=r&&r._children;if(e in this._defaults&&(!s||!s.length||t||r instanceof z))if((n=this._values[e])===h)(n=this._defaults[e])&&n.clone&&(n=n.clone());else{var a=i?H:o?m:null;!a||n&&n.constructor===a||(this._values[e]=n=a.read([n],0,{readNull:!0,clone:!0}),n&&i&&(n._owner=r))}else if(s)for(var u=0,l=s.length;u<l;u++){var d=s[u]._style[f]();if(u){if(!c.equals(n,d))return h}else n=d}return n},r[f]=function(t){return this._style[f](t)},r[l]=function(t){this._style[l](t)}}),c.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var i="get"+e,n="set"+e;s[i]=r[i]="#get"+t,s[n]=r[n]="#set"+t}),P.inject(r),s},{set:function(t){var e=t instanceof Z,i=e?t._values:t;if(i)for(var n in i)if(n in this._defaults){var r=i[n];this[n]=r&&e&&r.clone?r.clone():r}},equals:function(t){function e(t,e,i){var n=t._values,r=e._values,s=e._defaults;for(var o in n){var a=n[o],u=r[o];if(!(i&&o in r||c.equals(a,u===h?s[o]:u)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),i=this.getFontSize();return/pt|em|%|px/.test(i)&&(i=this.getView().getPixelSize(i)),null!=e?e:1.2*i}}),K=new function(){function t(t,e,i,n){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),o=0;o<6;o++){var a=r[o],h=a?a+s:e;if(h in t){if(!i)return t[h];t[h]=n;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,i=e&&e.defaultView;return i&&i.getComputedStyle(t,"")},getBounds:function(t,e){var i,n=t.ownerDocument,r=n.body,s=n.documentElement;try{i=t.getBoundingClientRect()}catch(t){i={left:0,top:0,width:0,height:0}}var o=i.left-(s.clientLeft||r.clientLeft||0),a=i.top-(s.clientTop||r.clientTop||0);if(!e){var h=n.defaultView;o+=h.pageXOffset||s.scrollLeft||r.scrollLeft,a+=h.pageYOffset||s.scrollTop||r.scrollTop}return new w(o,a,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,n=e.documentElement;return new w(0,0,i.innerWidth||n.clientWidth,i.innerHeight||n.clientHeight)},getOffset:function(t,e){return K.getBounds(t,e).getPoint()},getSize:function(t){return K.getBounds(t,!0).getSize()},isInvisible:function(t){return K.getSize(t).equals(new b(0,0))},isInView:function(t){return!K.isInvisible(t)&&K.getViewportBounds(t).intersects(K.getBounds(t,!0))},isInserted:function(t){return l.body.contains(t)},getPrefixed:function(e,i){return e&&t(e,i)},setPrefixed:function(e,i,n){if("object"==typeof i)for(var r in i)t(e,r,!0,i[r]);else t(e,i,!0,n)}}},$={add:function(t,e){if(t)for(var i in e)for(var n=e[i],r=i.split(/[\s,]+/g),s=0,o=r.length;s<o;s++)t.addEventListener(r[s],n,!1)},remove:function(t,e){if(t)for(var i in e)for(var n=e[i],r=i.split(/[\s,]+/g),s=0,o=r.length;s<o;s++)t.removeEventListener(r[s],n,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new m(e.pageX||e.clientX+l.documentElement.scrollLeft,e.pageY||e.clientY+l.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return $.getPoint(t).subtract(K.getOffset(e||$.getTarget(t)))}};$.requestAnimationFrame=new function(){function t(){var e=r;r=[];for(var s=0,o=e.length;s<o;s++)e[s]();(n=i&&r.length)&&i(t)}var e,i=K.getPrefixed(u,"requestAnimationFrame"),n=!1,r=[];return function(s){r.push(s),i?n||(i(t),n=!0):e||(e=setInterval(t,1e3/60))}};var J=c.extend(f,{_class:"View",initialize:function t(e,i){function n(t){return i[t]||parseInt(i.getAttribute(t),10)}function r(){var t=K.getSize(i);return t.isNaN()||t.isZero()?new b(n("width"),n("height")):t}var s;if(u&&i){this._id=i.getAttribute("id"),null==this._id&&i.setAttribute("id",this._id="view-"+t._id++),$.add(i,this._viewEvents);if(K.setPrefixed(i.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),d.hasAttribute(i,"resize")){var a=this;$.add(u,this._windowEvents={resize:function(){a.setViewSize(r())}})}if(s=r(),d.hasAttribute(i,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var h=this._stats.domElement,c=h.style,f=K.getOffset(i);c.position="absolute",c.left=f.x+"px",c.top=f.y+"px",l.body.appendChild(h)}}else s=new b(i),i=null;this._project=e,this._scope=e._scope,this._element=i,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(s.width,s.height),this._viewSize=s,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new E)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!o.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;J._focused===this&&(J._focused=null),J._views.splice(J._views.indexOf(this),1),delete J._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),$.remove(this._element,this._viewEvents),$.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(P._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;$.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;K.getPrefixed(l,"hidden")&&"true"!==d.getAttribute(e,"keepalive")||!K.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){o=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new c({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete i[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new c(t,{time:i.time+=t.delta,count:i.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=h},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new x(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=b.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var i=this._element;i&&(i.width!==t&&(i.width=t),i.height!==e&&(i.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new m,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return K.isInView(this._element)},isInserted:function(){return K.isInserted(this._element)},getPixelSize:function(t){var e,i=this._element;if(i){var n=i.parentNode,r=l.createElement("div");r.style.fontSize=t,n.appendChild(r),e=parseFloat(K.getStyles(r).fontSize),n.removeChild(r)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},c.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?c:m).read(arguments),n=m.read(arguments,0,{readNull:!0});return this.transform((new E)[t](i,n||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=m.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new E).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return e?new y(e.x,e.y,this,"setScaling"):h},setScaling:function(){var t=this.getScaling(),e=m.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(m.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(m.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(m.read(arguments))},getEventPoint:function(t){return this.viewToProject($.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return l&&"string"==typeof e&&(e=l.getElementById(e)),new(u?Q:J)(t,e)}}},new function(){function t(t){var e=$.getTarget(t);return e.getAttribute&&J._viewsById[e.getAttribute("id")]}function e(){var t=J._focused;if(!t||!t.isVisible())for(var e=0,i=J._views.length;e<i;e++)if((t=J._views[e]).isVisible()){J._focused=a=t;break}}function i(t,e,i){t._handleMouseEvent("mousemove",e,i)}function n(t,e,i,n,r,s,o){function a(t,i){if(t.responds(i)){if(h||(h=new nt(i,n,r,e||t,s?r.subtract(s):null)),t.emit(i,h)&&(P=!0,h.prevented&&(O=!0),h.stopped))return u=!0}else{var o=M[i];if(o)return a(t,o)}}for(var h,u=!1;t&&t!==o&&!a(t,i);)t=t._parent;return u}function r(t,e,i,r,s,o){return t._project.removeOn(i),O=P=!1,T&&n(T,null,i,r,s,o)||e&&e!==T&&!e.isDescendant(T)&&n(e,null,i,r,s,o,T)||n(t,T||e||t,i,r,s,o)}if(u){var s,a,h,c,f,d=!1,p=!1,g=u.navigator;g.pointerEnabled||g.msPointerEnabled?(h="pointerdown MSPointerDown",c="pointermove MSPointerMove",f="pointerup pointercancel MSPointerUp MSPointerCancel"):(h="touchstart",c="touchmove",f="touchend touchcancel","ontouchstart"in u&&g.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(h+=" mousedown",c+=" mousemove",f+=" mouseup"));var v={},_={mouseout:function(t){var e=J._focused,n=$.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var r=$.getOffset(t,e._element),s=r.x,o=Math.abs,a=o(s),h=a-(1<<25);r.x=o(h)<a?h*(s<0?-1:1):s,i(e,t,e.viewToProject(r))}},scroll:e};v[h]=function(e){var i=J._focused=t(e);d||(d=!0,i._handleMouseEvent("mousedown",e))},_[c]=function(n){var r=J._focused;if(!p){var o=t(n);o?r!==o&&(r&&i(r,n),s||(s=r),r=J._focused=a=o):a&&a===r&&(s&&!s.isInserted()&&(s=null),r=J._focused=s,s=null,e())}r&&i(r,n)},_[h]=function(){p=!0},_[f]=function(t){var e=J._focused;e&&d&&e._handleMouseEvent("mouseup",t),p=d=!1},$.add(l,_),$.add(u,{load:e});var m,y,b,x,w,T,E,S,C,P=!1,O=!1,M={doubleclick:"click",mousedrag:"mousemove"},A=!1,I={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:v,_handleMouseEvent:function(t,e,i){function s(t){return o.virtual[t]||l.responds(t)||u&&u.responds(t)}var o=this._itemEvents,a=o.native[t],h="mousemove"===t,u=this._scope.tool,l=this;h&&d&&s("mousedrag")&&(t="mousedrag"),i||(i=this.getEventPoint(e));var c=this.getBounds().contains(i),f=a&&c&&l._project.hitTest(i,{tolerance:0,fill:!0,stroke:!0}),p=f&&f.item||null,g=!1,v={};if(v[t.substr(5)]=!0,a&&p!==w&&(w&&n(w,null,"mouseleave",e,i),p&&n(p,null,"mouseenter",e,i),w=p),A^c&&(n(this,null,c?"mouseenter":"mouseleave",e,i),m=c?this:null,g=!0),!c&&!v.drag||i.equals(b)||(r(this,p,h?t:"mousemove",e,i,b),g=!0),A=c,v.down&&c||v.up&&y){if(r(this,p,t,e,i,y),v.down){if(C=p===E&&Date.now()-S<300,x=E=p,!O&&p){for(var _=p;_&&!_.responds("mousedrag");)_=_._parent;_&&(T=p)}y=i}else v.up&&(O||p!==x||(S=Date.now(),r(this,p,C?"doubleclick":"click",e,i,y),C=!1),x=T=null);A=!1,g=!0}b=i,g&&u&&(P=u._handleMouseEvent(t,e,i,v)||P),(P&&!v.move||v.down&&s("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,i,n){function r(r){r.responds(t)&&(o=a,r.emit(t,s=s||new et(t,e,i,n)))}var s,a=this._scope,h=a.tool;this.isVisible()&&(r(this),h&&h.responds(t)&&r(h))},_countItemEvent:function(t,e){var i=this._itemEvents,n=i.native,r=i.virtual;for(var s in I)n[s]=(n[s]||0)+(I[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:e}}}}),Q=J.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof u.HTMLCanvasElement)){var i=b.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+c.slice(arguments,1));e=at.getCanvas(i)}var n=this._context=e.getContext("2d");if(n.save(),this._pixelRatio=1,!/^off|false$/.test(d.getAttribute(e,"hidpi"))){var r=u.devicePixelRatio||1,s=K.getPrefixed(n,"backingStorePixelRatio")||1;this._pixelRatio=r/s}J.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,i){var n=this._pixelRatio;if(t.base.call(this,e*n,i*n),1!==n){var r=this._element,s=this._context;if(!d.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=i+"px"}s.restore(),s.save(),s.scale(n,n)}},getPixelSize:function t(e){var i,n=o.agent;if(n&&n.firefox)i=t.base.call(this,e);else{var r=this._context,s=r.font;r.font=e+" serif",i=parseFloat(r.font),r.font=s}return i},getTextWidth:function(t,e){var i=this._context,n=i.font,r=0;i.font=t;for(var s=0,o=e.length;s<o;s++)r=Math.max(r,i.measureText(e[s]).width);return i.font=n,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,i=this._viewSize;return e.clearRect(0,0,i.width+1,i.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),tt=c.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return it.modifiers}}),et=tt.extend({_class:"KeyEvent",initialize:function(t,e,i,n){this.type=t,this.event=e,this.key=i,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),it=new function(){function t(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===h?String.fromCharCode(t.keyCode):e,r[e]||(e.length>1?c.hyphenate(e):e.toLowerCase())}function e(t,n,r,s){var h,u=J._focused;if(a[n]=t,t?f[n]=r:delete f[n],n.length>1&&(h=c.camelize(n))in d){d[h]=t;var l=o&&o.agent;if("meta"===h&&l&&l.mac)if(t)i={};else{for(var p in i)p in f&&e(!1,p,i[p],s);i=null}}else t&&i&&(i[n]=r);u&&u._handleKeyEvent(t?"keydown":"keyup",s,n,r)}var i,n,r={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},s={tab:"\t",space:" ",enter:"\r"},a={},f={},d=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=o&&o.agent;return t&&t.mac?this.meta:this.control}}});return $.add(l,{keydown:function(i){var r=t(i),a=o&&o.agent;r.length>1||a&&a.chrome&&(i.altKey||a.mac&&i.metaKey||!a.mac&&i.ctrlKey)?e(!0,r,s[r]||(r.length>1?"":r),i):n=r},keypress:function(i){if(n){var r=t(i),s=i.charCode,o=s>=32?String.fromCharCode(s):r.length>1?"":r;r!==n&&(r=o.toLowerCase()),e(!0,r,o,i),n=null}},keyup:function(i){var n=t(i);n in f&&e(!1,n,f[n],i)}}),$.add(u,{blur:function(t){for(var i in f)e(!1,i,f[i],t)}}),{modifiers:d,isDown:function(t){return!!a[t]}}},nt=tt.extend({_class:"MouseEvent",initialize:function(t,e,i,n,r){this.type=t,this.event=e,this.point=i,this.target=n,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),rt=tt.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;/^(Group|CompoundPath)$/.test(i._class);)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),st=p.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){p.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,i,n){function r(t,e){var r=i,s=a?f._point:f._downPoint||r;if(a){if(f._moveCount&&r.equals(s))return!1;if(s&&(null!=t||null!=e)){var o=r.subtract(s),h=o.getLength();if(h<(t||0))return!1;e&&(r=s.add(o.normalize(Math.min(h,e))))}f._moveCount++}return f._point=r,f._lastPoint=s||r,n.down&&(f._moveCount=-1,f._downPoint=r,f._downCount++),!0}function s(){h&&(c=f.emit(t,new rt(f,t,e))||c)}o=this._scope,n.drag&&!this.responds(t)&&(t="mousemove");var a=n.move||n.drag,h=this.responds(t),u=this.minDistance,l=this.maxDistance,c=!1,f=this;if(n.down)r(),s();else if(n.up)r(null,l),s();else if(h)for(;r(u,l);)s();return c}}),ot={request:function(t){var e=new a.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,c.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var i=e.status;0===i||200===i?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var i=e.status,n='Could not load "'+t.url+'" (Status: '+i+")";if(!t.onError)throw new Error(n);t.onError(n,i)},e.send(null)}},at={canvases:[],getCanvas:function(t,e){if(!u)return null;var i,n=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?i=this.canvases.pop():(i=l.createElement("canvas"),n=!1);var r=i.getContext("2d");if(!r)throw new Error("Canvas "+i+" is unable to provide a 2D context.");return i.width===t&&i.height===e?n&&r.clearRect(0,0,t+1,e+1):(i.width=t,i.height=e),r.save(),i},getContext:function(t,e){var i=this.getCanvas(t,e);return i?i.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},ht=new function(){function t(t,e,i){return.2989*t+.587*e+.114*i}function e(e,i,n,r){var s=r-t(e,i,n),r=t(d=e+s,p=i+s,g=n+s),o=v(d,p,g),a=_(d,p,g);if(o<0){var h=r-o;d=r+(d-r)*r/h,p=r+(p-r)*r/h,g=r+(g-r)*r/h}if(a>255){var u=255-r,l=a-r;d=r+(d-r)*u/l,p=r+(p-r)*u/l,g=r+(g-r)*u/l}}function i(t,e,i){return _(t,e,i)-v(t,e,i)}function n(t,e,i,n){var r,s=[t,e,i],o=_(t,e,i),a=v(t,e,i);r=0===v(a=a===t?0:a===e?1:2,o=o===t?0:o===e?1:2)?1===_(a,o)?2:1:0,s[o]>s[a]?(s[r]=(s[r]-s[a])*n/(s[o]-s[a]),s[o]=n):s[r]=s[o]=0,s[a]=0,d=s[0],p=s[1],g=s[2]}var r,s,o,a,h,u,l,f,d,p,g,v=Math.min,_=Math.max,m=Math.abs,y={multiply:function(){d=h*r/255,p=u*s/255,g=l*o/255},screen:function(){d=h+r-h*r/255,p=u+s-u*s/255,g=l+o-l*o/255},overlay:function(){d=h<128?2*h*r/255:255-2*(255-h)*(255-r)/255,p=u<128?2*u*s/255:255-2*(255-u)*(255-s)/255,g=l<128?2*l*o/255:255-2*(255-l)*(255-o)/255},"soft-light":function(){var t=r*h/255;d=t+h*(255-(255-h)*(255-r)/255-t)/255,p=(t=s*u/255)+u*(255-(255-u)*(255-s)/255-t)/255,g=(t=o*l/255)+l*(255-(255-l)*(255-o)/255-t)/255},"hard-light":function(){d=r<128?2*r*h/255:255-2*(255-r)*(255-h)/255,p=s<128?2*s*u/255:255-2*(255-s)*(255-u)/255,g=o<128?2*o*l/255:255-2*(255-o)*(255-l)/255},"color-dodge":function(){d=0===h?0:255===r?255:v(255,255*h/(255-r)),p=0===u?0:255===s?255:v(255,255*u/(255-s)),g=0===l?0:255===o?255:v(255,255*l/(255-o))},"color-burn":function(){d=255===h?255:0===r?0:_(0,255-255*(255-h)/r),p=255===u?255:0===s?0:_(0,255-255*(255-u)/s),g=255===l?255:0===o?0:_(0,255-255*(255-l)/o)},darken:function(){d=h<r?h:r,p=u<s?u:s,g=l<o?l:o},lighten:function(){d=h>r?h:r,p=u>s?u:s,g=l>o?l:o},difference:function(){(d=h-r)<0&&(d=-d),(p=u-s)<0&&(p=-p),(g=l-o)<0&&(g=-g)},exclusion:function(){d=h+r*(255-h-h)/255,p=u+s*(255-u-u)/255,g=l+o*(255-l-l)/255},hue:function(){n(r,s,o,i(h,u,l)),e(d,p,g,t(h,u,l))},saturation:function(){n(h,u,l,i(r,s,o)),e(d,p,g,t(h,u,l))},luminosity:function(){e(h,u,l,t(r,s,o))},color:function(){e(r,s,o,t(h,u,l))},add:function(){d=v(h+r,255),p=v(u+s,255),g=v(l+o,255)},subtract:function(){d=_(h-r,0),p=_(u-s,0),g=_(l-o,0)},average:function(){d=(h+r)/2,p=(u+s)/2,g=(l+o)/2},negation:function(){d=255-m(255-r-h),p=255-m(255-s-u),g=255-m(255-o-l)}},b=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),x=at.getContext(1,1);x&&(c.each(y,function(t,e){var i="darken"===e,n=!1;x.save();try{x.fillStyle=i?"#300":"#a00",x.fillRect(0,0,1,1),x.globalCompositeOperation=e,x.globalCompositeOperation===e&&(x.fillStyle=i?"#a00":"#300",x.fillRect(0,0,1,1),n=x.getImageData(0,0,1,1).data[0]!==i?170:51)}catch(t){}x.restore(),b[e]=n}),at.release(x)),this.process=function(t,e,i,n,c){var v=e.canvas,_="normal"===t;if(_||b[t])i.save(),i.setTransform(1,0,0,1,0,0),i.globalAlpha=n,_||(i.globalCompositeOperation=t),i.drawImage(v,c.x,c.y),i.restore();else{var m=y[t];if(!m)return;for(var x=i.getImageData(c.x,c.y,v.width,v.height),w=x.data,T=e.getImageData(0,0,v.width,v.height).data,E=0,S=w.length;E<S;E+=4){r=T[E],h=w[E],s=T[E+1],u=w[E+1],o=T[E+2],l=w[E+2],a=T[E+3],f=w[E+3],m();var C=a*n/255,P=1-C;w[E]=C*d+P*h,w[E+1]=C*p+P*u,w[E+2]=C*g+P*l,w[E+3]=a*n+P*f}i.putImageData(x,c.x,c.y)}}},ut=new function(){function t(t,e,i){for(var n in e){var s=e[n],o=r[n];"number"==typeof s&&i&&(s=i.number(s)),o?t.setAttributeNS(o,n,s):t.setAttribute(n,s)}return t}var e="http://www.w3.org/2000/svg",i="http://www.w3.org/2000/xmlns",n="http://www.w3.org/1999/xlink",r={href:n,xlink:i,xmlns:i+"/","xmlns:xlink":i+"/"};return{svg:e,xmlns:i,xlink:n,create:function(i,n,r){return t(l.createElementNS(e,i),n,r)},get:function(t,e){var i=r[e],n=i?t.getAttributeNS(i,e):t.getAttribute(e);return"null"===n?null:n},set:t}},lt=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof B||t instanceof A||t instanceof q)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var i=c.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&c.each(n,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+i,set:"set"+i}},{});return new function(){function t(t,e,i){var n=new c,r=t.getTranslation();if(e){var s=(t=t._shiftless())._inverseTransform(r);n[i?"cx":"x"]=s.x,n[i?"cy":"y"]=s.y,r=null}if(!t.isIdentity()){var o=t.decompose();if(o){var a=[],h=o.rotation,u=o.scaling,l=o.skewing;r&&!r.isZero()&&a.push("translate("+f.point(r)+")"),h&&a.push("rotate("+f.number(h)+")"),v.isZero(u.x-1)&&v.isZero(u.y-1)||a.push("scale("+f.point(u)+")"),l.x&&a.push("skewX("+f.number(l.x)+")"),l.y&&a.push("skewY("+f.number(l.y)+")"),n.transform=a.join(" ")}else n.transform="matrix("+t.getValues().join(",")+")"}return n}function e(e,i){for(var n=t(e._matrix),r=e._children,s=ut.create("g",n,f),a=0,h=r.length;a<h;a++){var l=r[a],c=u(l,i);if(c)if(l.isClipMask()){var d=ut.create("clipPath");d.appendChild(c),o(l,d,"clip"),ut.set(s,{"clip-path":"url(#"+d.id+")"})}else s.appendChild(c)}return s}function i(e){var i=e._type,n=e._radius,r=t(e._matrix,!0,"rectangle"!==i);if("rectangle"===i){i="rect";var s=e._size,o=s.width,a=s.height;r.x-=o/2,r.y-=a/2,r.width=o,r.height=a,n.isZero()&&(n=null)}return n&&("circle"===i?r.r=n:(r.rx=n.width,r.ry=n.height)),ut.create(i,r,f)}function n(t){var e=s(t,"color");if(!e){var i,n=t.getGradient(),r=n._radial,a=t.getOrigin(),h=t.getDestination();if(r){i={cx:a.x,cy:a.y,r:a.getDistance(h)};var u=t.getHighlight();u&&(i.fx=u.x,i.fy=u.y)}else i={x1:a.x,y1:a.y,x2:h.x,y2:h.y};i.gradientUnits="userSpaceOnUse",e=ut.create((r?"radial":"linear")+"Gradient",i,f);for(var l=n._stops,c=0,d=l.length;c<d;c++){var p=l[c],g=p._color,v=g.getAlpha(),_=p._offset;i={offset:null==_?c/(d-1):_},g&&(i["stop-color"]=g.toCSS(!0)),v<1&&(i["stop-opacity"]=v),e.appendChild(ut.create("stop",i,f))}o(t,e,"color")}return"url(#"+e.id+")"}function r(t,e,i){var r={},s=!i&&t.getParent(),o=[];return null!=t._name&&(r.id=t._name),c.each(lt,function(e){var i=e.get,a=e.type,h=t[i]();if(e.exportFilter?e.exportFilter(t,h):!s||!c.equals(s[i](),h)){if("color"===a&&null!=h){var u=h.getAlpha();u<1&&(r[e.attribute+"-opacity"]=u)}"style"===a?o.push(e.attribute+": "+h):r[e.attribute]=null==h?"none":"color"===a?h.gradient?n(h,t):h.toCSS(!0):"array"===a?h.join(","):"lookup"===a?e.toSVG[h]:h}}),o.length&&(r.style=o.join(";")),1===r.opacity&&delete r.opacity,t._visible||(r.visibility="hidden"),ut.set(e,r,f)}function s(t,e){return d||(d={ids:{},svgs:{}}),t&&d.svgs[e+"-"+(t._id||t.__id||(t.__id=_.get("svg")))]}function o(t,e,i){d||s();var n=d.ids[i]=(d.ids[i]||0)+1;e.id=i+"-"+n,d.svgs[i+"-"+(t._id||t.__id)]=e}function h(t,e){var i=t,n=null;if(d){i="svg"===t.nodeName.toLowerCase()&&t;for(var r in d.svgs)n||(i||(i=ut.create("svg")).appendChild(t),n=i.insertBefore(ut.create("defs"),i.firstChild)),n.appendChild(d.svgs[r]);d=null}return e.asString?(new a.XMLSerializer).serializeToString(i):i}function u(t,e,i){var n=p[t._class],s=n&&n(t,e);if(s){var o=e.onExport;o&&(s=o(t,s,e)||s);var a=JSON.stringify(t._data);a&&"{}"!==a&&"null"!==a&&s.setAttribute("data-paper-data",a)}return s&&r(t,s,i)}function l(t){return t||(t={}),f=new g(t.precision),t}var f,d,p={Group:e,Layer:e,Raster:function(e,i){var n=t(e._matrix,!0),r=e.getSize(),s=e.getImage();return n.x-=r.width/2,n.y-=r.height/2,n.width=r.width,n.height=r.height,n.href=0==i.embedImages&&s&&s.src||e.toDataURL(),ut.create("image",n,f)},Path:function(e,n){var r=n.matchShapes;if(r){var s=e.toShape(!1);if(s)return i(s)}var o,a=e._segments,h=a.length,u=t(e._matrix);if(r&&h>=2&&!e.hasHandles())if(h>2){o=e._closed?"polygon":"polyline";for(var l=[],c=0;c<h;c++)l.push(f.point(a[c]._point));u.points=l.join(" ")}else{o="line";var d=a[0]._point,p=a[1]._point;u.set({x1:d.x,y1:d.y,x2:p.x,y2:p.y})}else o="path",u.d=e.getPathData(null,n.precision);return ut.create(o,u,f)},Shape:i,CompoundPath:function(e,i){var n=t(e._matrix),r=e.getPathData(null,i.precision);return r&&(n.d=r),ut.create("path",n,f)},SymbolItem:function(e,i){var n=t(e._matrix,!0),r=e._definition,a=s(r,"symbol"),h=r._item,l=h.getBounds();return a||((a=ut.create("symbol",{viewBox:f.rectangle(l)})).appendChild(u(h,i)),o(r,a,"symbol")),n.href="#"+a.id,n.x+=l.x,n.y+=l.y,n.width=l.width,n.height=l.height,n.overflow="visible",ut.create("use",n,f)},PointText:function(e){var i=ut.create("text",t(e._matrix,!0),f);return i.textContent=e._content,i}};P.inject({exportSVG:function(t){return t=l(t),h(u(this,t,!0),t)}}),C.inject({exportSVG:function(e){e=l(e);var i=this._children,n=this.getView(),r=c.pick(e.bounds,"view"),s=e.matrix||"view"===r&&n._matrix,o=s&&E.read([s]),a="view"===r?new w([0,0],n.getViewSize()):"content"===r?P._getBounds(i,o,{stroke:!0}).rect:w.read([r],0,{readNull:!0}),d={version:"1.1",xmlns:ut.svg,"xmlns:xlink":ut.xlink};a&&(d.width=a.width,d.height=a.height,(a.x||a.y)&&(d.viewBox=f.rectangle(a)));var p=ut.create("svg",d,f),g=p;o&&!o.isIdentity()&&(g=p.appendChild(ut.create("g",t(o),f)));for(var v=0,_=i.length;v<_;v++)g.appendChild(u(i[v],e,!0));return h(p,e)}})},new function(){function t(t,e,i,n,r){var s=ut.get(t,e),o=null==s?n?null:i?"":0:i?s:parseFloat(s);return/%\s*$/.test(s)?o/100*(r?1:T[/x|^width/.test(e)?"width":"height"]):o}function e(e,i,n,r,s){return i=t(e,i||"x",!1,r,s),n=t(e,n||"y",!1,r,s),!r||null!=i&&null!=n?new m(i,n):null}function i(e,i,n,r,s){return i=t(e,i||"width",!1,r,s),n=t(e,n||"height",!1,r,s),!r||null!=i&&null!=n?new b(i,n):null}function n(t,e,i){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?_(t)||t:"lookup"===e?i[t]:t}function r(t,e,i,n){var r=t.childNodes,s="clippath"===e,o="defs"===e,a=new O,h=a._project,u=h._currentStyle,l=[];if(s||o||(a=v(a,t,n),h._currentStyle=a._style.clone()),n)for(var c=t.querySelectorAll("defs"),f=0,d=c.length;f<d;f++)y(c[f],i,!1);for(var f=0,d=r.length;f<d;f++){var p,g=r[f];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(p=y(g,i,!1))||p instanceof R||l.push(p)}return a.addChildren(l),s&&(a=v(a.reduce(),t,n)),h._currentStyle=u,(s||o)&&(a.remove(),a=null),a}function s(t,e){for(var i=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),n=[],r=0,s=i.length;r<s;r+=2)n.push(new m(parseFloat(i[r]),parseFloat(i[r+1])));var o=new U(n);return"polygon"===e&&o.closePath(),o}function f(i,n){var r,s=(t(i,"href",!0)||"").substring(1),o="radialgradient"===n;if(s)(r=S[s].getGradient())._radial^o&&((r=r.clone())._radial=o);else{for(var a=i.childNodes,h=[],u=0,l=a.length;u<l;u++){var c=a[u];1===c.nodeType&&h.push(v(new Y,c))}r=new W(h,o)}var f,d,p,g="userSpaceOnUse"!==t(i,"gradientUnits",!0);return o?(d=(f=e(i,"cx","cy",!1,g)).add(t(i,"r",!1,!1,g),0),p=e(i,"fx","fy",!0,g)):(f=e(i,"x1","y1",!1,g),d=e(i,"x2","y2",!1,g)),v(new H(r,f,d,p),i)._scaleToBounds=g,null}function d(t,e,i,n){if(t.transform){for(var r=(n.getAttribute(i)||"").split(/\)\s*/g),s=new E,o=0,a=r.length;o<a;o++){var h=r[o];if(!h)break;for(var u=h.split(/\(\s*/),l=u[0],c=u[1].split(/[\s,]+/g),f=0,d=c.length;f<d;f++)c[f]=parseFloat(c[f]);switch(l){case"matrix":s.append(new E(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1],c[2]);break;case"translate":s.translate(c[0],c[1]);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}}function p(t,e,i){var n="fill-opacity"===i?"getFillColor":"getStrokeColor",r=t[n]&&t[n]();r&&r.setAlpha(parseFloat(e))}function g(t,e,i){var n=t.attributes[e],r=n&&n.value;if(!r){var s=c.camelize(e);(r=t.style[s])||i.node[s]===i.parent[s]||(r=i.node[s])}return r?"none"===r?null:r:h}function v(t,e,i){if(e.style){var n=e.parentNode,r={node:K.getStyles(e)||{},parent:!i&&!/^defs$/i.test(n.tagName)&&K.getStyles(n)||{}};c.each(k,function(i,n){var s=g(e,n,r);t=s!==h&&i(t,s,n,e,r)||t})}return t}function _(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=e&&e[1],n=i&&S[u?i.replace(u.location.href.split("#")[0]+"#",""):i];return n&&n._scaleToBounds&&((n=n.clone())._scaleToBounds=!0),n}function y(t,e,n){var r,s,a,h=t.nodeName.toLowerCase(),u="#document"!==h,f=l.body;n&&u&&(T=o.getView().getSize(),T=i(t,null,null,!0)||T,r=ut.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),s=t.parentNode,a=t.nextSibling,r.appendChild(t),f.appendChild(r));var d=o.settings,p=d.applyMatrix,g=d.insertItems;d.applyMatrix=!1,d.insertItems=!1;var _=M[h],m=_&&_(t,h,e,n)||null;if(d.insertItems=g,d.applyMatrix=p,m){!u||m instanceof O||(m=v(m,t,n));var y=e.onImport,b=u&&t.getAttribute("data-paper-data");y&&(m=y(t,m,e)||m),e.expandShapes&&m instanceof A&&(m.remove(),m=m.toPath()),b&&(m._data=JSON.parse(b))}return r&&(f.removeChild(r),s&&(a?s.insertBefore(t,a):s.appendChild(t))),n&&(S={},m&&c.pick(e.applyMatrix,p)&&m.matrix.apply(!0,!0)),m}function x(t,e,i){function n(n){try{var l="object"==typeof n?n:(new a.DOMParser).parseFromString(n,"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+t);o=s,u=y(l,e,!0),e&&!1===e.insert||i._insertItem(h,u);var c=e.onLoad;c&&c(u,n)}catch(t){r(t)}}function r(t,i){var n=e.onError;if(!n)throw new Error(t);n(t,i)}if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var s=o,u=null;if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){n(c.result)},c.onerror=function(){r(c.error)},c.readAsText(t)}n(t)}else{var f=l.getElementById(t);f?n(f):ot.request({url:t,async:!0,onLoad:n,onError:r})}return u}var T,S={},M={"#document":function(t,e,i,n){for(var r=t.childNodes,s=0,o=r.length;s<o;s++){var a=r[s];if(1===a.nodeType)return y(a,i,n)}},g:r,svg:r,clippath:r,polygon:s,polyline:s,path:function(t){return B.create(t.getAttribute("d"))},lineargradient:f,radialgradient:f,image:function(n){var r=new I(t(n,"href",!0));return r.on("load",function(){var t=i(n);this.setSize(t);var r=this._matrix._transformPoint(e(n).add(t.divide(2)));this.translate(r)}),r},symbol:function(t,e,i,n){return new R(r(t,e,i,n),!0)},defs:r,use:function(i){var n=(t(i,"href",!0)||"").substring(1),r=S[n],s=e(i);return r?r instanceof R?r.place(s):r.clone().translate(s):null},circle:function(i){return new A.Circle(e(i,"cx","cy"),t(i,"r"))},ellipse:function(t){return new A.Ellipse({center:e(t,"cx","cy"),radius:i(t,"rx","ry")})},rect:function(t){return new A.Rectangle(new w(e(t),i(t)),i(t,"rx","ry"))},line:function(t){return new U.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var i=new G(e(t).add(e(t,"dx","dy")));return i.setContent(t.textContent.trim()||""),i}},k=c.set(c.each(lt,function(t){this[t.attribute]=function(e,i){if(e[t.set]&&(e[t.set](n(i,t.type,t.fromSVG)),"color"===t.type)){var r=e[t.get]();if(r&&r._scaleToBounds){var s=e.getBounds();r.transform((new E).translate(s.getPoint()).scale(s.getSize()))}}}},{}),{id:function(t,e){S[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var i=_(e);if(i){if((i=i.clone()).setClipMask(!0),!(t instanceof O))return new O(i,t);t.insertChild(0,i)}},gradientTransform:d,transform:d,"fill-opacity":p,"stroke-opacity":p,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var i=e.match(/(.*)%$/);t.setOffset(i?i[1]/100:parseFloat(e))}},viewBox:function(t,e,r,s,o){var a,h=new w(n(e,"array")),u=i(s,null,null,!0);if(t instanceof O){var l=u?u.divide(h.getSize()):1,c=(new E).scale(l).translate(h.getPoint().negate());a=t}else t instanceof R&&(u&&h.setSize(u),a=t._item);if(a){if("visible"!==g(s,"overflow",o)){var f=new A.Rectangle(h);f.setClipMask(!0),a.addChild(f)}c&&a.transform(c)}}});P.inject({importSVG:function(t,e){return x(t,e,this)}}),C.inject({importSVG:function(t,e){return this.activate(),x(t,e,this)}})},c.exports.PaperScript=function(){function t(t,e){return(y.acorn||x).parse(t,e)}function e(t,e,i){var n=E[e];if(t&&t[n]){var r=t[n](i);return"!="===e?!r:r}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i;case"%":return t%i;case"==":return t==i;case"!=":return t!=i}}function f(t,e){var i=S[t];if(e&&e[i])return e[i]();switch(t){case"+":return+e;case"-":return-e}}function p(e,i){function n(t){for(var e=0,i=d.length;e<i;e++){var n=d[e];if(n[0]>=t)break;t+=n[1]}return t}function r(t){return e.substring(n(t.range[0]),n(t.range[1]))}function s(t,i){return e.substring(n(t.range[1]),n(i.range[0]))}function h(t,i){for(var r=n(t.range[0]),s=n(t.range[1]),o=0,a=d.length-1;a>=0;a--)if(r>d[a][0]){o=a+1;break}d.splice(o,0,[r,i.length-s+r]),e=e.substring(0,r)+i+e.substring(s)}function c(t,e){if(t){for(var i in t)if("range"!==i&&"loc"!==i){var n=t[i];if(Array.isArray(n))for(var o=0,a=n.length;o<a;o++)c(n[o],t);else n&&"object"==typeof n&&c(n,t)}switch(t.type){case"UnaryExpression":if(t.operator in S&&"Literal"!==t.argument.type){var u=r(t.argument);h(t,'$__("'+t.operator+'", '+u+")")}break;case"BinaryExpression":if(t.operator in E&&"Literal"!==t.left.type){var l=r(t.left),f=r(t.right),d=s(t.left,t.right),p=t.operator;h(t,"__$__("+l+","+d.replace(new RegExp("\\"+p),'"'+p+'"')+", "+f+")")}break;case"UpdateExpression":case"AssignmentExpression":var g=e&&e.type;if(!("ForStatement"===g||"BinaryExpression"===g&&/^[=!<>]/.test(e.operator)||"MemberExpression"===g&&e.computed))if("UpdateExpression"===t.type){var v=(u=r(t.argument))+" = "+(_="__$__("+u+', "'+t.operator[0]+'", 1)');t.prefix||"AssignmentExpression"!==g&&"VariableDeclarator"!==g||(r(e.left||e.id)===u&&(v=_),v=u+"; "+v),h(t,v)}else if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var l=r(t.left),f=r(t.right),_=l+" = __$__("+l+', "'+t.operator[0]+'", '+f+")";h(t,/^\(.*\)$/.test(r(t))?"("+_+")":_)}}}}if(!e)return"";var f,d=[],p=(i=i||{}).url||"",g=o.agent,v=g.versionNumber,_=!1,m=i.sourceMaps,y=i.source||e,b=/\r\n|\n|\r/gm,x=i.offset||0;if(m&&(g.chrome&&v>=30||g.webkit&&v>=537.76||g.firefox&&v>=23||g.node)){if(g.node)x-=2;else if(u&&p&&!u.location.href.indexOf(p)){var w=l.getElementsByTagName("html")[0].innerHTML;x=w.substr(0,w.indexOf(e)+1).match(b).length+1}var T=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var i=31&t;(t>>=5)&&(i|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[i]}return e}((_=x>0&&!(g.chrome&&v>=36||g.safari&&v>=600||g.firefox&&v>=40||g.node))?0:x)+"A"];T.length=(e.match(b)||[]).length+1+(_?x:0),f={version:3,file:p,names:[],mappings:T.join(";AACA"),sourceRoot:"",sources:[p],sourcesContent:[y]}}return c(t(e,{ranges:!0,preserveParens:!0})),f&&(_&&(e=new Array(x+1).join("\n")+e),/^(inline|both)$/.test(m)&&(e+="\n//# sourceMappingURL=data:application/json;base64,"+a.btoa(unescape(encodeURIComponent(JSON.stringify(f))))),e+="\n//# sourceURL="+(p||"paperscript")),{url:p,source:y,code:e,map:f}}function g(t,i,n){function r(e,i){for(var n in e)!i&&/^_/.test(n)||!new RegExp("([\\b\\s\\W]|^)"+n.replace(/\$/g,"\\$")+"\\b").test(t)||(g.push(n),v.push(e[n]))}o=i;var s,a=i.getView(),h=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new st:null,u=h?h._events:[],d=["onFrame","onResize"].concat(u),g=[],v=[],_="object"==typeof t?t:p(t,n);t=_.code,r({__$__:e,$__:f,paper:i,view:a,tool:h},!0),r(i),(d=c.each(d,function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(g.push(e),this.push(e+": "+e))},[]).join(", "))&&(t+="\nreturn { "+d+" };");var y=o.agent;if(l&&(y.chrome||y.firefox&&y.versionNumber<40)){var b=l.createElement("script"),x=l.head||l.getElementsByTagName("head")[0];y.firefox&&(t="\n"+t),b.appendChild(l.createTextNode("paper._execute = function("+g+") {"+t+"\n}")),x.appendChild(b),s=o._execute,delete o._execute,x.removeChild(b)}else s=Function(g,t);var w=s.apply(i,v)||{};return c.each(u,function(t){var e=w[t];e&&(h[t]=e)}),a&&(w.onResize&&a.setOnResize(w.onResize),a.emit("resize",{size:a.size,delta:new m}),w.onFrame&&a.setOnFrame(w.onFrame),a.requestUpdate()),_}function v(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==d.getAttribute(t,"ignore")){var e=d.getAttribute(t,"canvas"),i=l.getElementById(e),n=t.src||t.getAttribute("data-src"),r=d.hasAttribute(t,"async");if(!i)throw new Error('Unable to find canvas with id "'+e+'"');var s=d.get(i.getAttribute("data-paper-scope"))||(new d).setup(i);return i.setAttribute("data-paper-scope",s._id),n?ot.request({url:n,async:r,mimeType:"text/plain",onLoad:function(t){g(t,s,n)}}):g(t.innerHTML,s,t.baseURI),t.setAttribute("data-paper-ignore","true"),s}}function _(){c.each(l&&l.getElementsByTagName("script"),v)}var y=this,x=y.acorn;if(!x)try{x=i(181)}catch(t){}if(!x){var w,T;x=w=T={},function(t,e){"object"==typeof w&&"object"==typeof T?e(w):(n=[w],r=e,(s="function"==typeof r?r.apply(w,n):r)!==h&&(T.exports=s))}(0,function(t){"use strict";function e(t){ct=t||{};for(var e in gt)Object.prototype.hasOwnProperty.call(ct,e)||(ct[e]=gt[e]);pt=ct.sourceFile||null}function i(t,e){var i=vt(ft,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=_t,n}function n(t){function e(t){if(1==t.length)return i+="return str === "+JSON.stringify(t[0])+";";i+="switch(str){";for(var e=0;e<t.length;++e)i+="case "+JSON.stringify(t[e])+":";i+="return true}return false;"}t=t.split(" ");var i="",n=[];t:for(s=0;s<t.length;++s){for(var r=0;r<n.length;++r)if(n[r][0].length==t[s].length){n[r].push(t[s]);continue t}n.push([t[s]])}if(n.length>3){n.sort(function(t,e){return e.length-t.length}),i+="switch(str.length){";for(var s=0;s<n.length;++s){var o=n[s];i+="case "+o[0].length+":",e(o)}i+="}"}else e(t);return new Function("str",i)}function r(){this.line=St,this.column=_t-Ct}function s(){St=1,_t=Ct=0,Et=!0,u()}function o(t,e){yt=_t,ct.locations&&(xt=new r),wt=t,u(),Tt=e,Et=t.beforeExpr}function a(){var t=ct.onComment&&ct.locations&&new r,e=_t,n=ft.indexOf("*/",_t+=2);if(-1===n&&i(_t-2,"Unterminated comment"),_t=n+2,ct.locations){Ze.lastIndex=e;for(var s;(s=Ze.exec(ft))&&s.index<_t;)++St,Ct=s.index+s[0].length}ct.onComment&&ct.onComment(!0,ft.slice(e+2,n),e,_t,t,ct.locations&&new r)}function h(){for(var t=_t,e=ct.onComment&&ct.locations&&new r,i=ft.charCodeAt(_t+=2);_t<dt&&10!==i&&13!==i&&8232!==i&&8233!==i;)++_t,i=ft.charCodeAt(_t);ct.onComment&&ct.onComment(!1,ft.slice(t+2,_t),t,_t,e,ct.locations&&new r)}function u(){for(;_t<dt;){var t=ft.charCodeAt(_t);if(32===t)++_t;else if(13===t)++_t,10===(e=ft.charCodeAt(_t))&&++_t,ct.locations&&(++St,Ct=_t);else if(10===t||8232===t||8233===t)++_t,ct.locations&&(++St,Ct=_t);else if(t>8&&t<14)++_t;else if(47===t){var e=ft.charCodeAt(_t+1);if(42===e)a();else{if(47!==e)break;h()}}else if(160===t)++_t;else{if(!(t>=5760&&qe.test(String.fromCharCode(t))))break;++_t}}}function l(){var t=ft.charCodeAt(_t+1);return t>=48&&t<=57?E(!0):(++_t,o(be))}function c(){var t=ft.charCodeAt(_t+1);return Et?(++_t,x()):61===t?b(Ee,2):b(we,1)}function f(){return 61===ft.charCodeAt(_t+1)?b(Ee,2):b(Ne,1)}function d(t){var e=ft.charCodeAt(_t+1);return e===t?b(124===t?Pe:Oe,2):61===e?b(Ee,2):b(124===t?Me:Ie,1)}function p(){return 61===ft.charCodeAt(_t+1)?b(Ee,2):b(Ae,1)}function g(t){var e=ft.charCodeAt(_t+1);return e===t?45==e&&62==ft.charCodeAt(_t+2)&&Ye.test(ft.slice(Ot,_t))?(_t+=3,h(),u(),y()):b(Se,2):61===e?b(Ee,2):b(De,1)}function v(t){var e=ft.charCodeAt(_t+1),i=1;return e===t?(i=62===t&&62===ft.charCodeAt(_t+2)?3:2,61===ft.charCodeAt(_t+i)?b(Ee,i+1):b(Le,i)):33==e&&60==t&&45==ft.charCodeAt(_t+2)&&45==ft.charCodeAt(_t+3)?(_t+=4,h(),u(),y()):(61===e&&(i=61===ft.charCodeAt(_t+2)?3:2),b(Re,i))}function _(t){return 61===ft.charCodeAt(_t+1)?b(ke,61===ft.charCodeAt(_t+2)?3:2):b(61===t?Te:Ce,1)}function m(t){switch(t){case 46:return l();case 40:return++_t,o(ge);case 41:return++_t,o(ve);case 59:return++_t,o(me);case 44:return++_t,o(_e);case 91:return++_t,o(ce);case 93:return++_t,o(fe);case 123:return++_t,o(de);case 125:return++_t,o(pe);case 58:return++_t,o(ye);case 63:return++_t,o(xe);case 48:var e=ft.charCodeAt(_t+1);if(120===e||88===e)return T();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return E(!1);case 34:case 39:return S(t);case 47:return c(t);case 37:case 42:return f();case 124:case 38:return d(t);case 94:return p();case 43:case 45:return g(t);case 60:case 62:return v(t);case 61:case 33:return _(t);case 126:return b(Ce,1)}return!1}function y(t){if(t?_t=mt+1:mt=_t,ct.locations&&(bt=new r),t)return x();if(_t>=dt)return o(jt);var e=ft.charCodeAt(_t);if(Ke(e)||92===e)return O();var n=m(e);if(!1===n){var s=String.fromCharCode(e);if("\\"===s||He.test(s))return O();i(_t,"Unexpected character '"+s+"'")}return n}function b(t,e){var i=ft.slice(_t,_t+e);_t+=e,o(t,i)}function x(){for(var t,e,n="",r=_t;;){_t>=dt&&i(r,"Unterminated regular expression");var s=ft.charAt(_t);if(Ye.test(s)&&i(r,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++_t}n=ft.slice(r,_t);++_t;var a=P();a&&!/^[gmsiy]*$/.test(a)&&i(r,"Invalid regexp flag");try{var h=new RegExp(n,a)}catch(t){t instanceof SyntaxError&&i(r,t.message),i(t)}return o(Dt,h)}function w(t,e){for(var i=_t,n=0,r=0,s=null==e?1/0:e;r<s;++r){var o,a=ft.charCodeAt(_t);if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++_t,n=n*t+o}return _t===i||null!=e&&_t-i!==e?null:n}function T(){_t+=2;var t=w(16);return null==t&&i(mt+2,"Expected hexadecimal number"),Ke(ft.charCodeAt(_t))&&i(_t,"Identifier directly after number"),o(Lt,t)}function E(t){var e=_t,n=!1,r=48===ft.charCodeAt(_t);t||null!==w(10)||i(e,"Invalid number"),46===ft.charCodeAt(_t)&&(++_t,w(10),n=!0);var s=ft.charCodeAt(_t);69!==s&&101!==s||(43!==(s=ft.charCodeAt(++_t))&&45!==s||++_t,null===w(10)&&i(e,"Invalid number"),n=!0),Ke(ft.charCodeAt(_t))&&i(_t,"Identifier directly after number");var a,h=ft.slice(e,_t);return n?a=parseFloat(h):r&&1!==h.length?/[89]/.test(h)||kt?i(e,"Invalid number"):a=parseInt(h,8):a=parseInt(h,10),o(Lt,a)}function S(t){_t++;for(var e="";;){_t>=dt&&i(mt,"Unterminated string constant");var n=ft.charCodeAt(_t);if(n===t)return++_t,o(Nt,e);if(92===n){n=ft.charCodeAt(++_t);var r=/^[0-7]+/.exec(ft.slice(_t,_t+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,-1);if("0"===r&&(r=null),++_t,r)kt&&i(_t-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),_t+=r.length-1;else switch(n){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(C(2));break;case 117:e+=String.fromCharCode(C(4));break;case 85:e+=String.fromCharCode(C(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===ft.charCodeAt(_t)&&++_t;case 10:ct.locations&&(Ct=_t,++St);break;default:e+=String.fromCharCode(n)}}else 13!==n&&10!==n&&8232!==n&&8233!==n||i(mt,"Unterminated string constant"),e+=String.fromCharCode(n),++_t}}function C(t){var e=w(16,t);return null===e&&i(mt,"Bad character escape sequence"),e}function P(){je=!1;for(var t,e=!0,n=_t;;){var r=ft.charCodeAt(_t);if($e(r))je&&(t+=ft.charAt(_t)),++_t;else{if(92!==r)break;je||(t=ft.slice(n,_t)),je=!0,117!=ft.charCodeAt(++_t)&&i(_t,"Expecting Unicode escape sequence \\uXXXX"),++_t;var s=C(4),o=String.fromCharCode(s);o||i(_t-1,"Invalid Unicode escape"),(e?Ke(s):$e(s))||i(_t-4,"Invalid Unicode escape"),t+=o}e=!1}return je?t:ft.slice(n,_t)}function O(){var t=P(),e=Ft;return!je&&Xe(t)&&(e=le[t]),o(e,t)}function M(){Pt=mt,Ot=yt,Mt=xt,y()}function A(t){if(kt=t,_t=mt,ct.locations)for(;_t<Ct;)Ct=ft.lastIndexOf("\n",Ct-2)+1,--St;u(),y()}function I(){this.type=null,this.start=mt,this.end=null}function k(){this.start=bt,this.end=null,null!==pt&&(this.source=pt)}function R(){var t=new I;return ct.locations&&(t.loc=new k),ct.directSourceFile&&(t.sourceFile=ct.directSourceFile),ct.ranges&&(t.range=[mt,0]),t}function L(t){var e=new I;return e.start=t.start,ct.locations&&(e.loc=new k,e.loc.start=t.loc.start),ct.ranges&&(e.range=[t.range[0],0]),e}function D(t,e){return t.type=e,t.end=Ot,ct.locations&&(t.loc.end=Mt),ct.ranges&&(t.range[1]=Ot),t}function N(t){return ct.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function F(t){if(wt===t)return M(),!0}function j(){return!ct.strictSemicolons&&(wt===jt||wt===pe||Ye.test(ft.slice(Ot,mt)))}function B(){F(me)||j()||z()}function U(t){wt===t?M():z()}function z(){i(mt,"Unexpected token")}function V(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&i(t.start,"Assigning to rvalue"),kt&&"Identifier"===t.type&&Ve(t.name)&&i(t.start,"Assigning to "+t.name+" in strict mode")}function X(t){Pt=Ot=_t,ct.locations&&(Mt=new r),At=kt=null,It=[],y();var e=t||R(),i=!0;for(t||(e.body=[]);wt!==jt;){var n=q();e.body.push(n),i&&N(n)&&A(!0),i=!1}return D(e,"Program")}function q(){(wt===we||wt===Ee&&"/="==Tt)&&y(!0);var t=wt,e=R();switch(t){case Bt:case Vt:M();var n=t===Bt;F(me)||j()?e.label=null:wt!==Ft?z():(e.label=lt(),B());for(f=0;f<It.length;++f){var r=It[f];if(null==e.label||r.name===e.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(e.label&&n)break}}return f===It.length&&i(e.start,"Unsyntactic "+t.keyword),D(e,n?"BreakStatement":"ContinueStatement");case Xt:return M(),B(),D(e,"DebuggerStatement");case Gt:return M(),It.push(Je),e.body=q(),It.pop(),U(ie),e.test=G(),B(),D(e,"DoWhileStatement");case Yt:if(M(),It.push(Je),U(ge),wt===me)return W(e,null);if(wt===ee){s=R();return M(),Z(s,!0),D(s,"VariableDeclaration"),1===s.declarations.length&&F(ue)?Y(e,s):W(e,s)}var s=K(!1,!0);return F(ue)?(V(s),Y(e,s)):W(e,s);case Zt:return M(),ht(e,!0);case Kt:return M(),e.test=G(),e.consequent=q(),e.alternate=F(Ht)?q():null,D(e,"IfStatement");case $t:return At||ct.allowReturnOutsideFunction||i(mt,"'return' outside of function"),M(),F(me)||j()?e.argument=null:(e.argument=K(),B()),D(e,"ReturnStatement");case Jt:M(),e.discriminant=G(),e.cases=[],U(de),It.push(Qe);for(var o,a;wt!=pe;)if(wt===Ut||wt===qt){var h=wt===Ut;o&&D(o,"SwitchCase"),e.cases.push(o=R()),o.consequent=[],M(),h?o.test=K():(a&&i(Pt,"Multiple default clauses"),a=!0,o.test=null),U(ye)}else o||z(),o.consequent.push(q());return o&&D(o,"SwitchCase"),M(),It.pop(),D(e,"SwitchStatement");case Qt:return M(),Ye.test(ft.slice(Ot,mt))&&i(Ot,"Illegal newline after throw"),e.argument=K(),B(),D(e,"ThrowStatement");case te:if(M(),e.block=H(),e.handler=null,wt===zt){var u=R();M(),U(ge),u.param=lt(),kt&&Ve(u.param.name)&&i(u.param.start,"Binding "+u.param.name+" in strict mode"),U(ve),u.guard=null,u.body=H(),e.handler=D(u,"CatchClause")}return e.guardedHandlers=Rt,e.finalizer=F(Wt)?H():null,e.handler||e.finalizer||i(e.start,"Missing catch or finally clause"),D(e,"TryStatement");case ee:return M(),Z(e),B(),D(e,"VariableDeclaration");case ie:return M(),e.test=G(),It.push(Je),e.body=q(),It.pop(),D(e,"WhileStatement");case ne:return kt&&i(mt,"'with' in strict mode"),M(),e.object=G(),e.body=q(),D(e,"WithStatement");case de:return H();case me:return M(),D(e,"EmptyStatement");default:var l=Tt,c=K();if(t===Ft&&"Identifier"===c.type&&F(ye)){for(var f=0;f<It.length;++f)It[f].name===l&&i(c.start,"Label '"+l+"' is already declared");var d=wt.isLoop?"loop":wt===Jt?"switch":null;return It.push({name:l,kind:d}),e.body=q(),It.pop(),e.label=c,D(e,"LabeledStatement")}return e.expression=c,B(),D(e,"ExpressionStatement")}}function G(){U(ge);var t=K();return U(ve),t}function H(t){var e,i=R(),n=!0,r=!1;for(i.body=[],U(de);!F(pe);){var s=q();i.body.push(s),n&&t&&N(s)&&(e=r,A(r=!0)),n=!1}return r&&!e&&A(!1),D(i,"BlockStatement")}function W(t,e){return t.init=e,U(me),t.test=wt===me?null:K(),U(me),t.update=wt===ve?null:K(),U(ve),t.body=q(),It.pop(),D(t,"ForStatement")}function Y(t,e){return t.left=e,t.right=K(),U(ve),t.body=q(),It.pop(),D(t,"ForInStatement")}function Z(t,e){for(t.declarations=[],t.kind="var";;){var n=R();if(n.id=lt(),kt&&Ve(n.id.name)&&i(n.id.start,"Binding "+n.id.name+" in strict mode"),n.init=F(Te)?K(!0,e):null,t.declarations.push(D(n,"VariableDeclarator")),!F(_e))break}return t}function K(t,e){var i=$(e);if(!t&&wt===_e){var n=L(i);for(n.expressions=[i];F(_e);)n.expressions.push($(e));return D(n,"SequenceExpression")}return i}function $(t){var e=J(t);if(wt.isAssign){var i=L(e);return i.operator=Tt,i.left=e,M(),i.right=$(t),V(e),D(i,"AssignmentExpression")}return e}function J(t){var e=Q(t);if(F(xe)){var i=L(e);return i.test=e,i.consequent=K(!0),U(ye),i.alternate=K(!0,t),D(i,"ConditionalExpression")}return e}function Q(t){return tt(et(),-1,t)}function tt(t,e,i){var n=wt.binop;if(null!=n&&(!i||wt!==ue)&&n>e){var r=L(t);r.left=t,r.operator=Tt;var s=wt;return M(),r.right=tt(et(),n,i),tt(D(r,s===Pe||s===Oe?"LogicalExpression":"BinaryExpression"),e,i)}return t}function et(){if(wt.prefix){var t=R(),e=wt.isUpdate;return t.operator=Tt,t.prefix=!0,Et=!0,M(),t.argument=et(),e?V(t.argument):kt&&"delete"===t.operator&&"Identifier"===t.argument.type&&i(t.start,"Deleting local variable in strict mode"),D(t,e?"UpdateExpression":"UnaryExpression")}for(var n=it();wt.postfix&&!j();)(t=L(n)).operator=Tt,t.prefix=!1,t.argument=n,V(n),M(),n=D(t,"UpdateExpression");return n}function it(){return nt(rt())}function nt(t,e){if(F(be))return(i=L(t)).object=t,i.property=lt(!0),i.computed=!1,nt(D(i,"MemberExpression"),e);if(F(ce))return(i=L(t)).object=t,i.property=K(),i.computed=!0,U(fe),nt(D(i,"MemberExpression"),e);if(!e&&F(ge)){var i=L(t);return i.callee=t,i.arguments=ut(ve,!1),nt(D(i,"CallExpression"),e)}return t}function rt(){switch(wt){case se:n=R();return M(),D(n,"ThisExpression");case Ft:return lt();case Lt:case Nt:case Dt:return(n=R()).value=Tt,n.raw=ft.slice(mt,yt),M(),D(n,"Literal");case oe:case ae:case he:return(n=R()).value=wt.atomValue,n.raw=wt.keyword,M(),D(n,"Literal");case ge:var t=bt,e=mt;M();var i=K();return i.start=e,i.end=yt,ct.locations&&(i.loc.start=t,i.loc.end=xt),ct.ranges&&(i.range=[e,yt]),U(ve),i;case ce:n=R();return M(),n.elements=ut(fe,!0,!0),D(n,"ArrayExpression");case de:return ot();case Zt:var n=R();return M(),ht(n,!1);case re:return st();default:z()}}function st(){var t=R();return M(),t.callee=nt(rt(),!0),F(ge)?t.arguments=ut(ve,!1):t.arguments=Rt,D(t,"NewExpression")}function ot(){var t=R(),e=!0,n=!1;for(t.properties=[],M();!F(pe);){if(e)e=!1;else if(U(_e),ct.allowTrailingCommas&&F(pe))break;var r,s={key:at()},o=!1;if(F(ye)?(s.value=K(!0),r=s.kind="init"):ct.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(o=n=!0,r=s.kind=s.key.name,s.key=at(),wt!==ge&&z(),s.value=ht(R(),!1)):z(),"Identifier"===s.key.type&&(kt||n))for(var a=0;a<t.properties.length;++a){var h=t.properties[a];if(h.key.name===s.key.name){var u=r==h.kind||o&&"init"===h.kind||"init"===r&&("get"===h.kind||"set"===h.kind);u&&!kt&&"init"===r&&"init"===h.kind&&(u=!1),u&&i(s.key.start,"Redefinition of property")}}t.properties.push(s)}return D(t,"ObjectExpression")}function at(){return wt===Lt||wt===Nt?rt():lt(!0)}function ht(t,e){wt===Ft?t.id=lt():e?z():t.id=null,t.params=[];var n=!0;for(U(ge);!F(ve);)n?n=!1:U(_e),t.params.push(lt());var r=At,s=It;if(At=!0,It=[],t.body=H(!0),At=r,It=s,kt||t.body.body.length&&N(t.body.body[0]))for(var o=t.id?-1:0;o<t.params.length;++o){var a=o<0?t.id:t.params[o];if((ze(a.name)||Ve(a.name))&&i(a.start,"Defining '"+a.name+"' in strict mode"),o>=0)for(var h=0;h<o;++h)a.name===t.params[h].name&&i(a.start,"Argument name clash in strict mode")}return D(t,e?"FunctionDeclaration":"FunctionExpression")}function ut(t,e,i){for(var n=[],r=!0;!F(t);){if(r)r=!1;else if(U(_e),e&&ct.allowTrailingCommas&&F(t))break;i&&wt===_e?n.push(null):n.push(K(!0))}return n}function lt(t){var e=R();return t&&"everywhere"==ct.forbidReserved&&(t=!1),wt===Ft?(!t&&(ct.forbidReserved&&(3===ct.ecmaVersion?Be:Ue)(Tt)||kt&&ze(Tt))&&-1==ft.slice(mt,yt).indexOf("\\")&&i(mt,"The keyword '"+Tt+"' is reserved"),e.name=Tt):t&&wt.keyword?e.name=wt.keyword:z(),Et=!1,M(),D(e,"Identifier")}t.version="0.5.0";var ct,ft,dt,pt;t.parse=function(t,i){return ft=String(t),dt=ft.length,e(i),s(),X(ct.program)};var gt=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},vt=t.getLineInfo=function(t,e){for(var i=1,n=0;;){Ze.lastIndex=n;var r=Ze.exec(t);if(!(r&&r.index<e))break;++i,n=r.index+r[0].length}return{line:i,column:e-n}};t.tokenize=function(t,i){function n(t){return Ot=yt,y(t),r.start=mt,r.end=yt,r.startLoc=bt,r.endLoc=xt,r.type=wt,r.value=Tt,r}ft=String(t),dt=ft.length,e(i),s();var r={};return n.jumpTo=function(t,e){if(_t=t,ct.locations){St=1,Ct=Ze.lastIndex=0;for(var i;(i=Ze.exec(ft))&&i.index<t;)++St,Ct=i.index+i[0].length}Et=e,u()},n};var _t,mt,yt,bt,xt,wt,Tt,Et,St,Ct,Pt,Ot,Mt,At,It,kt,Rt=[],Lt={type:"num"},Dt={type:"regexp"},Nt={type:"string"},Ft={type:"name"},jt={type:"eof"},Bt={keyword:"break"},Ut={keyword:"case",beforeExpr:!0},zt={keyword:"catch"},Vt={keyword:"continue"},Xt={keyword:"debugger"},qt={keyword:"default"},Gt={keyword:"do",isLoop:!0},Ht={keyword:"else",beforeExpr:!0},Wt={keyword:"finally"},Yt={keyword:"for",isLoop:!0},Zt={keyword:"function"},Kt={keyword:"if"},$t={keyword:"return",beforeExpr:!0},Jt={keyword:"switch"},Qt={keyword:"throw",beforeExpr:!0},te={keyword:"try"},ee={keyword:"var"},ie={keyword:"while",isLoop:!0},ne={keyword:"with"},re={keyword:"new",beforeExpr:!0},se={keyword:"this"},oe={keyword:"null",atomValue:null},ae={keyword:"true",atomValue:!0},he={keyword:"false",atomValue:!1},ue={keyword:"in",binop:7,beforeExpr:!0},le={break:Bt,case:Ut,catch:zt,continue:Vt,debugger:Xt,default:qt,do:Gt,else:Ht,finally:Wt,for:Yt,function:Zt,if:Kt,return:$t,switch:Jt,throw:Qt,try:te,var:ee,while:ie,with:ne,null:oe,true:ae,false:he,new:re,in:ue,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:se,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ce={type:"[",beforeExpr:!0},fe={type:"]"},de={type:"{",beforeExpr:!0},pe={type:"}"},ge={type:"(",beforeExpr:!0},ve={type:")"},_e={type:",",beforeExpr:!0},me={type:";",beforeExpr:!0},ye={type:":",beforeExpr:!0},be={type:"."},xe={type:"?",beforeExpr:!0},we={binop:10,beforeExpr:!0},Te={isAssign:!0,beforeExpr:!0},Ee={isAssign:!0,beforeExpr:!0},Se={postfix:!0,prefix:!0,isUpdate:!0},Ce={prefix:!0,beforeExpr:!0},Pe={binop:1,beforeExpr:!0},Oe={binop:2,beforeExpr:!0},Me={binop:3,beforeExpr:!0},Ae={binop:4,beforeExpr:!0},Ie={binop:5,beforeExpr:!0},ke={binop:6,beforeExpr:!0},Re={binop:7,beforeExpr:!0},Le={binop:8,beforeExpr:!0},De={binop:9,prefix:!0,beforeExpr:!0},Ne={binop:10,beforeExpr:!0};t.tokTypes={bracketL:ce,bracketR:fe,braceL:de,braceR:pe,parenL:ge,parenR:ve,comma:_e,semi:me,colon:ye,dot:be,question:xe,slash:we,eq:Te,name:Ft,eof:jt,num:Lt,regexp:Dt,string:Nt};for(var Fe in le)t.tokTypes["_"+Fe]=le[Fe];var je,Be=n("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ue=n("class enum extends super const export import"),ze=n("implements interface let package private protected public static yield"),Ve=n("eval arguments"),Xe=n("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),qe=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ge="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",He=new RegExp("["+Ge+"]"),We=new RegExp("["+Ge+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),Ye=/[\n\r\u2028\u2029]/,Ze=/\r\n|[\n\r\u2028\u2029]/g,Ke=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&He.test(String.fromCharCode(t)))},$e=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&We.test(String.fromCharCode(t))))},Je={kind:"loop"},Qe={kind:"switch"}}),x.version||(x=null)}var E={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},S={"-":"__negate","+":"__self"},C=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(t){this["__"+t]="#"+t},{__self:function(){return this}});return m.inject(C),b.inject(C),H.inject(C),u&&("complete"===l.readyState?setTimeout(_):$.add(u,{load:_})),{compile:p,execute:g,load:function(t){return t?v(t):_()},parse:t}}.call(this),(o=new(d.inject(c.exports,{Base:c,Numerical:v,Key:it,DomEvent:$,DomElement:K,document:l,window:u,Symbol:R,PlacedSymbol:k}))).agent.node&&i(182)(o),(s="function"==typeof(r=o)?r.call(e,i,e,t):r)!==h&&(t.exports=s),o}.call(this,"object"==typeof self?self:null)},function(t,e){},function(t,e,i){"use strict";function n(t,e){for(var i=65536,n=0;n<e.length;n+=2){if((i+=e[n])>t)return!1;if((i+=e[n+1])>=t)return!0}}function r(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&P.test(String.fromCharCode(t)):!1!==e&&n(t,M)))}function s(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&O.test(String.fromCharCode(t)):!1!==e&&(n(t,M)||n(t,A)))))}function o(t,e){return new I(t,{beforeExpr:!0,binop:e})}function a(t,e){return void 0===e&&(e={}),e.keyword=t,L[t]=new I(t,e)}function h(t){return 10===t||13===t||8232===t||8233===t}function u(t,e){return z.call(t,e)}function l(t,e){for(var i=1,n=0;;){F.lastIndex=n;var r=F.exec(t);if(!(r&&r.index<e))return new q(i,e-n);++i,n=r.index+r[0].length}}function c(t){var e={};for(var i in H)e[i]=t&&u(t,i)?t[i]:H[i];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),X(e.onToken)){var n=e.onToken;e.onToken=function(t){return n.push(t)}}return X(e.onComment)&&(e.onComment=f(e,e.onComment)),e}function f(t,e){return function(i,n,r,s,o,a){var h={type:i?"Block":"Line",value:n,start:r,end:s};t.locations&&(h.loc=new G(this,o,a)),t.ranges&&(h.range=[r,s]),e.push(h)}}function d(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function p(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=-1}function g(t,e,i,n){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=i),t}function v(t,e,i,n){try{return new RegExp(t,e)}catch(t){if(void 0!==i)throw t instanceof SyntaxError&&n.raise(i,"Error parsing regular expression: "+t.message),t}}function _(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function m(t,e){return new Y(e,t).parse()}function y(t,e,i){var n=new Y(i,t,e);return n.nextToken(),n.parseExpression()}function b(t,e){return new Y(e,t)}function x(t,e,i){_t=t,mt=e,yt=i}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"version",function(){return bt}),i.d(e,"parse",function(){return m}),i.d(e,"parseExpressionAt",function(){return y}),i.d(e,"tokenizer",function(){return b}),i.d(e,"parse_dammit",function(){return _t}),i.d(e,"LooseParser",function(){return mt}),i.d(e,"pluginsLoose",function(){return yt}),i.d(e,"addLooseExports",function(){return x}),i.d(e,"Parser",function(){return Y}),i.d(e,"plugins",function(){return W}),i.d(e,"defaultOptions",function(){return H}),i.d(e,"Position",function(){return q}),i.d(e,"SourceLocation",function(){return G}),i.d(e,"getLineInfo",function(){return l}),i.d(e,"Node",function(){return at}),i.d(e,"TokenType",function(){return I}),i.d(e,"tokTypes",function(){return D}),i.d(e,"keywordTypes",function(){return L}),i.d(e,"TokContext",function(){return ut}),i.d(e,"tokContexts",function(){return lt}),i.d(e,"isIdentifierChar",function(){return s}),i.d(e,"isIdentifierStart",function(){return r}),i.d(e,"Token",function(){return ft}),i.d(e,"isNewLine",function(){return h}),i.d(e,"lineBreak",function(){return N}),i.d(e,"lineBreakG",function(){return F}),i.d(e,"nonASCIIwhitespace",function(){return j});var w={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},T="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",E={5:T,6:T+" const class extends export import super"},S="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",C="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣔ-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",P=new RegExp("["+S+"]"),O=new RegExp("["+S+C+"]");S=C=null;var M=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,264,8,2,36,18,0,50,29,881,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,65,0,32,6124,20,754,9486,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],A=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,7,0,161,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,87,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,838,7,2,7,17,9,57,21,2,13,19882,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239],I=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null},k={beforeExpr:!0},R={startsExpr:!0},L={},D={num:new I("num",R),regexp:new I("regexp",R),string:new I("string",R),name:new I("name",R),eof:new I("eof"),bracketL:new I("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new I("]"),braceL:new I("{",{beforeExpr:!0,startsExpr:!0}),braceR:new I("}"),parenL:new I("(",{beforeExpr:!0,startsExpr:!0}),parenR:new I(")"),comma:new I(",",k),semi:new I(";",k),colon:new I(":",k),dot:new I("."),question:new I("?",k),arrow:new I("=>",k),template:new I("template"),invalidTemplate:new I("invalidTemplate"),ellipsis:new I("...",k),backQuote:new I("`",R),dollarBraceL:new I("${",{beforeExpr:!0,startsExpr:!0}),eq:new I("=",{beforeExpr:!0,isAssign:!0}),assign:new I("_=",{beforeExpr:!0,isAssign:!0}),incDec:new I("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new I("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:o("||",1),logicalAND:o("&&",2),bitwiseOR:o("|",3),bitwiseXOR:o("^",4),bitwiseAND:o("&",5),equality:o("==/!=/===/!==",6),relational:o("</>/<=/>=",7),bitShift:o("<</>>/>>>",8),plusMin:new I("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:o("%",10),star:o("*",10),slash:o("/",10),starstar:new I("**",{beforeExpr:!0}),_break:a("break"),_case:a("case",k),_catch:a("catch"),_continue:a("continue"),_debugger:a("debugger"),_default:a("default",k),_do:a("do",{isLoop:!0,beforeExpr:!0}),_else:a("else",k),_finally:a("finally"),_for:a("for",{isLoop:!0}),_function:a("function",R),_if:a("if"),_return:a("return",k),_switch:a("switch"),_throw:a("throw",k),_try:a("try"),_var:a("var"),_const:a("const"),_while:a("while",{isLoop:!0}),_with:a("with"),_new:a("new",{beforeExpr:!0,startsExpr:!0}),_this:a("this",R),_super:a("super",R),_class:a("class",R),_extends:a("extends",k),_export:a("export"),_import:a("import"),_null:a("null",R),_true:a("true",R),_false:a("false",R),_in:a("in",{beforeExpr:!0,binop:7}),_instanceof:a("instanceof",{beforeExpr:!0,binop:7}),_typeof:a("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:a("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:a("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},N=/\r\n?|\n|\u2028|\u2029/,F=new RegExp(N.source,"g"),j=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,B=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,U=Object.prototype,z=U.hasOwnProperty,V=U.toString,X=Array.isArray||function(t){return"[object Array]"===V.call(t)},q=function(t,e){this.line=t,this.column=e};q.prototype.offset=function(t){return new q(this.line,this.column+t)};var G=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)},H={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}},W={},Y=function(t,e,i){this.options=t=c(t),this.sourceFile=t.sourceFile,this.keywords=d(E[t.ecmaVersion>=6?6:5]);var n="";if(!t.allowReserved){for(var r=t.ecmaVersion;!(n=w[r]);r--);"module"==t.sourceType&&(n+=" await")}this.reservedWords=d(n);var s=(n?n+" ":"")+w.strict;this.reservedWordsStrict=d(s),this.reservedWordsStrictBind=d(s+" "+w.strictBind),this.input=String(e),this.containsEsc=!1,this.loadPlugins(t.plugins),i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(N).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=D.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope()};Y.prototype.isKeyword=function(t){return this.keywords.test(t)},Y.prototype.isReservedWord=function(t){return this.reservedWords.test(t)},Y.prototype.extend=function(t,e){this[t]=e(this[t])},Y.prototype.loadPlugins=function(t){var e=this;for(var i in t){var n=W[i];if(!n)throw new Error("Plugin '"+i+"' not found");n(e,t[i])}},Y.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};var Z=Y.prototype,K=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;Z.strictDirective=function(t){for(var e=this;;){B.lastIndex=t,t+=B.exec(e.input)[0].length;var i=K.exec(e.input.slice(t));if(!i)return!1;if("use strict"==(i[1]||i[2]))return!0;t+=i[0].length}},Z.eat=function(t){return this.type===t&&(this.next(),!0)},Z.isContextual=function(t){return this.type===D.name&&this.value===t},Z.eatContextual=function(t){return this.value===t&&this.eat(D.name)},Z.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},Z.canInsertSemicolon=function(){return this.type===D.eof||this.type===D.braceR||N.test(this.input.slice(this.lastTokEnd,this.start))},Z.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},Z.semicolon=function(){this.eat(D.semi)||this.insertSemicolon()||this.unexpected()},Z.afterTrailingComma=function(t,e){if(this.type==t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},Z.expect=function(t){this.eat(t)||this.unexpected()},Z.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},Z.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,"Parenthesized pattern")}},Z.checkExpressionErrors=function(t,e){var i=t?t.shorthandAssign:-1;if(!e)return i>=0;i>-1&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns")},Z.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},Z.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var $=Y.prototype;$.parseTopLevel=function(t){var e=this,i={};for(t.body||(t.body=[]);this.type!==D.eof;){var n=e.parseStatement(!0,!0,i);t.body.push(n)}return this.next(),this.options.ecmaVersion>=6&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var J={kind:"loop"},Q={kind:"switch"};$.isLet=function(){if(this.type!==D.name||this.options.ecmaVersion<6||"let"!=this.value)return!1;B.lastIndex=this.pos;var t=B.exec(this.input),e=this.pos+t[0].length,i=this.input.charCodeAt(e);if(91===i||123==i)return!0;if(r(i,!0)){for(var n=e+1;s(this.input.charCodeAt(n),!0);)++n;var o=this.input.slice(e,n);if(!this.isKeyword(o))return!0}return!1},$.isAsyncFunction=function(){if(this.type!==D.name||this.options.ecmaVersion<8||"async"!=this.value)return!1;B.lastIndex=this.pos;var t=B.exec(this.input),e=this.pos+t[0].length;return!(N.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!=this.input.length&&s(this.input.charAt(e+8)))},$.parseStatement=function(t,e,i){var n,r=this.type,s=this.startNode();switch(this.isLet()&&(r=D._var,n="let"),r){case D._break:case D._continue:return this.parseBreakContinueStatement(s,r.keyword);case D._debugger:return this.parseDebuggerStatement(s);case D._do:return this.parseDoStatement(s);case D._for:return this.parseForStatement(s);case D._function:return!t&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1);case D._class:return t||this.unexpected(),this.parseClass(s,!0);case D._if:return this.parseIfStatement(s);case D._return:return this.parseReturnStatement(s);case D._switch:return this.parseSwitchStatement(s);case D._throw:return this.parseThrowStatement(s);case D._try:return this.parseTryStatement(s);case D._const:case D._var:return n=n||this.value,t||"var"==n||this.unexpected(),this.parseVarStatement(s,n);case D._while:return this.parseWhileStatement(s);case D._with:return this.parseWithStatement(s);case D.braceL:return this.parseBlock();case D.semi:return this.parseEmptyStatement(s);case D._export:case D._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===D._import?this.parseImport(s):this.parseExport(s,i);default:if(this.isAsyncFunction()&&t)return this.next(),this.parseFunctionStatement(s,!0);var o=this.value,a=this.parseExpression();return r===D.name&&"Identifier"===a.type&&this.eat(D.colon)?this.parseLabeledStatement(s,o,a):this.parseExpressionStatement(s,a)}},$.parseBreakContinueStatement=function(t,e){var i=this,n="break"==e;this.next(),this.eat(D.semi)||this.insertSemicolon()?t.label=null:this.type!==D.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var s=i.labels[r];if(null==t.label||s.name===t.label.name){if(null!=s.kind&&(n||"loop"===s.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},$.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},$.parseDoStatement=function(t){return this.next(),this.labels.push(J),t.body=this.parseStatement(!1),this.labels.pop(),this.expect(D._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(D.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},$.parseForStatement=function(t){if(this.next(),this.labels.push(J),this.enterLexicalScope(),this.expect(D.parenL),this.type===D.semi)return this.parseFor(t,null);var e=this.isLet();if(this.type===D._var||this.type===D._const||e){var i=this.startNode(),n=e?"let":this.value;return this.next(),this.parseVar(i,!0,n),this.finishNode(i,"VariableDeclaration"),!(this.type===D._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==i.declarations.length||"var"!==n&&i.declarations[0].init?this.parseFor(t,i):this.parseForIn(t,i)}var r=new p,s=this.parseExpression(!0,r);return this.type===D._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.toAssignable(s),this.checkLVal(s),this.checkPatternErrors(r,!0),this.parseForIn(t,s)):(this.checkExpressionErrors(r,!0),this.parseFor(t,s))},$.parseFunctionStatement=function(t,e){return this.next(),this.parseFunction(t,!0,!1,e)},$.isFunction=function(){return this.type===D._function||this.isAsyncFunction()},$.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(!this.strict&&this.isFunction()),t.alternate=this.eat(D._else)?this.parseStatement(!this.strict&&this.isFunction()):null,this.finishNode(t,"IfStatement")},$.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(D.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},$.parseSwitchStatement=function(t){var e=this;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(D.braceL),this.labels.push(Q),this.enterLexicalScope();for(var i,n=!1;this.type!=D.braceR;)if(e.type===D._case||e.type===D._default){var r=e.type===D._case;i&&e.finishNode(i,"SwitchCase"),t.cases.push(i=e.startNode()),i.consequent=[],e.next(),r?i.test=e.parseExpression():(n&&e.raiseRecoverable(e.lastTokStart,"Multiple default clauses"),n=!0,i.test=null),e.expect(D.colon)}else i||e.unexpected(),i.consequent.push(e.parseStatement(!0));return this.exitLexicalScope(),i&&this.finishNode(i,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},$.parseThrowStatement=function(t){return this.next(),N.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var tt=[];$.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===D._catch){var e=this.startNode();this.next(),this.expect(D.parenL),e.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(e.param,"let"),this.expect(D.parenR),e.body=this.parseBlock(!1),this.exitLexicalScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(D._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},$.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},$.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(J),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"WhileStatement")},$.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(!1),this.finishNode(t,"WithStatement")},$.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},$.parseLabeledStatement=function(t,e,i){for(var n=this,r=0,s=n.labels;r<s.length;r+=1)s[r].name===e&&n.raise(i.start,"Label '"+e+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===D._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var h=n.labels[a];if(h.statementStart!=t.start)break;h.statementStart=n.start,h.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(!0),("ClassDeclaration"==t.body.type||"VariableDeclaration"==t.body.type&&"var"!=t.body.kind||"FunctionDeclaration"==t.body.type&&(this.strict||t.body.generator))&&this.raiseRecoverable(t.body.start,"Invalid labeled declaration"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},$.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},$.parseBlock=function(t){var e=this;void 0===t&&(t=!0);var i=this.startNode();for(i.body=[],this.expect(D.braceL),t&&this.enterLexicalScope();!this.eat(D.braceR);){var n=e.parseStatement(!0);i.body.push(n)}return t&&this.exitLexicalScope(),this.finishNode(i,"BlockStatement")},$.parseFor=function(t,e){return t.init=e,this.expect(D.semi),t.test=this.type===D.semi?null:this.parseExpression(),this.expect(D.semi),t.update=this.type===D.parenR?null:this.parseExpression(),this.expect(D.parenR),this.exitLexicalScope(),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"ForStatement")},$.parseForIn=function(t,e){var i=this.type===D._in?"ForInStatement":"ForOfStatement";return this.next(),t.left=e,t.right=this.parseExpression(),this.expect(D.parenR),this.exitLexicalScope(),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,i)},$.parseVar=function(t,e,i){var n=this;for(t.declarations=[],t.kind=i;;){var r=n.startNode();if(n.parseVarId(r,i),n.eat(D.eq)?r.init=n.parseMaybeAssign(e):"const"!==i||n.type===D._in||n.options.ecmaVersion>=6&&n.isContextual("of")?"Identifier"==r.id.type||e&&(n.type===D._in||n.isContextual("of"))?r.init=null:n.raise(n.lastTokEnd,"Complex binding patterns require an initialization value"):n.unexpected(),t.declarations.push(n.finishNode(r,"VariableDeclarator")),!n.eat(D.comma))break}return t},$.parseVarId=function(t,e){t.id=this.parseBindingAtom(e),this.checkLVal(t.id,e,!1)},$.parseFunction=function(t,e,i,n){this.initFunction(t),this.options.ecmaVersion>=6&&!n&&(t.generator=this.eat(D.star)),this.options.ecmaVersion>=8&&(t.async=!!n),e&&(t.id="nullableID"===e&&this.type!=D.name?null:this.parseIdent(),t.id&&this.checkLVal(t.id,"var"));var r=this.inGenerator,s=this.inAsync,o=this.yieldPos,a=this.awaitPos,h=this.inFunction;return this.inGenerator=t.generator,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),e||(t.id=this.type==D.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i),this.inGenerator=r,this.inAsync=s,this.yieldPos=o,this.awaitPos=a,this.inFunction=h,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},$.parseFunctionParams=function(t){this.expect(D.parenL),t.params=this.parseBindingList(D.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},$.parseClass=function(t,e){var i=this;this.next(),this.parseClassId(t,e),this.parseClassSuper(t);var n=this.startNode(),r=!1;for(n.body=[],this.expect(D.braceL);!this.eat(D.braceR);)if(!i.eat(D.semi)){var s=i.startNode(),o=i.eat(D.star),a=!1,h=i.type===D.name&&"static"===i.value;i.parsePropertyName(s),s.static=h&&i.type!==D.parenL,s.static&&(o&&i.unexpected(),o=i.eat(D.star),i.parsePropertyName(s)),i.options.ecmaVersion>=8&&!o&&!s.computed&&"Identifier"===s.key.type&&"async"===s.key.name&&i.type!==D.parenL&&!i.canInsertSemicolon()&&(a=!0,i.parsePropertyName(s)),s.kind="method";var u=!1;if(!s.computed){var l=s.key;o||a||"Identifier"!==l.type||i.type===D.parenL||"get"!==l.name&&"set"!==l.name||(u=!0,s.kind=l.name,l=i.parsePropertyName(s)),!s.static&&("Identifier"===l.type&&"constructor"===l.name||"Literal"===l.type&&"constructor"===l.value)&&(r&&i.raise(l.start,"Duplicate constructor in the same class"),u&&i.raise(l.start,"Constructor can't have get/set modifier"),o&&i.raise(l.start,"Constructor can't be a generator"),a&&i.raise(l.start,"Constructor can't be an async method"),s.kind="constructor",r=!0)}if(i.parseClassMethod(n,s,o,a),u){var c="get"===s.kind?0:1;if(s.value.params.length!==c){var f=s.value.start;"get"===s.kind?i.raiseRecoverable(f,"getter should have no params"):i.raiseRecoverable(f,"setter should have exactly one param")}else"set"===s.kind&&"RestElement"===s.value.params[0].type&&i.raiseRecoverable(s.value.params[0].start,"Setter cannot use rest params")}}return t.body=this.finishNode(n,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},$.parseClassMethod=function(t,e,i,n){e.value=this.parseMethod(i,n),t.body.push(this.finishNode(e,"MethodDefinition"))},$.parseClassId=function(t,e){t.id=this.type===D.name?this.parseIdent():!0===e?this.unexpected():null},$.parseClassSuper=function(t){t.superClass=this.eat(D._extends)?this.parseExprSubscripts():null},$.parseExport=function(t,e){var i=this;if(this.next(),this.eat(D.star))return this.expectContextual("from"),t.source=this.type===D.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(D._default)){this.checkExport(e,"default",this.lastTokStart);var n;if(this.type===D._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,"nullableID",!1,n)}else if(this.type===D._class){var s=this.startNode();t.declaration=this.parseClass(s,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(!0),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))t.source=this.type===D.string?this.parseExprAtom():this.unexpected();else{for(var o=0,a=t.specifiers;o<a.length;o+=1){var h=a[o];i.checkUnreserved(h.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},$.checkExport=function(t,e,i){t&&(u(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},$.checkPatternExport=function(t,e){var i=this,n=e.type;if("Identifier"==n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"==n)for(var r=0,s=e.properties;r<s.length;r+=1){var o=s[r];i.checkPatternExport(t,o.value)}else if("ArrayPattern"==n)for(var a=0,h=e.elements;a<h.length;a+=1){var u=h[a];u&&i.checkPatternExport(t,u)}else"AssignmentPattern"==n?this.checkPatternExport(t,e.left):"ParenthesizedExpression"==n&&this.checkPatternExport(t,e.expression)},$.checkVariableExport=function(t,e){var i=this;if(t)for(var n=0,r=e;n<r.length;n+=1){var s=r[n];i.checkPatternExport(t,s.id)}},$.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},$.parseExportSpecifiers=function(t){var e=this,i=[],n=!0;for(this.expect(D.braceL);!this.eat(D.braceR);){if(n)n=!1;else if(e.expect(D.comma),e.afterTrailingComma(D.braceR))break;var r=e.startNode();r.local=e.parseIdent(!0),r.exported=e.eatContextual("as")?e.parseIdent(!0):r.local,e.checkExport(t,r.exported.name,r.exported.start),i.push(e.finishNode(r,"ExportSpecifier"))}return i},$.parseImport=function(t){return this.next(),this.type===D.string?(t.specifiers=tt,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===D.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},$.parseImportSpecifiers=function(){var t=this,e=[],i=!0;if(this.type===D.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,"let"),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(D.comma))return e}if(this.type===D.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,"let"),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(D.braceL);!this.eat(D.braceR);){if(i)i=!1;else if(t.expect(D.comma),t.afterTrailingComma(D.braceR))break;var s=t.startNode();s.imported=t.parseIdent(!0),t.eatContextual("as")?s.local=t.parseIdent():(t.checkUnreserved(s.imported),s.local=s.imported),t.checkLVal(s.local,"let"),e.push(t.finishNode(s,"ImportSpecifier"))}return e};var et=Y.prototype;et.toAssignable=function(t,e){var i=this;if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":t.type="ObjectPattern";for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];"init"!==s.kind&&i.raise(s.key.start,"Object pattern can't contain getter or setter"),i.toAssignable(s.value,e)}break;case"ArrayExpression":t.type="ArrayPattern",this.toAssignableList(t.elements,e);break;case"AssignmentExpression":if("="!==t.operator){this.raise(t.left.end,"Only '=' operator can be used for specifying default value.");break}t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}return t},et.toAssignableList=function(t,e){var i=this,n=t.length;if(n){var r=t[n-1];if(r&&"RestElement"==r.type)--n;else if(r&&"SpreadElement"==r.type){r.type="RestElement";var s=r.argument;this.toAssignable(s,e),--n}6===this.options.ecmaVersion&&e&&r&&"RestElement"===r.type&&"Identifier"!==r.argument.type&&this.unexpected(r.argument.start)}for(var o=0;o<n;o++){var a=t[o];a&&i.toAssignable(a,e)}return t},et.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},et.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==D.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},et.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case D.name:return this.parseIdent();case D.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(D.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case D.braceL:return this.parseObj(!0);default:this.unexpected()}},et.parseBindingList=function(t,e,i){for(var n=this,r=[],s=!0;!this.eat(t);)if(s?s=!1:n.expect(D.comma),e&&n.type===D.comma)r.push(null);else{if(i&&n.afterTrailingComma(t))break;if(n.type===D.ellipsis){var o=n.parseRestBinding();n.parseBindingListItem(o),r.push(o),n.type===D.comma&&n.raise(n.start,"Comma is not permitted after the rest element"),n.expect(t);break}var a=n.parseMaybeDefault(n.start,n.startLoc);n.parseBindingListItem(a),r.push(a)}return r},et.parseBindingListItem=function(t){return t},et.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(D.eq))return i;var n=this.startNodeAt(t,e);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},et.checkLVal=function(t,e,i){var n=this;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(u(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),e&&"none"!==e&&(("var"===e&&!this.canDeclareVarName(t.name)||"var"!==e&&!this.canDeclareLexicalName(t.name))&&this.raiseRecoverable(t.start,"Identifier '"+t.name+"' has already been declared"),"var"===e?this.declareVarName(t.name):this.declareLexicalName(t.name));break;case"MemberExpression":e&&this.raiseRecoverable(t.start,(e?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var r=0,s=t.properties;r<s.length;r+=1){var o=s[r];n.checkLVal(o.value,e,i)}break;case"ArrayPattern":for(var a=0,h=t.elements;a<h.length;a+=1){var l=h[a];l&&n.checkLVal(l,e,i)}break;case"AssignmentPattern":this.checkLVal(t.left,e,i);break;case"RestElement":this.checkLVal(t.argument,e,i);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,i);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var it=Y.prototype;it.checkPropClash=function(t,e){if(!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,n=t.key;switch(n.type){case"Identifier":i=n.name;break;case"Literal":i=String(n.value);break;default:return}var r=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===r&&(e.proto&&this.raiseRecoverable(n.start,"Redefinition of __proto__ property"),e.proto=!0);else{var s=e[i="$"+i];if(s){("init"===r?this.strict&&s.init||s.get||s.set:s.init||s[r])&&this.raiseRecoverable(n.start,"Redefinition of property")}else s=e[i]={init:!1,get:!1,set:!1};s[r]=!0}}},it.parseExpression=function(t,e){var i=this,n=this.start,r=this.startLoc,s=this.parseMaybeAssign(t,e);if(this.type===D.comma){var o=this.startNodeAt(n,r);for(o.expressions=[s];this.eat(D.comma);)o.expressions.push(i.parseMaybeAssign(t,e));return this.finishNode(o,"SequenceExpression")}return s},it.parseMaybeAssign=function(t,e,i){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var n=!1,r=-1,s=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new p,n=!0);var o=this.start,a=this.startLoc;this.type!=D.parenL&&this.type!=D.name||(this.potentialArrowAt=this.start);var h=this.parseMaybeConditional(t,e);if(i&&(h=i.call(this,h,o,a)),this.type.isAssign){this.checkPatternErrors(e,!0),n||p.call(e);var u=this.startNodeAt(o,a);return u.operator=this.value,u.left=this.type===D.eq?this.toAssignable(h):h,e.shorthandAssign=-1,this.checkLVal(h),this.next(),u.right=this.parseMaybeAssign(t),this.finishNode(u,"AssignmentExpression")}return n&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),h},it.parseMaybeConditional=function(t,e){var i=this.start,n=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(D.question)){var s=this.startNodeAt(i,n);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(D.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},it.parseExprOps=function(t,e){var i=this.start,n=this.startLoc,r=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?r:r.start==i&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,i,n,-1,t)},it.parseExprOp=function(t,e,i,n,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==D._in)&&s>n){var o=this.type===D.logicalOR||this.type===D.logicalAND,a=this.value;this.next();var h=this.start,u=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),h,u,s,r),c=this.buildBinary(e,i,t,l,a,o);return this.parseExprOp(c,e,i,n,r)}return t},it.buildBinary=function(t,e,i,n,r,s){var o=this.startNodeAt(t,e);return o.left=i,o.operator=r,o.right=n,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")},it.parseMaybeUnary=function(t,e){var i,n=this,r=this.start,s=this.startLoc;if(this.inAsync&&this.isContextual("await"))i=this.parseAwait(t),e=!0;else if(this.type.prefix){var o=this.startNode(),a=this.type===D.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):e=!0,i=this.finishNode(o,a?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var h=n.startNodeAt(r,s);h.operator=n.value,h.prefix=!1,h.argument=i,n.checkLVal(i),n.next(),i=n.finishNode(h,"UpdateExpression")}}return!e&&this.eat(D.starstar)?this.buildBinary(r,s,i,this.parseMaybeUnary(null,!1),"**",!1):i},it.parseExprSubscripts=function(t){var e=this.start,i=this.startLoc,n=this.parseExprAtom(t),r="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||r)return n;var s=this.parseSubscripts(n,e,i);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1)),s},it.parseSubscripts=function(t,e,i,n){for(var r=this,s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd==t.end&&!this.canInsertSemicolon(),o=void 0;;)if((o=r.eat(D.bracketL))||r.eat(D.dot)){var a=r.startNodeAt(e,i);a.object=t,a.property=o?r.parseExpression():r.parseIdent(!0),a.computed=!!o,o&&r.expect(D.bracketR),t=r.finishNode(a,"MemberExpression")}else if(!n&&r.eat(D.parenL)){var h=new p,u=r.yieldPos,l=r.awaitPos;r.yieldPos=0,r.awaitPos=0;var c=r.parseExprList(D.parenR,r.options.ecmaVersion>=8,!1,h);if(s&&!r.canInsertSemicolon()&&r.eat(D.arrow))return r.checkPatternErrors(h,!1),r.checkYieldAwaitInDefaultParams(),r.yieldPos=u,r.awaitPos=l,r.parseArrowExpression(r.startNodeAt(e,i),c,!0);r.checkExpressionErrors(h,!0),r.yieldPos=u||r.yieldPos,r.awaitPos=l||r.awaitPos;var f=r.startNodeAt(e,i);f.callee=t,f.arguments=c,t=r.finishNode(f,"CallExpression")}else{if(r.type!==D.backQuote)return t;var d=r.startNodeAt(e,i);d.tag=t,d.quasi=r.parseTemplate({isTagged:!0}),t=r.finishNode(d,"TaggedTemplateExpression")}},it.parseExprAtom=function(t){var e,i=this.potentialArrowAt==this.start;switch(this.type){case D._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case D._this:var n=this.type===D._this?"ThisExpression":"Super";return e=this.startNode(),this.next(),this.finishNode(e,n);case D.name:var r=this.start,s=this.startLoc,o=this.parseIdent(this.type!==D.name);if(this.options.ecmaVersion>=8&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(D._function))return this.parseFunction(this.startNodeAt(r,s),!1,!1,!0);if(i&&!this.canInsertSemicolon()){if(this.eat(D.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===D.name)return o=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(D.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[o],!0)}return o;case D.regexp:var a=this.value;return e=this.parseLiteral(a.value),e.regex={pattern:a.pattern,flags:a.flags},e;case D.num:case D.string:return this.parseLiteral(this.value);case D._null:case D._true:case D._false:return e=this.startNode(),e.value=this.type===D._null?null:this.type===D._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case D.parenL:var h=this.start,u=this.parseParenAndDistinguishExpression(i);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=h),t.parenthesizedBind<0&&(t.parenthesizedBind=h)),u;case D.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(D.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case D.braceL:return this.parseObj(!1,t);case D._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case D._class:return this.parseClass(this.startNode(),!1);case D._new:return this.parseNew();case D.backQuote:return this.parseTemplate();default:this.unexpected()}},it.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},it.parseParenExpression=function(){this.expect(D.parenL);var t=this.parseExpression();return this.expect(D.parenR),t},it.parseParenAndDistinguishExpression=function(t){var e,i=this,n=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,a,h=this.start,u=this.startLoc,l=[],c=!0,f=!1,d=new p,g=this.yieldPos,v=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==D.parenR;){if(c?c=!1:i.expect(D.comma),s&&i.afterTrailingComma(D.parenR,!0)){f=!0;break}if(i.type===D.ellipsis){o=i.start,l.push(i.parseParenItem(i.parseRestBinding())),i.type===D.comma&&i.raise(i.start,"Comma is not permitted after the rest element");break}i.type!==D.parenL||a||(a=i.start),l.push(i.parseMaybeAssign(!1,d,i.parseParenItem))}var _=this.start,m=this.startLoc;if(this.expect(D.parenR),t&&!this.canInsertSemicolon()&&this.eat(D.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),a&&this.unexpected(a),this.yieldPos=g,this.awaitPos=v,this.parseParenArrowList(n,r,l);l.length&&!f||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(d,!0),this.yieldPos=g||this.yieldPos,this.awaitPos=v||this.awaitPos,l.length>1?((e=this.startNodeAt(h,u)).expressions=l,this.finishNodeAt(e,"SequenceExpression",_,m)):e=l[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=e,this.finishNode(y,"ParenthesizedExpression")}return e},it.parseParenItem=function(t){return t},it.parseParenArrowList=function(t,e,i){return this.parseArrowExpression(this.startNodeAt(t,e),i)};var nt=[];it.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(D.dot))return t.meta=e,t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty");var i=this.start,n=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,n,!0),this.eat(D.parenL)?t.arguments=this.parseExprList(D.parenR,this.options.ecmaVersion>=8,!1):t.arguments=nt,this.finishNode(t,"NewExpression")},it.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===D.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===D.backQuote,this.finishNode(i,"TemplateElement")},it.parseTemplate=function(t){var e=this;void 0===t&&(t={});var i=t.isTagged;void 0===i&&(i=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:i});for(n.quasis=[r];!r.tail;)e.expect(D.dollarBraceL),n.expressions.push(e.parseExpression()),e.expect(D.braceR),n.quasis.push(r=e.parseTemplateElement({isTagged:i}));return this.next(),this.finishNode(n,"TemplateLiteral")},it.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===D.name||this.type===D.num||this.type===D.string||this.type===D.bracketL||this.type.keyword)&&!N.test(this.input.slice(this.lastTokEnd,this.start))},it.parseObj=function(t,e){var i=this,n=this.startNode(),r=!0,s={};for(n.properties=[],this.next();!this.eat(D.braceR);){if(r)r=!1;else if(i.expect(D.comma),i.afterTrailingComma(D.braceR))break;var o=i.startNode(),a=void 0,h=void 0,u=void 0,l=void 0;i.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(u=i.start,l=i.startLoc),t||(a=i.eat(D.star))),i.parsePropertyName(o),!t&&i.options.ecmaVersion>=8&&!a&&i.isAsyncProp(o)?(h=!0,i.parsePropertyName(o,e)):h=!1,i.parsePropertyValue(o,t,a,h,u,l,e),i.checkPropClash(o,s),n.properties.push(i.finishNode(o,"Property"))}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},it.parsePropertyValue=function(t,e,i,n,r,s,o){if((i||n)&&this.type===D.colon&&this.unexpected(),this.eat(D.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===D.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,n);else if(this.options.ecmaVersion>=5&&!t.computed&&"Identifier"===t.key.type&&("get"===t.key.name||"set"===t.key.name)&&this.type!=D.comma&&this.type!=D.braceR){(i||n||e)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var a="get"===t.kind?0:1;if(t.value.params.length!==a){var h=t.value.start;"get"===t.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?(this.checkUnreserved(t.key),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,t.key):this.type===D.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected()},it.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(D.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(D.bracketR),t.key;t.computed=!1}return t.key=this.type===D.num||this.type===D.string?this.parseExprAtom():this.parseIdent(!0)},it.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=!1,t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},it.parseMethod=function(t,e){var i=this.startNode(),n=this.inGenerator,r=this.inAsync,s=this.yieldPos,o=this.awaitPos,a=this.inFunction;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.inGenerator=i.generator,this.inAsync=i.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(D.parenL),i.params=this.parseBindingList(D.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1),this.inGenerator=n,this.inAsync=r,this.yieldPos=s,this.awaitPos=o,this.inFunction=a,this.finishNode(i,"FunctionExpression")},it.parseArrowExpression=function(t,e,i){var n=this.inGenerator,r=this.inAsync,s=this.yieldPos,o=this.awaitPos,a=this.inFunction;return this.enterFunctionScope(),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.inGenerator=!1,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0),this.inGenerator=n,this.inAsync=r,this.yieldPos=s,this.awaitPos=o,this.inFunction=a,this.finishNode(t,"ArrowFunctionExpression")},it.parseFunctionBody=function(t,e){var i=e&&this.type!==D.braceL,n=this.strict,r=!1;if(i)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);n&&!s||(r=this.strictDirective(this.end))&&s&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],r&&(this.strict=!0),this.checkParams(t,!n&&!r&&!e&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.labels=o}this.exitFunctionScope(),this.strict&&t.id&&this.checkLVal(t.id,"none"),this.strict=n},it.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1)if("Identifier"!==i[e].type)return!1;return!0},it.checkParams=function(t,e){for(var i=this,n={},r=0,s=t.params;r<s.length;r+=1){var o=s[r];i.checkLVal(o,"var",e?null:n)}},it.parseExprList=function(t,e,i,n){for(var r=this,s=[],o=!0;!this.eat(t);){if(o)o=!1;else if(r.expect(D.comma),e&&r.afterTrailingComma(t))break;var a=void 0;i&&r.type===D.comma?a=null:r.type===D.ellipsis?(a=r.parseSpread(n),n&&r.type===D.comma&&n.trailingComma<0&&(n.trailingComma=r.start)):a=r.parseMaybeAssign(!1,n),s.push(a)}return s},it.checkUnreserved=function(t){var e=t.start,i=t.end,n=t.name;this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Can not use 'await' as identifier inside an async function"),this.isKeyword(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),this.options.ecmaVersion<6&&-1!=this.input.slice(e,i).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&this.raiseRecoverable(e,"The keyword '"+n+"' is reserved")},it.parseIdent=function(t,e){var i=this.startNode();return t&&"never"==this.options.allowReserved&&(t=!1),this.type===D.name?i.name=this.value:this.type.keyword?i.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(i,"Identifier"),t||this.checkUnreserved(i),i},it.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type==D.semi||this.canInsertSemicolon()||this.type!=D.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(D.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")},it.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var rt=Y.prototype;rt.raise=function(t,e){var i=l(this.input,t);e+=" ("+i.line+":"+i.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=this.pos,n},rt.raiseRecoverable=rt.raise,rt.curPosition=function(){if(this.options.locations)return new q(this.curLine,this.pos-this.lineStart)};var st=Y.prototype,ot=Object.assign||function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var n=0,r=e;n<r.length;n+=1){var s=r[n];for(var o in s)u(s,o)&&(t[o]=s[o])}return t};st.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},st.exitFunctionScope=function(){this.scopeStack.pop()},st.enterLexicalScope=function(){var t=this.scopeStack[this.scopeStack.length-1],e={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(e),ot(e.parentLexical,t.lexical,t.parentLexical)},st.exitLexicalScope=function(){var t=this.scopeStack.pop(),e=this.scopeStack[this.scopeStack.length-1];ot(e.childVar,t.var,t.childVar)},st.canDeclareVarName=function(t){var e=this.scopeStack[this.scopeStack.length-1];return!u(e.lexical,t)&&!u(e.parentLexical,t)},st.canDeclareLexicalName=function(t){var e=this.scopeStack[this.scopeStack.length-1];return!u(e.lexical,t)&&!u(e.var,t)&&!u(e.childVar,t)},st.declareVarName=function(t){this.scopeStack[this.scopeStack.length-1].var[t]=!0},st.declareLexicalName=function(t){this.scopeStack[this.scopeStack.length-1].lexical[t]=!0};var at=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new G(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},ht=Y.prototype;ht.startNode=function(){return new at(this,this.start,this.startLoc)},ht.startNodeAt=function(t,e){return new at(this,t,e)},ht.finishNode=function(t,e){return g.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},ht.finishNodeAt=function(t,e,i,n){return g.call(this,t,e,i,n)};var ut=function(t,e,i,n,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=n,this.generator=!!r},lt={b_stat:new ut("{",!1),b_expr:new ut("{",!0),b_tmpl:new ut("${",!1),p_stat:new ut("(",!1),p_expr:new ut("(",!0),q_tmpl:new ut("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new ut("function",!1),f_expr:new ut("function",!0),f_expr_gen:new ut("function",!0,!1,null,!0),f_gen:new ut("function",!1,!1,null,!0)},ct=Y.prototype;ct.initialContext=function(){return[lt.b_stat]},ct.braceIsBlock=function(t){var e=this.curContext();return e===lt.f_expr||e===lt.f_stat||(t!==D.colon||e!==lt.b_stat&&e!==lt.b_expr?t===D._return||t==D.name&&this.exprAllowed?N.test(this.input.slice(this.lastTokEnd,this.start)):t===D._else||t===D.semi||t===D.eof||t===D.parenR||t==D.arrow||(t==D.braceL?e===lt.b_stat:t!=D._var&&t!=D.name&&!this.exprAllowed):!e.isExpr)},ct.inGeneratorContext=function(){for(var t=this,e=this.context.length-1;e>=1;e--){var i=t.context[e];if("function"===i.token)return i.generator}return!1},ct.updateContext=function(t){var e,i=this.type;i.keyword&&t==D.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},D.parenR.updateContext=D.braceR.updateContext=function(){if(1!=this.context.length){var t=this.context.pop();t===lt.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},D.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?lt.b_stat:lt.b_expr),this.exprAllowed=!0},D.dollarBraceL.updateContext=function(){this.context.push(lt.b_tmpl),this.exprAllowed=!0},D.parenL.updateContext=function(t){var e=t===D._if||t===D._for||t===D._with||t===D._while;this.context.push(e?lt.p_stat:lt.p_expr),this.exprAllowed=!0},D.incDec.updateContext=function(){},D._function.updateContext=D._class.updateContext=function(t){t.beforeExpr&&t!==D.semi&&t!==D._else&&(t!==D.colon&&t!==D.braceL||this.curContext()!==lt.b_stat)?this.context.push(lt.f_expr):this.context.push(lt.f_stat),this.exprAllowed=!1},D.backQuote.updateContext=function(){this.curContext()===lt.q_tmpl?this.context.pop():this.context.push(lt.q_tmpl),this.exprAllowed=!1},D.star.updateContext=function(t){if(t==D._function){var e=this.context.length-1;this.context[e]===lt.f_expr?this.context[e]=lt.f_expr_gen:this.context[e]=lt.f_gen}this.exprAllowed=!0},D.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&("of"==this.value&&!this.exprAllowed||"yield"==this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var ft=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new G(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},dt=Y.prototype,pt="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);dt.next=function(){this.options.onToken&&this.options.onToken(new ft(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},dt.getToken=function(){return this.next(),new ft(this)},"undefined"!=typeof Symbol&&(dt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===D.eof,value:e}}}}),dt.curContext=function(){return this.context[this.context.length-1]},dt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(D.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},dt.readToken=function(t){return r(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},dt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},dt.skipBlockComment=function(){var t=this,e=this.options.onComment&&this.curPosition(),i=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations){F.lastIndex=i;for(var r;(r=F.exec(this.input))&&r.index<this.pos;)++t.curLine,t.lineStart=r.index+r[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(i+2,n),i,this.pos,e,this.curPosition())},dt.skipLineComment=function(t){for(var e=this,i=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!h(r);)r=e.input.charCodeAt(++e.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(i+t,this.pos),i,this.pos,n,this.curPosition())},dt.skipSpace=function(){var t=this;t:for(;this.pos<this.input.length;){var e=t.input.charCodeAt(t.pos);switch(e){case 32:case 160:++t.pos;break;case 13:10===t.input.charCodeAt(t.pos+1)&&++t.pos;case 10:case 8232:case 8233:++t.pos,t.options.locations&&(++t.curLine,t.lineStart=t.pos);break;case 47:switch(t.input.charCodeAt(t.pos+1)){case 42:t.skipBlockComment();break;case 47:t.skipLineComment(2);break;default:break t}break;default:if(!(e>8&&e<14||e>=5760&&j.test(String.fromCharCode(e))))break t;++t.pos}}},dt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},dt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(D.ellipsis)):(++this.pos,this.finishToken(D.dot))},dt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(D.assign,2):this.finishOp(D.slash,1)},dt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,n=42===t?D.star:D.modulo;return this.options.ecmaVersion>=7&&42===e&&(++i,n=D.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(D.assign,i+1):this.finishOp(n,i)},dt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?D.logicalOR:D.logicalAND,2):61===e?this.finishOp(D.assign,2):this.finishOp(124===t?D.bitwiseOR:D.bitwiseAND,1)},dt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(D.assign,2):this.finishOp(D.bitwiseXOR,1)},dt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!=e||this.inModule||62!=this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!N.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(D.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(D.assign,2):this.finishOp(D.plusMin,1)},dt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(D.assign,i+1):this.finishOp(D.bitShift,i)):33!=e||60!=t||this.inModule||45!=this.input.charCodeAt(this.pos+2)||45!=this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(D.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},dt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(D.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(D.arrow)):this.finishOp(61===t?D.eq:D.prefix,1)},dt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(D.parenL);case 41:return++this.pos,this.finishToken(D.parenR);case 59:return++this.pos,this.finishToken(D.semi);case 44:return++this.pos,this.finishToken(D.comma);case 91:return++this.pos,this.finishToken(D.bracketL);case 93:return++this.pos,this.finishToken(D.bracketR);case 123:return++this.pos,this.finishToken(D.braceL);case 125:return++this.pos,this.finishToken(D.braceR);case 58:return++this.pos,this.finishToken(D.colon);case 63:return++this.pos,this.finishToken(D.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(D.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(D.prefix,1)}this.raise(this.pos,"Unexpected character '"+_(t)+"'")},dt.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)};var gt=!!v("￿","u");dt.readRegexp=function(){for(var t,e,i=this,n=this.pos;;){i.pos>=i.input.length&&i.raise(n,"Unterminated regular expression");var r=i.input.charAt(i.pos);if(N.test(r)&&i.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++i.pos}var s=this.input.slice(n,this.pos);++this.pos;var o=this.readWord1(),a=s,h="";if(o){var u=/^[gim]*$/;this.options.ecmaVersion>=6&&(u=/^[gimuy]*$/),u.test(o)||this.raise(n,"Invalid regular expression flag"),o.indexOf("u")>=0&&(gt?h="u":(a=(a=a.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,e,r){return(e=Number("0x"+e))>1114111&&i.raise(n+r+3,"Code point out of bounds"),"x"})).replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"),h=h.replace("u","")))}var l=null;return pt||(v(a,h,n,this),l=v(s,o)),this.finishToken(D.regexp,{pattern:s,flags:o,value:l})},dt.readInt=function(t,e){for(var i=this,n=this.pos,r=0,s=0,o=null==e?1/0:e;s<o;++s){var a=i.input.charCodeAt(i.pos),h=void 0;if((h=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++i.pos,r=r*t+h}return this.pos===n||null!=e&&this.pos-n!==e?null:r},dt.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),r(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(D.num,e)},dt.readNumber=function(t){var e=this.pos,i=!1,n=48===this.input.charCodeAt(this.pos);t||null!==this.readInt(10)||this.raise(e,"Invalid number"),n&&this.pos==e+1&&(n=!1);var s=this.input.charCodeAt(this.pos);46!==s||n||(++this.pos,this.readInt(10),i=!0,s=this.input.charCodeAt(this.pos)),69!==s&&101!==s||n||(43!==(s=this.input.charCodeAt(++this.pos))&&45!==s||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number"),i=!0),r(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o,a=this.input.slice(e,this.pos);return i?o=parseFloat(a):n&&1!==a.length?this.strict?this.raise(e,"Invalid number"):o=/[89]/.test(a)?parseInt(a,10):parseInt(a,8):o=parseInt(a,10),this.finishToken(D.num,o)},dt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},dt.readString=function(t){for(var e=this,i="",n=++this.pos;;){e.pos>=e.input.length&&e.raise(e.start,"Unterminated string constant");var r=e.input.charCodeAt(e.pos);if(r===t)break;92===r?(i+=e.input.slice(n,e.pos),i+=e.readEscapedChar(!1),n=e.pos):(h(r)&&e.raise(e.start,"Unterminated string constant"),++e.pos)}return i+=this.input.slice(n,this.pos++),this.finishToken(D.string,i)};var vt={};dt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==vt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},dt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw vt;this.raise(t,e)},dt.readTmplToken=function(){for(var t=this,e="",i=this.pos;;){t.pos>=t.input.length&&t.raise(t.start,"Unterminated template");var n=t.input.charCodeAt(t.pos);if(96===n||36===n&&123===t.input.charCodeAt(t.pos+1))return t.pos!==t.start||t.type!==D.template&&t.type!==D.invalidTemplate?(e+=t.input.slice(i,t.pos),t.finishToken(D.template,e)):36===n?(t.pos+=2,t.finishToken(D.dollarBraceL)):(++t.pos,t.finishToken(D.backQuote));if(92===n)e+=t.input.slice(i,t.pos),e+=t.readEscapedChar(!0),i=t.pos;else if(h(n)){switch(e+=t.input.slice(i,t.pos),++t.pos,n){case 13:10===t.input.charCodeAt(t.pos)&&++t.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(n)}t.options.locations&&(++t.curLine,t.lineStart=t.pos),i=t.pos}else++t.pos}},dt.readInvalidTemplateToken=function(){for(var t=this;this.pos<this.input.length;this.pos++)switch(t.input[t.pos]){case"\\":++t.pos;break;case"$":if("{"!==t.input[t.pos+1])break;case"`":return t.finishToken(D.invalidTemplate,t.input.slice(t.start,t.pos))}this.raise(this.start,"Unterminated template")},dt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return _(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(i,8);return n>255&&(i=i.slice(0,-1),n=parseInt(i,8)),"0"!==i&&(this.strict||t)&&this.invalidStringToken(this.pos-2,"Octal literal in strict mode"),this.pos+=i.length-1,String.fromCharCode(n)}return String.fromCharCode(e)}},dt.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},dt.readWord1=function(){var t=this;this.containsEsc=!1;for(var e="",i=!0,n=this.pos,o=this.options.ecmaVersion>=6;this.pos<this.input.length;){var a=t.fullCharCodeAtPos();if(s(a,o))t.pos+=a<=65535?1:2;else{if(92!==a)break;t.containsEsc=!0,e+=t.input.slice(n,t.pos);var h=t.pos;117!=t.input.charCodeAt(++t.pos)&&t.invalidStringToken(t.pos,"Expecting Unicode escape sequence \\uXXXX"),++t.pos;var u=t.readCodePoint();(i?r:s)(u,o)||t.invalidStringToken(h,"Invalid Unicode escape"),e+=_(u),n=t.pos}i=!1}return e+this.input.slice(n,this.pos)},dt.readWord=function(){var t=this.readWord1(),e=D.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=L[t]),this.finishToken(e,t)};var _t,mt,yt,bt="5.1.2"},function(t,e){},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=n(i(82)),h=n(i(184)),u=function(t){function e(i,n){r(this,e);var o=s(this,t.call(this,i,n));return o.noMaskColor="white",o}return o(e,t),e.prototype.prepareMetaballizer=function(){this.metaballizer=new h.default(this.maskContext),this.metaballizer.registerBalls(this.bubbles)},e.prototype.appendMask=function(t){this.isApplied=!0,this.mesh.mask=this._createMask(t)},e.prototype.refreshMask=function(t){this.mesh.mask.texture.update()},e}(a.default);e.default=u},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var o=i(185),a=function(t){function e(){return n(this,e),r(this,t.apply(this,arguments))}return s(e,t),e.prototype.render=function(){this.iteration++,this.sign=-this.sign,this.drawing=!1,this.context.fillStyle=this.metaFill,this.context.beginPath();for(var t=0;t<this.balls.length;t++){var e=this.balls[t],i=[Math.round(e.x/o.step),Math.round(e.y/o.step),!1];do{i=this.marchingSquares(i)}while(i);this.drawing&&(this.context.fill(),this.context.closePath(),this.context.beginPath(),this.drawing=!1)}},e}(function(t){return t&&t.__esModule?t:{default:t}}(o).default);e.default=a},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,i){n(this,t),this.x=e,this.y=i,this.magnitude=e*e+i*i,this.computed=0,this.force=0}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t}(),s=[0,0,1,0,1,1,1,1,1,1,0,1,0,0,0,0],o=[0,0,0,0,0,0,1,0,0,1,1,1,0,1,0,1],a=[0,3,0,3,1,3,0,3,2,2,0,2,1,1,0],h=[1,0,-1,0,0,1,0,-1,-1,0,1,0,0,1,1,0,0,0,1,1],u=e.step=5,l=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white";n(this,t),this.context=e,this.metaFill=i,this.balls=[],this.setupInnerParameters(),this.setupGrid()}return t.prototype.setupInnerParameters=function(){this.width=this.context.canvas.width,this.height=this.context.canvas.height,this.sx=Math.floor(this.width/u),this.sy=Math.floor(this.height/u),this.drawing=!1,this.iteration=0,this.sign=1},t.prototype.setupGrid=function(){this.grid=[];for(var t=(this.sx+2)*(this.sy+2),e=0;e<t;e++){var i=e%(this.sx+2)*u,n=Math.floor(e/(this.sx+2))*u;this.grid[e]=new r(i,n)}},t.prototype.registerBalls=function(t){this.balls=t||[]},t.prototype.render=function(){this.iteration++,this.sign=-this.sign,this.drawing=!1,this.context.fillStyle=this.metaFill,this.context.fillRect(0,0,this.height,this.width),this.context.globalCompositeOperation="destination-out",this.context.beginPath();for(var t=0;t<this.balls.length;t++){var e=this.balls[t],i=[Math.round(e.x/u),Math.round(e.y/u),!1];do{i=this.marchingSquares(i)}while(i);this.drawing&&(this.context.fill(),this.context.closePath(),this.context.globalCompositeOperation="source-over",this.context.beginPath(),this.drawing=!1)}},t.prototype.marchingSquares=function(t){var e=t[0],i=t[1],n=t[2],r=e+i*(this.sx+2);if(this.grid[r].computed===this.iteration)return!1;for(var l,c=0,f=0;f<4;f++){var d=e+h[f+12]+(i+h[f+16])*(this.sx+2),p=this.grid[d].force;(p>0&&this.sign<0||p<0&&this.sign>0||!p)&&(p=this.computeForce(e+h[f+12],i+h[f+16],d)),Math.abs(p)>1&&(c+=Math.pow(2,f))}if(15===c)return[e,i-1,!1];5===c?l=2===n?3:1:10===c?l=3===n?0:2:(l=a[c],this.grid[r].computed=this.iteration);var g=u/(Math.abs(Math.abs(this.grid[e+s[4*l+2]+(i+o[4*l+2])*(this.sx+2)].force)-1)/Math.abs(Math.abs(this.grid[e+s[4*l+3]+(i+o[4*l+3])*(this.sx+2)].force)-1)+1);return this.context.lineTo(this.grid[e+s[4*l+0]+(i+o[4*l+0])*(this.sx+2)].x+h[l]*g,this.grid[e+s[4*l+1]+(i+o[4*l+1])*(this.sx+2)].y+h[l+4]*g),this.drawing=!0,[e+h[l+4],i+h[l+8],l]},t.prototype.computeForce=function(t,e,i){var n=0,r=i||t+e*(this.sx+2);if(0===t||0===e||t===this.sx||e===this.sy)n=.6*this.sign;else{for(var s=this.grid[r],o=0;o<this.balls.length;o++){var a=this.balls[o],h=a.x,u=a.y,l=a.radius,c=h*h+u*u;n+=l*l/(-2*s.x*h-2*s.y*u+c+s.magnitude)}n*=this.sign}return this.grid[r].force=n,n},t}();e.default=l},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){return Math.min(t.clientWidth,t.clientHeight)}function o(t){if(!t)throw new Error("Please, provide HTML-container for the SHLogo");if("string"==typeof t)return document.getElementById(t);if("object"===(void 0===t?"undefined":a(t)))return t;throw new Error("Please, provide HTML container for the SHLogo")}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=n(i(78)),u=n(i(81)),l=function(){function t(e,i){r(this,t),this.app=null,this.container=null,this.isReady=!1,this.isResponsive=!0,this.supportedStates={},this.registerBaseStates(),this.init(e,i)}return t.prototype.init=function(t,e){this.container=o(t);var i=s(this.container);this.app=new PIXI.Application({width:i,height:i,forceCanvas:!1,transparent:!0,backgroundColor:16777215}),this.container.appendChild(this.app.view);var n=this,r=new h.default(n.app,i,function(){n.body=new u.default(r,n.app,i),n.app.ticker.add(function(t){n.update(t)},this),n.isReady=!0,"function"==typeof e&&e()});this.setupResponsive()},t.prototype.setupResponsive=function(){if(this.isResponsive){var t=this,e=function(){t.resize()};window.attachEvent?window.attachEvent("onresize",e):window.addEventListener&&window.addEventListener("resize",e,!0)}},t.prototype.resize=function(){if(this.isReady){var t=s(this.container)+"px",e=this.app.renderer.view;e.style.width=t,e.style.height=t}},t.prototype.update=function(t){this.body.update(t)},t.prototype.defineState=function(t,e){if("string"!=typeof t)throw new Error("Provide a string name for a new logo's state");if("object"!==(void 0===e?"undefined":a(e)))throw new Error("Provide settings for a new logo's state");if(this.supportedStates[t])throw new Error("The '"+t+"' state has already been defined.");this.supportedStates[t]=e},t.prototype.removeState=function(t){delete this.supportedStates[t]},t.prototype.applyState=function(t){var e=this.getStateSettings(t);this.body.setState(e)},t.prototype.transitTo=function(t,e,i,n){var r=this.getStateSettings(t);this.body.transitTo(r,e||600,i||0,n||"")},t.prototype.getStateSettings=function(t){if(!t||"string"!=typeof t)throw new Error("Please provide correct state name");var e=this.supportedStates[t];if(!e)throw new Error("The '"+t+"' state is undefined");return e},t.prototype.registerBaseStates=function(){},t}();e.default=l}]);